
### MÓDULO 8: GAMIFICAÇÃO

##### 8.1 Sistema de Pontos

#### RF097 - Atribuir +10 pontos ao criar thread

##### User Story
Como **aluno que criou uma thread**
Quero **receber pontos por criar conteúdo**
Para **ser reconhecido por contribuir com discussões para a comunidade**

##### Descrição
Sistema que automaticamente atribui 10 pontos ao usuário quando cria uma nova thread no fórum.

##### Regras de Negócio
- RN001: +10 pontos por thread criada
- RN002: Pontos atribuídos imediatamente após thread ser publicada
- RN003: Apenas threads não deletadas contam (deletar remove pontos)
- RN004: Limite diário: máximo 100 pontos por dia em threads (10 threads)
- RN005: Threads duplicadas/spam detectadas manualmente (admin revisa)
- RN006: Registro em tabela `user_points` com motivo e referência
- RN007: Pontos não podem ser removidos manualmente (apenas por deletar)

##### Critérios de Aceitação
- [ ] Dado que publico nova thread
      Quando thread é criada com sucesso
      Então recebo imediatamente +10 pontos
      
- [ ] Dado que verifico meus pontos
      Quando visualizo histórico
      Então vejo "+ 10 pontos - Thread: [Título]" com timestamp
      
- [ ] Dado que criei 10 threads em 1 dia (100 pontos)
      Quando tento criar a 11ª
      Então vejo aviso "Limite diário de pontos em threads atingido"
      
- [ ] Dado que deleto thread que criei
      Quando deleção é processada
      Então perdo os 10 pontos retroativamente
      
- [ ] Dado que thread foi publicada há dias
      Quando visualizo pontos
      Então pontos ainda estão lá (não expiram)

##### Prioridade
**Alta** - Core de gamificação

##### Complexidade
**Baixa** - Trigger simples de INSERT

##### Dependências
RF022 (Criar thread), RF103-RF104 (Dashboard e histórico)

##### Notas/Observações
- Trigger: ON INSERT threads THEN INSERT user_points(user_id, points=10, reason='thread_created', thread_id)
- Tabela `user_points`: user_id, points, reason, reference_id, created_at
- Validação: thread.status != 'deleted'
- Rate limiting: 10 threads/dia por usuário
- Logs completos para auditoria
- Webhook para atualizar cache de pontos do usuário
- Considerar "bônus" para threads populares (Fase 2)
- Analytics: threads criadas vs pontos distribuídos



#### RF098 - Atribuir +5 pontos ao comentar

##### User Story
Como **aluno que comentou em uma thread**
Quero **receber pontos por participar da discussão**
Para **ser incentivado a engajar com conteúdo da comunidade**

##### Descrição
Sistema que automaticamente atribui 5 pontos ao usuário quando publica comentário em uma thread.

##### Regras de Negócio
- RN001: +5 pontos por comentário publicado
- RN002: Pontos atribuídos imediatamente após comentário ser criado
- RN003: Comentários deletados removem os pontos
- RN004: Limite diário: máximo 100 pontos por dia em comentários (20 comentários)
- RN005: Comentários spam/muito curtos não ganham pontos (validação posterior)
- RN006: Registro em tabela `user_points` com referência ao comentário
- RN007: Mesmo comentário não pode renderizar múltiplos pontos (idempotente)

##### Critérios de Aceitação
- [ ] Dado que publico comentário em thread
      Quando comentário é criado com sucesso
      Então recebo imediatamente +5 pontos
      
- [ ] Dado que verifico histórico de pontos
      Quando visualizo
      Então vejo "+ 5 pontos - Comentário em: [Thread]"
      
- [ ] Dado que publico 20 comentários em 1 dia (100 pontos)
      Quando tento postar 21º
      Então vejo aviso "Limite diário de pontos em comentários atingido"
      
- [ ] Dado que deleto meu comentário
      Quando deleção é processada
      Então perdo os 5 pontos
      
- [ ] Dado que comentário foi postado há dias
      Quando edito o comentário
      Então pontos não são modificados (apenas uma vez)

##### Prioridade
**Alta** - Core de gamificação

##### Complexidade
**Baixa** - Trigger simples

##### Dependências
RF027 (Comentar), RF103-RF104 (Dashboard e histórico)

##### Notas/Observações
- Trigger: ON INSERT comments THEN INSERT user_points(user_id, points=5, reason='comment_created', comment_id)
- Tabela `user_points`: referência comment_id
- Validação: comment.status != 'deleted'
- Rate limiting: 20 comentários/dia por usuário (ou por thread)
- Campo idempotência: evitar dupla contagem
- Comentários muito curtos (<10 caracteres) podem não ganhar pontos (opcional)
- Logs para auditoria
- Considerar "melhor resposta" com bônus (Fase 2)
- Analytics: engajamento por número de comentários



#### RF099 - Atribuir +2 pontos ao receber upvote

##### User Story
Como **aluno que recebeu upvote**
Quero **receber pontos quando meu conteúdo é validado**
Para **ter reconhecimento por qualidade do meu conteúdo**

##### Descrição
Sistema que atribui 2 pontos ao autor de thread/comentário sempre que recebe upvote de outro usuário.

##### Regras de Negócio
- RN001: +2 pontos por upvote recebido (thread ou comentário)
- RN002: Pontos atribuídos imediatamente após upvote ser registrado
- RN003: Remover upvote remove os pontos do autor
- RN004: Cada upvote conta uma vez (não múltiplos da mesma pessoa)
- RN005: Autor não pode dar upvote em próprio conteúdo (validado em RF030)
- RN006: Limite semanal: máximo 200 pontos em upvotes (100 upvotes)
- RN007: Registro em tabela `user_points` com referência ao upvote

##### Critérios de Aceitação
- [ ] Dado que alguém dá upvote na minha thread
      Quando upvote é registrado
      Então recebo imediatamente +2 pontos
      
- [ ] Dado que meu comentário tem 15 upvotes
      Quando verifico pontos
      Então vejo "+ 30 pontos" (15 × 2) em histórico agregado
      
- [ ] Dado que alguém remove upvote que tinha dado
      Quando remoção é processada
      Então perco os 2 pontos correspondentes
      
- [ ] Dado que recebi 100 upvotes em 1 semana (200 pontos)
      Quando recebo 101º upvote
      Então não ganho mais pontos (limite atingido)
      
- [ ] Dado que alguém tenta dar upvote em meu próprio conteúdo
      Quando tenta
      Então upvote é bloqueado (validação anterior)

##### Prioridade
**Alta** - Core de gamificação

##### Complexidade
**Média** - Trigger com validações bidirecionais

##### Dependências
RF030-RF033 (Sistema de upvotes), RF103-RF104 (Dashboard)

##### Notas/Observações
- Trigger: ON INSERT votes(vote_type='up') THEN INSERT user_points(points=2, reason='upvote_received')
- Trigger reverso: ON DELETE votes THEN DELETE FROM user_points WHERE reason='upvote_received' AND vote_id
- Idempotência: uma pessoa = um upvote = 2 pontos (máximo)
- Rate limiting semanal: 200 pontos/semana em upvotes
- Logs completos de quem votou
- Validação: author_id != voter_id
- Considerar "bônus" para conteúdo muito votado (Fase 2)
- Analytics: upvotes distribuídos vs pontos



#### RF100 - Atribuir +15 pontos ao ter thread marcada como útil

##### User Story
Como **autor de thread resolvida**
Quero **receber bônus de pontos por resolver problema**
Para **ser reconhecido por contribuição valiosa para comunidade**

##### Descrição
Sistema que atribui 15 pontos ao autor de thread quando ela é marcada como "Resolvida/Útil".

##### Regras de Negócio
- RN001: +15 pontos ao thread ser marcada como resolvida
- RN002: Pontos atribuídos imediatamente após marcação
- RN003: Desmarcar como resolvida remove os 15 pontos
- RN004: Apenas thread creator pode marcar (ou admin)
- RN005: Uma thread pode ser marcada como resolvida apenas 1 vez
- RN006: Limite: máximo 50 pontos por dia em resoluções (3-4 threads)
- RN007: Registro em tabela `user_points` com referência à thread

##### Critérios de Aceitação
- [ ] Dado que marco minha thread como "Resolvida"
      Quando resolução é registrada
      Então recebo imediatamente +15 pontos
      
- [ ] Dado que thread tem status "Resolvida"
      Quando verifico histórico de pontos
      Então vejo "+ 15 pontos - Thread resolvida: [Título]"
      
- [ ] Dado que desmarco thread como resolvida
      Quando desmarcação é processada
      Então perdo os 15 pontos
      
- [ ] Dado que marco 4 threads como resolvidas em 1 dia
      Quando tento marcar 5ª
      Então vejo aviso "Limite diário em resoluções atingido"
      
- [ ] Dado que try marcar thread duas vezes
      Quando tenta segunda vez
      Então vejo erro "Esta thread já foi marcada como resolvida"

##### Prioridade
**Alta** - Incentiva resolução de problemas

##### Complexidade
**Média** - Validação de estado único

##### Dependências
RF035 (Marcar como resolvida), RF103-RF104 (Dashboard)

##### Notas/Observações
- Trigger: ON UPDATE threads(resolved=true) THEN INSERT user_points(points=15, reason='thread_resolved')
- Campo constraint: resolved_at pode ser setado apenas uma vez
- Soft revert: UPDATE status SET resolved=false THEN DELETE points
- Rate limiting: 50 pontos/dia em resoluções
- Validação: apenas criador ou admin pode marcar
- Logs de quem marcou e quando
- Considerar "super resolvida" com múltiplos comentários úteis (Fase 2)
- Analytics: % de threads que são resolvidas



#### RF101 - Atribuir +20 pontos ao participar de evento

##### User Story
Como **aluno que confirmou presença em evento**
Quero **receber pontos por participar de atividades da comunidade**
Para **ser incentivado a engajar presencialmente**

##### Descrição
Sistema que atribui 20 pontos ao usuário quando confirma presença em evento e posteriormente o evento ocorre.

##### Regras de Negócio
- RN001: +20 pontos quando evento começa (não na confirmação, mas na data/hora)
- RN002: Pontos atribuídos 1 hora depois do evento começar (assumir presença)
- RN003: Remover confirmação antes do evento cancela os pontos
- RN004: Limite: máximo 100 pontos por dia em eventos (5 eventos)
- RN005: Evento cancelado não gera pontos
- RN006: Registro em tabela `user_points` com referência ao evento
- RN007: Considerar presença confirmada (sem check-in physical para MVP)

##### Critérios de Aceitação
- [ ] Dado que confirmei presença em evento que acontece hoje às 19h
      Quando evento começa (19h passa)
      Então sistema aguarda 1h (até 20h)
      
- [ ] Dado que são 20:05 (1h05min após evento começar)
      Quando job rodeia
      Então recebo +20 pontos (presença confirmada)
      
- [ ] Dado que cancelei confirmação antes do evento
      Quando evento começa
      Então não recebo os 20 pontos
      
- [ ] Dado que participei de 5 eventos em 1 dia (100 pontos)
      Quando 6º evento começar
      Então não ganho pontos (limite diário atingido)
      
- [ ] Dado que evento foi cancelado
      Quando data/hora do evento chega
      Então ninguém recebe pontos (evento não ocorreu)

##### Prioridade
**Alta** - Incentiva engajamento presencial

##### Complexidade
**Média** - Job agendado com verificações de status

##### Dependências
RF084 (Confirmar presença), RF081 (Cancelamento), RF103-RF104 (Dashboard)

##### Notas/Observações
- Job scheduler: rodando a cada 15 minutos
- Query: SELECT * FROM confirmations WHERE event_id IN (SELECT * FROM events WHERE NOW() > event_date + 1h) AND points_awarded=false
- Validação: confirmação ativa, evento não cancelado, limite diário não atingido
- Coluna `points_awarded` na tabela confirmations (idempotência)
- Presença presumida (sem check-in para MVP)
- Considerar check-in físico/QR code (Fase 2)
- Rate limiting: 100 pontos/dia em eventos
- Logs de eventos onde pontos foram atribuídos
- Analytics: evento com mais presença (pontos distribuídos)



#### RF102 - Atribuir +50 pontos ao completar perfil 100%

##### User Story
Como **aluno que completou seu perfil**
Quero **receber bônus ao ter perfil completo**
Para **ser reconhecido por investir em meu perfil e comunidade**

##### Descrição
Sistema que atribui 50 pontos bônus única vez ao usuário quando seu perfil atinge 100% de completude.

##### Regras de Negócio
- RN001: +50 pontos quando perfil atinge 100% de completude
- RN002: Pontos atribuídos apenas uma vez (bônus de completude)
- RN003: Completude = foto + bio + tags (mínimo 3) + redes sociais (mínimo 1)
- RN004: Se usuário reduz completude abaixo de 100%, bônus não é removido (one-time)
- RN005: Verificação: ao salvar perfil, se passou de <100% para 100%
- RN006: Registro em tabela `user_points` com motivo 'profile_completed'
- RN007: Notificação ao usuário quando atinge 100%

##### Critérios de Aceitação
- [ ] Dado que meu perfil está em 80% completo
      Quando adiciono última tag necessária
      Então atinge 100% e recebo +50 pontos
      
- [ ] Dado que verifico histórico de pontos
      Então vejo "+ 50 pontos - Perfil completo" registrado uma única vez
      
- [ ] Dado que completo perfil após dias
      Quando adiciono foto (última coisa que faltava)
      Então recebo notificação "Parabéns! Perfil completo! 🎉"
      
- [ ] Dado que recebi bônus de perfil completo
      Quando removo foto (abaixo de 100%)
      Então pontos NÃO são removidos (bônus já ganho)
      
- [ ] Dado que tento manipular sistema (hack)
      Quando backend valida
      Então pontos só são atribuídos uma vez (constraint)

##### Prioridade
**Alta** - Incentiva onboarding completo

##### Complexidade
**Média** - Cálculo de completude e validação única

##### Dependências
RF010-RF021 (Componentes de perfil), RF103-RF104 (Dashboard)

##### Notas/Observações
- Função: calculate_profile_completion() retorna 0-100%
- Componentes: foto (20%), bio (20%), tags>=3 (20%), redes sociais>=1 (20%), email verificado (20%)
- Trigger: ON UPDATE users THEN IF new_completion=100% AND old_completion<100% AND !profile_completion_bonus THEN award
- Coluna: `profile_completion_bonus_awarded` boolean (default false)
- Constraint: idempotência com coluna booleana
- Notificação: toast + email
- Badge na página de perfil: "✓ Perfil Completo"
- Considerar "Super Profile" com foto + bio + tags + redes + eventos + mentorias (Fase 2)
- Analytics: % de usuários com perfil completo



#### RF103 - Dashboard pessoal de pontos acumulados

##### User Story
Como **aluno cadastrado**
Quero **visualizar meus pontos acumulados e nível atual**
Para **acompanhar meu progresso e reconhecimento na comunidade**

##### Descrição
Página/seção do perfil que exibe pontuação total do usuário, nível de engajamento, progresso para próximo nível, e breakdown de pontos por categoria.

##### Regras de Negócio
- RN001: Exibir pontos totais acumulados
- RN002: Exibir nível atual baseado em faixas: Novato (0-100), Colaborador (101-500), Conector (501-1000), Embaixador (1001+)
- RN003: Mostrar progresso para próximo nível em barra visual
- RN004: Breakdown: pontos por categoria (threads, comentários, upvotes, eventos, etc)
- RN005: Top contributors visível (opcional - sem ranking competitivo direto)
- RN006: Histórico: últimos 10 movimentos de pontos
- RN007: Tempo real: pontos atualizam ao fazer ação

##### Critérios de Aceitação
- [ ] Dado que acesso meu dashboard de pontos
      Quando página carrega
      Então vejo "Você tem 450 pontos - Colaborador"
      
- [ ] Dado que tenho 450 pontos (entre 101-500)
      Quando visualizo nível
      Então vejo "Nível: Colaborador (50 de 500 para próximo nível)"
      
- [ ] Dado que visualizo breakdown de pontos
      Então vejo: "Threads: +80, Comentários: +95, Upvotes: +120, Eventos: +60, Perfil: +50"
      
- [ ] Dado que acabei de criar thread
      Quando recarrego dashboard
      Então pontos aumentam de 450 para 460 (+10)
      
- [ ] Dado que visualizo "Últimos movimentos"
      Quando vejo histórico
      Então aparecem 10 ações mais recentes com +X pontos cada

##### Prioridade
**Alta** - Componente core de gamificação

##### Complexidade
**Média** - Agregação de dados múltiplos

##### Dependências
RF103 (Sistema de pontos), RF103-RF104 (Histórico)

##### Notas/Observações
- URL: /perfil/pontos ou /dashboard/pontos
- Query: SELECT SUM(points) FROM user_points WHERE user_id=?
- Cálculo de nível: CASE WHEN points < 101 THEN 'Novato' WHEN points < 501...
- Barra de progresso: (pontos_atuais - faixa_anterior) / (faixa_próxima - faixa_anterior)
- Breakdown: SELECT reason, SUM(points) FROM user_points GROUP BY reason
- Top contributors: SELECT user_id, SUM(points) FROM user_points GROUP BY user_id ORDER BY points DESC LIMIT 10 (opcional, sem ranking público)
- Cards informativos com ícones por tipo
- Atualização em tempo real via WebSocket (opcional)
- Considerar badges baseadas em pontos (Fase 2)
- Analytics: distribuição de pontos na comunidade



#### RF104 - Histórico de pontuação

##### User Story
Como **aluno**
Quero **visualizar histórico completo de pontos ganhos**
Para **acompanhar minhas contribuições ao longo do tempo**

##### Descrição
Página que exibe histórico detalhado de todas as movimentações de pontos do usuário, com filtros por tipo e período.

##### Regras de Negócio
- RN001: Exibir todas as movimentações (gain/loss) de pontos
- RN002: Informações: data, motivo, pontos, referência (link para thread/evento/etc)
- RN003: Ordenação padrão: mais recente primeiro
- RN004: Paginação: 50 movimentações por página
- RN005: Filtro por tipo: threads, comentários, upvotes, eventos, perfil, outros
- RN006: Filtro por período: última semana, mês, trimestre, custom
- RN007: Contador total no topo: "Total: 450 pontos em 45 contribuições"

##### Critérios de Aceitação
- [ ] Dado que acesso "Histórico de Pontos"
      Quando página carrega
      Então vejo lista com últimas 50 movimentações
      
- [ ] Dado que verifico histórico
      Quando vejo movimentações
      Então vejo: data, +/-X pontos, motivo, link para referência
      
- [ ] Dado que filtro por "Threads"
      Quando aplico
      Então vejo apenas movimentações de threads criadas
      
- [ ] Dado que filtro por "Última semana"
      Quando aplico
      Então vejo apenas movimentações dos últimos 7 dias
      
- [ ] Dado que clico em movimentação de thread
      Quando clico em link
      Então sou redirecionado para aquela thread

##### Prioridade
**Média** - Histórico importante mas não crítico

##### Complexidade
**Baixa** - Listagem simples com filtros

##### Dependências
RF097-RF102 (Todos sistemas de pontos), RF103 (Dashboard)

##### Notas/Observações
- Tabela `user_points`: user_id, points (can be negative), reason, reference_id, created_at
- Query: SELECT * FROM user_points WHERE user_id=? ORDER BY created_at DESC
- Paginação: LIMIT 50 OFFSET
- Filtro: WHERE reason IN (?)
- Período: WHERE created_at BETWEEN ? AND ?
- Cards com motivo legível: "Thread: [Título]", "Comentário: [Preview]", "Upvote recebido", etc
- Ícones por tipo de movimentação (+ verde, - vermelho)
- Sidebar com filtros
- Link para referência (thread, evento, comentário)
- Considerar export (CSV) do histórico (Fase 2)
- Agregação visual: "Você ganhou 150 pontos esta semana!"
- Analytics: padrão de pontuação do usuário (ativo em qual horário)



#### RF105 - Criação de badges personalizadas pelo admin (nome, descrição, ícone, critério)

##### User Story
Como **administrador ISMART**
Quero **criar badges personalizadas com critérios customizados**
Para **incentivar comportamentos específicos e reconhecer contribuições variadas**

##### Descrição
Interface no painel administrativo que permite criar novas badges com nome, descrição, upload de ícone e definição de critérios de conquista (manual ou automático).

##### Regras de Negócio
- RN001: Nome obrigatório: 5-50 caracteres
- RN002: Descrição obrigatória: 10-200 caracteres
- RN003: Ícone obrigatório: upload PNG/SVG (max 2MB, 256x256px)
- RN004: Critério: manual (admin atribui) ou automático (regra baseada em dados)
- RN005: Critério automático: expressão em JSON (ex: {"type": "threads_created", "value": 10})
- RN006: Cor personalizável (picker de cores)
- RN007: Raridade opcional: comum/raro/épico/lendário (UI)
- RN008: Data de ativação: pode ser futura
- RN009: Admin pode desativar badge sem remover de usuários

##### Critérios de Aceitação
- [ ] Dado que acesso painel de admin "Badges"
      Quando clico em "Criar Badge"
      Então vejo formulário com campos: nome, descrição, ícone, critério
      
- [ ] Dado que preencho nome "Debatedor Ativo" e descrição
      Quando faço upload de ícone PNG
      Então vejo preview do ícone antes de salvar
      
- [ ] Dado que seleciono critério "Automático"
      Quando vejo opções
      Então posso escolher: "X comentários", "X threads", "X upvotes", "Custom"
      
- [ ] Dado que criei badge com critério "Custom"
      Quando salvo
      Então posso definir expressão JSON: {"type": "custom_metric", "value": 50}
      
- [ ] Dado que seleciono raridade "Épico"
      Quando visualizo badge no perfil do usuário
      Então tem destaque visual especial (cor dourada, tamanho maior)

##### Prioridade
**Alta** - Gamificação customizável

##### Complexidade
**Alta** - Editor de critérios e validação de expressões

##### Dependências
RF111-RF114 (Sistema de badges)

##### Notas/Observações
- Tabela `badges`: id, name, description, icon_url, criteria_type, criteria_json, color, rarity, active, created_at
- Criteria types: 'manual', 'auto_threads', 'auto_comments', 'auto_upvotes', 'auto_events', 'auto_mentorship', 'custom'
- Editor JSON visual (não código bruto) com validação
- Upload de ícone: salvar em S3/storage com dimensões 256x256
- Color picker: hex ou interface visual
- Preview ao vivo do badge com cor e ícone
- Rarity levels: 'common' (cinza), 'rare' (azul), 'epic' (roxo), 'legendary' (dourado)
- Validação: nome único (não pode repetir)
- Logs completos de criação e modificação
- Considerar "Badge por período" (mensal, semanal) - Fase 2
- Versionamento de badges (histórico de alterações)



#### RF106 - Badge automática: Primeira Conexão

##### User Story
Como **aluno que fez sua primeira amizade**
Quero **receber badge ao conectar com primeiro colega**
Para **marcar esse momento importante e ser reconhecido**

##### Descrição
Badge automática concedida quando usuário aceita ou envia primeira solicitação de amizade confirmada, reconhecendo início de networking.

##### Regras de Negócio
- RN001: Concedida quando: primeira amizade confirmada (status='accepted')
- RN002: Concessão: ao aceitar ou ser aceito (bidirecional conta como uma)
- RN003: Apenas uma vez por usuário (não repetível)
- RN004: Atribuição automática via trigger ao registrar primeira amizade
- RN005: Notificação ao usuário ao conquistar
- RN006: Aparece no perfil com data de conquista
- RN007: Não pode ser removida (permanente)

##### Critérios de Aceitação
- [ ] Dado que sou novo usuário
      Quando aceito primeiro pedido de amizade
      Então recebo notificação "Parabéns! Você conquistou a badge 'Primeira Conexão'! 🎉"
      
- [ ] Dado que badge foi concedida
      Quando visualizo meu perfil
      Então vejo badge "Primeira Conexão" com ícone de mão/amizade
      
- [ ] Dado que recebi primeira amizade
      Quando verifico histórico de badges
      Então vejo data exata: "Conquistada em DD/MM/YYYY"
      
- [ ] Dado que já tenho badge "Primeira Conexão"
      Quando aceito segunda amizade
      Então não ganho badge novamente (única)
      
- [ ] Dado que sou novo usuário
      Quando envio solicitação para alguém
      Então não ganho badge (só ao confirmar)

##### Prioridade
**Alta** - Reconhecimento de milestone importante

##### Complexidade
**Média** - Trigger baseado em primeira amizade

##### Dependências
RF059 (Aceitar amizade), RF111-RF113 (Sistema de badges)

##### Notas/Observações
- Trigger: ON UPDATE friendships SET status='accepted' WHERE (first_friendship.accepted_count = 1)
- Validação: SELECT COUNT(*) FROM friendships WHERE (user_id=? OR friend_id=?) AND status='accepted' = 1
- Atributo: badge_first_connection_awarded boolean na tabela users (idempotência)
- Notificação: toast + in-app + email
- Ícone: 🤝 ou 👥
- Descrição da badge: "Você fez sua primeira conexão!"
- Data permanente: first_connection_date em users
- Considerar variações: "Networking Beginner" vs "Social Butterfly" (múltiplas amizades) - Fase 2
- Analytics: % de usuários com esta badge



#### RF107 - Badge automática: Solucionador (5 threads úteis)

##### User Story
Como **aluno que ajudou a comunidade**
Quero **receber badge ao ter 5 threads marcadas como úteis**
Para **ser reconhecido como solucionador de problemas**

##### Descrição
Badge automática concedida quando autor de thread atinge 5 threads marcadas como "Resolvida/Útil", reconhecendo contribuição valiosa.

##### Regras de Negócio
- RN001: Concedida quando: 5 threads do usuário marcadas como resolvidas
- RN002: Contagem: threads onde status='resolved' AND resolved_by=user_id (ou criador)
- RN003: Atualizada automaticamente a cada thread marcada como resolvida
- RN004: Pode ser conquistada múltiplas vezes (variações: Solucionador Júnior 5, Sênior 10, Experiente 20)
- RN005: Notificação ao atingir 5ª thread resolvida
- RN006: Aparece no perfil com contador agregado
- RN007: Ícone e cor específicos para badge

##### Critérios de Aceitação
- [ ] Dado que tenho 4 threads resolvidas
      Quando marco 5ª thread como resolvida
      Então recebo notificação "Parabéns! Você é um Solucionador! 💡"
      
- [ ] Dado que conquistei badge "Solucionador"
      Quando visualizo perfil
      Então vejo badge com ícone de lâmpada/check
      
- [ ] Dado que tenho 10 threads resolvidas
      Quando visualizo badge
      Então vejo "Solucionador (10 threads)" com contador
      
- [ ] Dado que tenho 9 threads resolvidas
      Quando marco 10ª como resolvida
      Então recebo notificação "Avançado: 10 threads resolvidas!"
      
- [ ] Dado que removo marcação de thread como resolvida
      Quando removo
      Então contador decresce (ex: 10 → 9) mas badge não é removida

##### Prioridade
**Alta** - Reconhecimento de soluções

##### Complexidade
**Média** - Contagem com trigger de atualização

##### Dependências
RF035 (Marcar como resolvida), RF111-RF113 (Sistema de badges)

##### Notas/Observações
- Trigger: ON UPDATE threads SET resolved=true THEN COUNT resolved threads, IF count=5,10,20,50 THEN award badge
- Query: SELECT COUNT(*) FROM threads WHERE user_id=? AND resolved=true
- Variações de badge: 'solver_bronze' (5), 'solver_silver' (10), 'solver_gold' (20), 'solver_legend' (50)
- Notificação milestones: 5, 10, 20, 50
- Ícone: 💡 (lâmpada)
- Descrição: "Você resolveu X problemas!"
- Contador visível: "Solucionador (X threads)"
- Considerar "Especialista em categoria" (5 threads sobre Python) - Fase 2
- Badge progressiva (bronze→silver→gold)
- Analytics: distribuição de solucionadores



#### RF108 - Badge automática: Mentor Ativo

##### User Story
Como **aluno que está mentorando**
Quero **receber badge ao ter mentorias ativas**
Para **ser reconhecido como mentor experiente**

##### Descrição
Badge automática concedida quando usuário tem 1+ mentorias ativas ou ao completar primeira mentoria com sucesso.

##### Regras de Negócio
- RN001: Variações: "Mentor Iniciante" (1 mentorado ativo), "Mentor Ativo" (2+), "Mentor Experiente" (10+ completadas)
- RN002: Concedida imediatamente ao receber primeiro mentorado
- RN003: Atualizada conforme número de mentorados varia
- RN004: Permanente (não removida se mentorados diminuem)
- RN005: Aparecem múltiplas badges se aplicável
- RN006: Notificação ao virar mentor
- RN007: Link para "Meus Mentorados" no perfil

##### Critérios de Aceitação
- [ ] Dado que recebo primeiro mentorado
      Quando matching é confirmado
      Então recebo badge "Mentor Iniciante" 🎓
      
- [ ] Dado que tenho 1 mentorado ativo
      Quando visualizo perfil
      Então vejo badge com ícone de professor/mentor
      
- [ ] Dado que já tenho 1 mentorado e recebo 2º
      Quando 2º matching é confirmado
      Então badge é atualizada para "Mentor Ativo"
      
- [ ] Dado que completei 10 mentorias
      Quando verifico perfil
      Então vejo badge "Mentor Experiente" com contador (10)
      
- [ ] Dado que sou mentor
      Quando visualizo badge no perfil
      Então clicando vejo lista de meus mentorados

##### Prioridade
**Alta** - Reconhecimento de contribuição

##### Complexidade
**Média** - Múltiplas variações com contadores

##### Dependências
RF068-RF078 (Sistema de mentoria), RF111-RF113 (Badges)

##### Notas/Observações
- Trigger: ON INSERT mentorships THEN IF mentor_id THEN award mentor badges
- Variações: 'mentor_novice' (1+ ativo), 'mentor_active' (2+), 'mentor_expert' (10+ completed)
- Query: COUNT(*) FROM mentorships WHERE mentor_id=? AND status IN ('active', 'in_progress')
- Contagem de completas: COUNT(*) WHERE status='completed'
- Ícone: 🎓 (cap) ou 👨‍🏫 (professor)
- Descrição: "Você está mentorando X alunos"
- Notificação: "Parabéns! Você é um Mentor! 🎓"
- Badge aparece em "Explorar" (filtro de mentores)
- Link no perfil: "Ver meus mentorados"
- Considerar "Mentor Top" (avaliações altas) - Fase 2
- Analytics: número de mentores ativos



#### RF109 - Badge automática: Embaixador (3+ universidades)

##### User Story
Como **aluno conectado com múltiplas universidades**
Quero **receber badge ao ter amigos de 3+ universidades**
Para **ser reconhecido como ponte entre comunidades**

##### Descrição
Badge automática concedida quando usuário possui amigos de 3 ou mais universidades diferentes, reconhecendo networking inter-institucional.

##### Regras de Negócio
- RN001: Concedida quando: amigos de 3+ universidades diferentes
- RN002: Contagem: SELECT DISTINCT university FROM users JOIN friendships WHERE friend_id=? AND status='accepted'
- RN003: Atualizada automaticamente a cada nova amizade
- RN004: Permanente (não removida se amigo é removido)
- RN005: Variações: "Embaixador Regional" (3), "Embaixador Nacional" (5+)
- RN006: Notificação ao atingir 3ª universidade diferente
- RN007: Tooltip mostra universidades conectadas

##### Critérios de Aceitação
- [ ] Dado que tenho amigos de 2 universidades (USP, UNICAMP)
      Quando faço amizade com alguém da FGV
      Então recebo badge "Embaixador Regional" 🌍
      
- [ ] Dado que tenho badge "Embaixador Regional"
      Quando visualizo perfil
      Então vejo ícone de globo/ponte
      
- [ ] Dado que passo mouse sobre badge
      Quando hover
      Então vejo tooltip "Conectado com 3 universidades: USP, UNICAMP, FGV"
      
- [ ] Dado que tenho amigos de 5+ universidades
      Quando verifico badge
      Então vejo "Embaixador Nacional" com destaque especial
      
- [ ] Dado que removo amizade com alguém da FGV
      Quando amigo é removido
      Então badge permanece (não é removida)

##### Prioridade
**Alta** - Reconhecimento de networking inter-institucional

##### Complexidade
**Média** - Contagem de universidades distintas

##### Dependências
RF059 (Amizades), RF111-RF113 (Badges)

##### Notas/Observações
- Trigger: ON UPDATE friendships SET status='accepted' THEN COUNT DISTINCT universities
- Query: SELECT COUNT(DISTINCT users.university) FROM users JOIN friendships WHERE (user_id=? OR friend_id=?) AND status='accepted'
- Variações: 'ambassador_regional' (3), 'ambassador_national' (5+), 'ambassador_international' (10+)
- Atributo: ambassador_awarded boolean na tabela users
- Ícone: 🌍 (globo) ou 🌉 (ponte)
- Descrição: "Você é uma ponte entre X universidades!"
- Tooltip ao hover: lista universidades conectadas
- Notificação: "Você é um Embaixador! Conectando comunidades 🌍"
- Link: mostrar "Amigos por universidade" (dashboard)
- Considerar "Conexões internacionais" (Fase 2)
- Analytics: distribuição de embaixadores



#### RF110 - Badge automática: Networker (20+ amigos)

##### User Story
Como **aluno com ampla rede de conexões**
Quero **receber badge ao atingir 20+ amigos**
Para **ser reconhecido como excelente networker**

##### Descrição
Badge automática concedida quando usuário atinge 20 amigos confirmados, com variações para 50 e 100 amigos.

##### Regras de Negócio
- RN001: Variações: "Networker" (20), "Super Networker" (50), "Network Influencer" (100+)
- RN002: Contagem: SELECT COUNT(*) FROM friendships WHERE status='accepted' AND (user_id=? OR friend_id=?)
- RN003: Atualizada a cada nova amizade confirmada
- RN004: Permanente (não removida se amigos são removidos)
- RN005: Notificação em milestones: 20, 50, 100
- RN006: Contador agregado no perfil: "Networker (X amigos)"
- RN007: Ícone e cores progressivas

##### Critérios de Aceitação
- [ ] Dado que tenho 19 amigos confirmados
      Quando faço amizade com 20º
      Então recebo badge "Networker" 🤝
      
- [ ] Dado que conquistei badge "Networker"
      Quando visualizo perfil
      Então vejo badge com contador "20+"
      
- [ ] Dado que tenho 50 amigos
      Quando verifico badges
      Então vejo "Super Networker (50+)"
      
- [ ] Dado que tenho 100 amigos
      Quando visualizo
      Então vejo "Network Influencer (100+)" com destaque especial
      
- [ ] Dado que removo amizade com alguém
      Quando amizo é removido (ex: 50 → 49)
      Então badges não são removidas (permanentes)

##### Prioridade
**Alta** - Reconhecimento de rede

##### Complexidade
**Baixa** - Contagem simples com milestones

##### Dependências
RF059 (Amizades), RF061 (Lista de amigos), RF111-RF113 (Badges)

##### Notas/Observações
- Trigger: ON UPDATE friendships SET status='accepted' THEN COUNT total friends
- Query: SELECT COUNT(*) FROM friendships WHERE (user_id=? OR friend_id=?) AND status='accepted'
- Variações: 'networker' (20), 'super_networker' (50), 'network_influencer' (100)
- Milestones: 20, 50, 100
- Ícone: 🤝 (aperto de mão)
- Descrição: "Você tem X amigos! Excelente networker!"
- Notificação: "🎉 Você é um Networker! Parabéns por sua rede!"
- Contador visível: "Networkter (X amigos)"
- Cores progressivas: Bronze (20), Silver (50), Gold (100)
- Link: "Ver minha rede"
- Considerar "Influenciador" (Fase 2)
- Analytics: distribuição de networkters



#### RF111 - Visualização de badges no perfil

##### User Story
Como **aluno**
Quero **ver as badges conquistadas no meu perfil**
Para **exibir reconhecimentos e conquistas para outros usuários**

##### Descrição
Seção no perfil que exibe todas as badges conquistadas com ícones, nomes, datas de conquista e descrições ao hover.

##### Regras de Negócio
- RN001: Exibir apenas badges conquistadas (não bloqueadas/futuras)
- RN002: Ordenação: mais recente primeiro
- RN003: Informações por badge: ícone, nome, data de conquista
- RN004: Tooltip ao hover: descrição completa + data
- RN005: Clique em badge abre modal com detalhes
- RN006: Perfis públicos também mostram badges (não privado)
- RN007: Badges raras/épicas com destaque visual especial

##### Critérios de Aceitação
- [ ] Dado que tenho 5 badges conquistadas
      Quando visualizo meu perfil
      Então vejo seção "Badges" com 5 ícones
      
- [ ] Dado que passo mouse sobre badge
      Quando hover ativa
      Então vejo tooltip: "Nome da Badge - Conquistada em DD/MM/YYYY"
      
- [ ] Dado que clico em badge
      Quando clico
      Então abre modal com descrição completa e critério
      
- [ ] Dado que badge é "Rara"
      Quando visualizo
      Então tem destaque visual: borda brilhante, cor especial
      
- [ ] Dado que visualizo perfil de outro usuário
      Quando vejo seção de badges
      Então badges dele aparecem igual ao meu (público)

##### Prioridade
**Alta** - Exibição principal de conquistas

##### Complexidade
**Baixa** - Renderização de badges

##### Dependências
RF105-RF114 (Todos sistemas de badges)

##### Notas/Observações
- Tabela `user_badges`: user_id, badge_id, awarded_at, source (trigger que a concedeu)
- Query: SELECT badges.*, user_badges.awarded_at FROM badges JOIN user_badges ORDER BY awarded_at DESC
- Layout: grid 4-5 colunas (desktop), 3 colunas (tablet), 2 colunas (mobile)
- Ícone: imagem 128x128 do badge
- Tooltip com Popper/Tippy
- Modal com descrição, data, raridade, estatísticas (% de usuários com ela)
- Seção vazia: "Comece a ganhar badges! Crie threads, comentários, eventos..."
- Badges raras (épicas/lendárias): bordas brilhantes, animação sutil
- Considerar "showcase" de até 5 badges preferidas (Fase 2)



#### RF112 - Notificação ao conquistar badge

##### User Story
Como **aluno que conquistou badge**
Quero **receber notificação celebratória**
Para **saber que alcancei conquista e ser reconhecido**

##### Descrição
Notificação in-app com celebração quando usuário conquista nova badge, com opção de compartilhar em redes sociais.

##### Regras de Negócio
- RN001: Notificação imediata quando badge é atribuída
- RN002: Tipo: in-app toast com animação celebratória
- RN003: Conteúdo: "🎉 Parabéns! Você conquistou: [Nome da Badge]"
- RN004: Incluir descrição curta da badge
- RN005: Botão "Compartilhar" (social media - Fase 2)
- RN006: Botão "Ver perfil" (fechar notif e ir para perfil)
- RN007: Notificação persiste por 5 segundos (auto-close)
- RN008: Som opcional (ding/success sound)

##### Critérios de Aceitação
- [ ] Dado que conquistei badge "Primeira Conexão"
      Quando badge é atribuída
      Então recebo toast: "🎉 Parabéns! Você conquistou: Primeira Conexão 🤝"
      
- [ ] Dado que vejo notificação
      Quando visualizo
      Então desaparece automaticamente em 5 segundos
      
- [ ] Dado que vejo notificação
      Quando clico em "Ver perfil"
      Então sou redirecionado para meu perfil (seção badges)
      
- [ ] Dado que vejo notificação
      Quando clico em "Compartilhar" (Fase 2)
      Então abre opções: Twitter, Facebook, LinkedIn
      
- [ ] Dado que som está ativado nas preferências
      Quando conquisto badge
      Então escuto "ding" celebratório

##### Prioridade
**Alta** - Reconhecimento e celebração

##### Complexidade
**Baixa** - Toast notification simples

##### Dependências
RF113 (Atribuição automática), RF169-RF182 (Notificações)

##### Notas/Observações
- Toast component: React Toast, Chakra Alert, ou similar
- Animação: fade-in + bounce + confetti (opcional)
- Duração: 5000ms auto-close
- Ícone: 🎉 + ícone da badge
- Cores: vibrante (verde/azul) com fundo subtil
- Som: success.mp3 (curto, <1s)
- Botões: "Ver Perfil", "Compartilhar" (opcional)
- Trigger: quando user_badges.awarded_at é registrado
- Pode ser agrupada se múltiplas badges (e.g., levantamento de nível)
- Logs: notificação enviada com timestamp
- Considerar email notification também (Fase 2)
- Analytics: % de usuários que veem notificações



#### RF113 - Atribuição automática de badges quando critérios são atingidos

##### User Story
Como **sistema ISMART Conecta**
Quero **atribuir badges automaticamente quando usuários atingem critérios**
Para **reconhecer conquistas sem intervenção manual**

##### Descrição
Sistema que verifica automaticamente critérios de badges e atribui quando atingidos, sem necessidade de ação do admin, com triggers e jobs agendados.

##### Regras de Negócio
- RN001: Verificação automática: ao realizar ação (criar thread, aceitar amizade, etc)
- RN002: Verificação periódica: job agendado para critérios complexos (a cada 1h)
- RN003: Atribuição: inserir em user_badges com awarded_at=NOW()
- RN004: Idempotência: validar se badge já foi conquistada
- RN005: Notificação automática gerada ao atribuir
- RN006: Logs completos de atribuição com motivo
- RN007: Admin pode visualizar histórico de atribuições

##### Critérios de Aceitação
- [ ] Dado que crio thread
      Quando thread é publicada
      Então sistema valida automaticamente badges aplicáveis
      
- [ ] Dado que atendo critério de badge (ex: 5º thread resolvida)
      Quando critério é atingido
      Então badge é atribuída automaticamente sem delay
      
- [ ] Dado que atingi múltiplas badges simultaneamente
      Quando critérios são atingidos
      Então todas são atribuídas (não só primeira)
      
- [ ] Dado que já tenho badge conquistada
      Quando trigger rodeia novamente
      Então badge não é duplicada (validação de unicidade)
      
- [ ] Dado que sou admin
      Quando acesso logs de badges
      Então vejo histórico: usuário, badge, data, critério que acionou

##### Prioridade
**Alta** - Automação de gamificação

##### Complexidade
**Alta** - Múltiplos triggers e jobs complexos

##### Dependências
RF105-RF110 (Todas as badges), RF112 (Notificações)

##### Notas/Observações
- Triggers: ON INSERT threads, ON UPDATE friendships, ON UPDATE comments, etc
- Jobs agendados: verificação a cada 1h para critérios complexos (contagens)
- Tabela `badge_criteria`: badge_id, type, condition_json
- Tipos: 'trigger_based' (imediato), 'periodic' (job), 'manual' (admin)
- Query de verificação: SELECT user_id, COUNT(*) as count FROM [tabela] WHERE [condição]
- Validação: SELECT COUNT(*) FROM user_badges WHERE user_id=? AND badge_id=? (evitar duplicata)
- Notificação disparada automaticamente (RF112)
- Logs: INSERT user_badge_logs(user_id, badge_id, awarded_at, trigger_reason)
- Exponential backoff para retry em falhas
- Considerar "conditional badges" (múltiplos critérios com AND/OR) - Fase 2
- Analytics: badges mais conquistadas, distribuição



#### RF114 - Atribuição manual de badge pelo admin

##### User Story
Como **administrador ISMART**
Quero **atribuir badges manualmente para usuários**
Para **reconhecer contribuições especiais que não se encaixam em critérios automáticos**

##### Descrição
Interface no painel admin que permite buscar usuário e atribuir manualmente qualquer badge, com motivo e confirmação.

##### Regras de Negócio
- RN001: Admin pode buscar usuário por nome, email ou ID
- RN002: Seleção de badge a atribuir (dropdown com todas as badges)
- RN003: Campo opcional: motivo da atribuição (texto até 200 caracteres)
- RN004: Confirmação antes de atribuir
- RN005: Validação: não permitir duplicação (usuário já tem badge)
- RN006: Notificação automática enviada ao usuário
- RN007: Logs: admin, badge, usuário, data, motivo
- RN008: Admin pode remover badge manualmente (com confirmação)

##### Critérios de Aceitação
- [ ] Dado que acesso painel admin "Badges Manuais"
      Quando clico em "Atribuir Badge"
      Então vejo formulário com campos: usuário, badge, motivo
      
- [ ] Dado que digito "João Silva" no campo usuário
      Quando digito
      Então vejo autocomplete com usuários que correspondem
      
- [ ] Dado que seleciono usuário e badge "Mentor Experiente"
      Quando preencho motivo "Ajudou 15 alunos"
      Então botão "Atribuir" fica habilitado
      
- [ ] Dado que clico em "Atribuir"
      Quando confirmo
      Então João recebe notificação: "Admin atribuiu badge: Mentor Experiente"
      
- [ ] Dado que tento atribuir badge que usuário já tem
      Quando tenta
      Então vejo erro "Usuário já possui esta badge"

##### Prioridade
**Média** - Flexibilidade para casos especiais

##### Complexidade
**Média** - Formulário com autocomplete e validações

##### Dependências
RF105-RF113 (Sistema de badges)

##### Notas/Observações
- Acesso: apenas admin/moderador (role-based)
- Busca de usuário: autocomplete com query LIKE
- Dropdown de badges: todas as badges ativas
- Campo motivo: texto até 200 chars (opcional)
- Validação: CHECK user_id AND badge_id combo (não duplicar)
- Confirmação modal antes de inserir
- Notificação automática: RF112 disparada
- Logs em tabela `badge_manual_assignments`: admin_id, user_id, badge_id, reason, assigned_at
- Remoção manual: botão "Remover Badge" em cada user_badge (soft delete com flag removed=true)
- Audit trail completo: quem atribuiu, quando, por quê
- Bulk assignment (Fase 2): atribuir mesma badge para múltiplos usuários via CSV
- Report: admin pode ver badges atribuídas manualmente por período
- Considerar "verificação de contexto": sugerir motivo baseado em atividade do usuário



#### RF115 - Nível Novato (0-100 pontos)

##### User Story
Como **aluno novo na plataforma**
Quero **ter um nível "Novato" enquanto estou começando**
Para **ser reconhecido como novo membro e ter expectativas apropriadas**

##### Descrição
Primeiro nível de engajamento atribuído automaticamente a usuários com pontuação entre 0-100 pontos, marcando seu início na comunidade.

##### Regras de Negócio
- RN001: Faixa de pontos: 0-100
- RN002: Atribuído automaticamente ao criar conta
- RN003: Status: "Novato" com ícone 🌱 (semente/iniciante)
- RN004: Cor: verde claro (símbolo de começo)
- RN005: Descrição: "Você está começando sua jornada!"
- RN006: Badges sugeridas: "Primeira Conexão", "Primeira Thread", "Completar Perfil"
- RN007: Transição: automática ao atingir 101 pontos (sem ação manual)
- RN008: Privilégios: sem restrições (todos podem usar plataforma normalmente)

##### Critérios de Aceitação
- [ ] Dado que sou novo usuário
      Quando crio conta
      Então meu nível é definido como "Novato"
      
- [ ] Dado que tenho 50 pontos
      Quando visualizo meu perfil
      Então vejo "Nível: Novato 🌱" com ícone verde
      
- [ ] Dado que tenho 100 pontos
      Quando visualizo
      Então ainda vejo "Novato" (faixa 0-100)
      
- [ ] Dado que atinjo 101 pontos
      Quando sistema recalcula
      Então nível muda automaticamente para "Colaborador"
      
- [ ] Dado que visualizo página do nível
      Quando clico em "Novato"
      Então vejo descrição: "Você está começando sua jornada!"

##### Prioridade
**Alta** - Nível fundamental

##### Complexidade
**Baixa** - Simples faixa de pontos

##### Dependências
RF103 (Pontos), RF119-RF120 (Visualização de níveis)

##### Notas/Observações
- Tabela `user_levels`: user_id, level_name, level_tier (1-4), awarded_at, current_points
- Nível_tier: 1=Novato, 2=Colaborador, 3=Conector, 4=Embaixador
- Cálculo: CASE WHEN points < 101 THEN 'Novato'...
- Ícone: 🌱 (semente) ou 👶 (bebê)
- Cor: #4CAF50 (verde claro)
- Transição automática: trigger ao UPDATE user_points SET points=101
- Notificação de progresso: "Você tem X pontos até o próximo nível (Colaborador)"
- Badge sugerida: mostrar caminho de crescimento
- Sem privilégios especiais (acesso total)
- Considerar "tutorial onboarding" para Novacos (Fase 2)
- Analytics: % de usuários por nível



#### RF116 - Nível Colaborador (101-500 pontos)

##### User Story
Como **aluno que está contribuindo regularmente**
Quero **avançar para nível "Colaborador" quando atinjo 101 pontos**
Para **ser reconhecido como membro ativo que contribui com qualidade**

##### Descrição
Segundo nível de engajamento para usuários com 101-500 pontos, reconhecendo engajamento regular e contribuições consistentes.

##### Regras de Negócio
- RN001: Faixa de pontos: 101-500
- RN002: Transição automática ao atingir 101 pontos
- RN003: Status: "Colaborador" com ícone 🚀 (crescimento)
- RN004: Cor: azul (símbolo de progresso)
- RN005: Descrição: "Você é um membro ativo!"
- RN006: Privilégios (Fase 2): criar eventos, destacar threads
- RN007: Badges sugeridas: "Solucionador", "Networker"
- RN008: Transição: automática ao atingir 501 pontos

##### Critérios de Aceitação
- [ ] Dado que tenho 101 pontos
      Quando sistema recalcula
      Então nível muda para "Colaborador" 🚀
      
- [ ] Dado que sou Colaborador
      Quando visualizo perfil
      Então vejo "Nível: Colaborador" com cor azul
      
- [ ] Dado que tenho 250 pontos
      Quando visualizo
      Então ainda estou no nível "Colaborador"
      
- [ ] Dado que atinjo 500 pontos
      Quando visualizo
      Então ainda estou em "Colaborador" (faixa 101-500)
      
- [ ] Dado que alcço 501 pontos
      Quando sistema recalcula
      Então nível muda para "Conector"

##### Prioridade
**Alta** - Nível central de engajamento

##### Complexidade
**Baixa** - Faixa simples de pontos

##### Dependências
RF103 (Pontos), RF115 (Novato), RF119-RF120 (Visualização)

##### Notas/Observações
- Faixa: 101-500 pontos
- Ícone: 🚀 (foguete/crescimento)
- Cor: #2196F3 (azul)
- Descrição: "Você é um membro ativo!"
- Transição automática ao atingir 101 e 501 pontos
- Notificação: "Parabéns! Você alcançou o nível Colaborador! 🚀"
- Badges sugeridas: "Solucionador", "Mentor", "Networker"
- Barra de progresso: (pontos_atuais - 101) / (500 - 101) * 100%
- Faixa intermediária: maior quantidade de usuários neste nível
- Considerar "benefício de Colaborador": criar eventos, editar posts (Fase 2)
- Analytics: tempo médio de progressão até Colaborador



#### RF117 - Nível Conector (501-1000 pontos)

##### User Story
Como **aluno que se tornou líder de comunidade**
Quero **avançar para nível "Conector" ao atingir 501 pontos**
Para **ser reconhecido como pessoa que conecta e lidera**

##### Descrição
Terceiro nível de engajamento para usuários com 501-1000 pontos, reconhecendo liderança emergente, networking forte e mentoria.

##### Regras de Negócio
- RN001: Faixa de pontos: 501-1000
- RN002: Transição automática ao atingir 501 pontos
- RN003: Status: "Conector" com ícone 🔗 (conectado)
- RN004: Cor: roxo (símbolo de liderança/status)
- RN005: Descrição: "Você é um líder em nossa comunidade!"
- RN006: Privilégios (Fase 2): destaque em "Explorar", criar categoria de threads
- RN007: Badges esperadas: "Mentor Ativo", "Embaixador", "Networker"
- RN008: Transição: automática ao atingir 1001 pontos

##### Critérios de Aceitação
- [ ] Dado que tenho 501 pontos
      Quando sistema recalcula
      Então nível muda para "Conector" 🔗
      
- [ ] Dado que sou Conector
      Quando visualizo perfil
      Então vejo "Nível: Conector" com cor roxo
      
- [ ] Dado que tenho 750 pontos
      Quando visualizo
      Então barra mostra progresso em direção a "Embaixador"
      
- [ ] Dado que alcço 1000 pontos
      Quando visualizo
      Então ainda estou em "Conector" (limite superior)
      
- [ ] Dado que alcço 1001 pontos
      Quando sistema recalcula
      Então nível muda para "Embaixador"

##### Prioridade
**Alta** - Nível de liderança

##### Complexidade
**Baixa** - Faixa de pontos

##### Dependências
RF103 (Pontos), RF116 (Colaborador), RF119-RF120 (Visualização)

##### Notas/Observações
- Faixa: 501-1000 pontos
- Ícone: 🔗 (corrente/conexão) ou 👥 (rede)
- Cor: #9C27B0 (roxo)
- Descrição: "Você é um líder em nossa comunidade!"
- Transição automática ao atingir 501 e 1001 pontos
- Notificação: "Excelente! Você atingiu o nível Conector! 🔗"
- Badges esperadas: "Mentor Ativo", "Embaixador", "Networker"
- Barra de progresso: (pontos_atuais - 501) / (1000 - 501) * 100%
- Perfil destacado em "Explorar" (badge de Conector)
- Faixa raridade: menos usuários neste nível
- Considerar "crachá de especialista" por categoria (Fase 2)
- Analytics: distribuição de Conectores por universidade



#### RF118 - Nível Embaixador (1000+ pontos)

##### User Story
Como **aluno que alcançou excelência na comunidade**
Quero **atingir nível "Embaixador" ao passar de 1000 pontos**
Para **ser reconhecido como figura de proa e maior influência**

##### Descrição
Quarto e máximo nível de engajamento para usuários com 1000+ pontos, representando liderança máxima, influência e dedicação excepcional.

##### Regras de Negócio
- RN001: Faixa de pontos: 1000+ (sem limite superior)
- RN002: Transição automática ao atingir 1001 pontos
- RN003: Status: "Embaixador" com ícone 👑 (coroa)
- RN004: Cor: dourado (símbolo de prestígio máximo)
- RN005: Descrição: "Você é um Embaixador de nossa comunidade!"
- RN006: Privilégios (Fase 2): moderação, destacar threads, criar subcategorias
- RN007: Badges esperadas: "Embaixador Regional/Nacional", "Mentor Experiente", "Network Influencer"
- RN008: Permanente: nunca retrocede de nível (mesmo com perda de pontos)

##### Critérios de Aceitação
- [ ] Dado que tenho 1001 pontos
      Quando sistema recalcula
      Então nível muda para "Embaixador" 👑
      
- [ ] Dado que sou Embaixador
      Quando visualizo perfil
      Então vejo "Nível: Embaixador" com cor dourada
      
- [ ] Dado que tenho 5000 pontos
      Quando visualizo
      Então ainda sou "Embaixador" (sem limite superior)
      
- [ ] Dado que perco pontos (de 1500 → 950)
      Quando verifico nível
      Então ainda sou "Embaixador" (não retrocede)
      
- [ ] Dado que sou Embaixador
      Quando visualizo "Explorar"
      Então sou destacado com badge de Embaixador

##### Prioridade
**Alta** - Nível máximo de reconhecimento

##### Complexidade
**Baixa** - Faixa de pontos aberta

##### Dependências
RF103 (Pontos), RF117 (Conector), RF119-RF120 (Visualização)

##### Notas/Observações
- Faixa: 1000+ pontos (sem limite)
- Ícone: 👑 (coroa) ou ⭐ (estrela)
- Cor: #FFD700 (dourado)
- Descrição: "Você é um Embaixador de nossa comunidade!"
- Transição automática ao atingir 1001 pontos
- Notificação: "🎉 Parabéns! Você atingiu o nível máximo: Embaixador! 👑"
- Badges esperadas: "Embaixador Regional/Nacional", "Mentor Experiente"
- Permanência: nunca retrocede (mesmo com perda de pontos)
- Ranking de Embaixadores (opcional): mostrar top 10
- Perfil destaca com destaque em "Explorar" e "Sugestões"
- Raro: <1% de usuários deve atingir este nível
- Privilégios (Fase 2): moderador, destacar threads, criar categorias
- Considerar "Conselho de Embaixadores" para feedback (Fase 2)
- Analytics: número de Embaixadores, crescimento ao longo do tempo



#### RF119 - Visualização de nível atual no perfil

##### User Story
Como **aluno**
Quero **visualizar meu nível atual de forma clara no meu perfil**
Para **entender onde estou na hierarquia de engajamento**

##### Descrição
Exibição prominente do nível atual no perfil do usuário, mostrando nome do nível, ícone, descrição e progresso até próximo nível.

##### Regras de Negócio
- RN001: Posição: seção "Nível de Engajamento" no topo do perfil (após pontos totais)
- RN002: Exibir: ícone, nome do nível, descrição, barra de progresso
- RN003: Cores: específicas por nível (verde, azul, roxo, dourado)
- RN004: Tamanho de ícone: 48x48px (grande, bem visível)
- RN005: Próximo nível: mostrar qual é e quantos pontos faltam
- RN006: Nível Embaixador: mostrar "Máximo atingido" ao invés de próximo
- RN007: Perfis de outros usuários: também mostram nível (público)

##### Critérios de Aceitação
- [ ] Dado que visualizo meu perfil
      Quando página carrega
      Então vejo seção "Nível de Engajamento" no topo
      
- [ ] Dado que sou Colaborador
      Quando vejo nível
      Então apareça ícone 🚀, nome "Colaborador", descrição e cor azul
      
- [ ] Dado que tenho 250/500 pontos na faixa
      Quando visualizo perfil
      Então vejo "Faltam 250 pontos para Conector"
      
- [ ] Dado que sou Embaixador
      Quando visualizo nível
      Então vejo "Nível Máximo Atingido" ao invés de próximo
      
- [ ] Dado que visualizo perfil de outro usuário
      Quando vejo
      Então seu nível aparece igualmente visível

##### Prioridade
**Alta** - Exibição principal de status

##### Complexidade
**Baixa** - Renderização de informações

##### Dependências
RF115-RF118 (Todos os níveis), RF103 (Pontos)

##### Notas/Observações
- Seção: "Nível de Engajamento" ou "Status"
- Layout: card com ícone grande + informações ao lado
- Ícone: 48x48px PNG/SVG
- Cor: específica do nível (verde, azul, roxo, dourado)
- Descrição: frase motivacional por nível
- Próximo nível: "X pontos para [Nome]" em texto menor
- Percentual: barra mostrando % de progresso
- Clique no nível: abre modal com explicação de todos os níveis
- Responsivo: adapta em mobile (ícone menor, texto resumido)
- Perfis públicos: nível também é visível
- Atualização em tempo real via WebSocket (opcional)
- Badges relacionadas ao nível abaixo



#### RF120 - Barra de progresso para próximo nível

##### User Story
Como **aluno que quer avançar de nível**
Quero **visualizar uma barra de progresso mostrando quanto falta**
Para **ser motivado e acompanhar minha evolução**

##### Descrição
Barra visual que exibe progresso em direção ao próximo nível, mostrando pontos atuais vs pontos necessários na faixa atual.

##### Regras de Negócio
- RN001: Cálculo: (pontos_atuais - limite_inferior) / (limite_superior - limite_inferior) * 100
- RN002: Visualização: barra horizontal com cores: verde (novo), azul (mid), roxo (alto), ouro (máximo)
- RN003: Exibir: percentual atual (ex: 45%) e pontos (ex: 225/500)
- RN004: Tooltip ao hover: mostra exatamente quantos pontos faltam
- RN005: Animação suave: barra anima ao ganhar pontos (não jump)
- RN006: Nível Embaixador: barra completa (100%) com mensagem "Máximo atingido"
- RN007: Atualização em tempo real quando pontos são ganhos

##### Critérios de Aceitação
- [ ] Dado que tenho 250 pontos (Colaborador)
      Quando visualizo barra
      Então vejo progresso: (250-101)/(500-101) = 33% preenchido
      
- [ ] Dado que vejo barra de progresso
      Quando passo mouse
      Então tooltip mostra "Faltam 250 pontos para Conector"
      
- [ ] Dado que ganho 10 pontos
      Quando barra atualiza
      Então vejo animação suave do avanço (250 → 260)
      
- [ ] Dado que tenho 1001+ pontos (Embaixador)
      Quando visualizo barra
      Então vejo "100% - Nível Máximo Atingido"
      
- [ ] Dado que estou no limite da faixa (500 pontos, Colaborador)
      Quando visualizo barra
      Então mostra 99.9% (quase completo)

##### Prioridade
**Alta** - Motivação visual

##### Complexidade
**Média** - Cálculo dinâmico com animação

##### Dependências
RF103 (Pontos), RF115-RF118 (Níveis), RF119 (Visualização de nível)

##### Notas/Observações
- Elemento: `<progress>` HTML5 ou SVG custom
- Altura: 8-12px (discreto mas visível)
- Cores por nível: Verde (Novato), Azul (Colaborador), Roxo (Conector), Dourado (Embaixador)
- Cálculo: min_pontos = [0, 101, 501, 1001]; max_pontos = [100, 500, 1000, ∞]
- Fórmula: progress = ((current - min) / (max - min)) * 100
- Animação: transition: width 0.5s ease (suave)
- Tooltip: Popper/Tippy com "Faltam X pontos para [Nível]"
- Atualização em tempo real: WebSocket ou polling
- Texto abaixo: "XXX/YYY pontos - ZZ% completo"
- Mobile: responsiva, texto adapta
- Considerações:
  - Barra nunca deve passar 100% (validação)
  - Máximo sempre mostra 100%
  - Animação ao ganhar pontos (visual motivador)
  - Ondas/particles ao atingir novo nível (Fase 2)
- Analytics: distribuição de pontos, velocidade média de progressão