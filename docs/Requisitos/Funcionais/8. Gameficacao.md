
### M√ìDULO 8: GAMIFICA√á√ÉO

##### 8.1 Sistema de Pontos

#### RF097 - Atribuir +10 pontos ao criar thread

##### User Story
Como **aluno que criou uma thread**
Quero **receber pontos por criar conte√∫do**
Para **ser reconhecido por contribuir com discuss√µes para a comunidade**

##### Descri√ß√£o
Sistema que automaticamente atribui 10 pontos ao usu√°rio quando cria uma nova thread no f√≥rum.

##### Regras de Neg√≥cio
- RN001: +10 pontos por thread criada
- RN002: Pontos atribu√≠dos imediatamente ap√≥s thread ser publicada
- RN003: Apenas threads n√£o deletadas contam (deletar remove pontos)
- RN004: Limite di√°rio: m√°ximo 100 pontos por dia em threads (10 threads)
- RN005: Threads duplicadas/spam detectadas manualmente (admin revisa)
- RN006: Registro em tabela `user_points` com motivo e refer√™ncia
- RN007: Pontos n√£o podem ser removidos manualmente (apenas por deletar)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que publico nova thread
      Quando thread √© criada com sucesso
      Ent√£o recebo imediatamente +10 pontos
      
- [ ] Dado que verifico meus pontos
      Quando visualizo hist√≥rico
      Ent√£o vejo "+ 10 pontos - Thread: [T√≠tulo]" com timestamp
      
- [ ] Dado que criei 10 threads em 1 dia (100 pontos)
      Quando tento criar a 11¬™
      Ent√£o vejo aviso "Limite di√°rio de pontos em threads atingido"
      
- [ ] Dado que deleto thread que criei
      Quando dele√ß√£o √© processada
      Ent√£o perdo os 10 pontos retroativamente
      
- [ ] Dado que thread foi publicada h√° dias
      Quando visualizo pontos
      Ent√£o pontos ainda est√£o l√° (n√£o expiram)

##### Prioridade
**Alta** - Core de gamifica√ß√£o

##### Complexidade
**Baixa** - Trigger simples de INSERT

##### Depend√™ncias
RF022 (Criar thread), RF103-RF104 (Dashboard e hist√≥rico)

##### Notas/Observa√ß√µes
- Trigger: ON INSERT threads THEN INSERT user_points(user_id, points=10, reason='thread_created', thread_id)
- Tabela `user_points`: user_id, points, reason, reference_id, created_at
- Valida√ß√£o: thread.status != 'deleted'
- Rate limiting: 10 threads/dia por usu√°rio
- Logs completos para auditoria
- Webhook para atualizar cache de pontos do usu√°rio
- Considerar "b√¥nus" para threads populares (Fase 2)
- Analytics: threads criadas vs pontos distribu√≠dos



#### RF098 - Atribuir +5 pontos ao comentar

##### User Story
Como **aluno que comentou em uma thread**
Quero **receber pontos por participar da discuss√£o**
Para **ser incentivado a engajar com conte√∫do da comunidade**

##### Descri√ß√£o
Sistema que automaticamente atribui 5 pontos ao usu√°rio quando publica coment√°rio em uma thread.

##### Regras de Neg√≥cio
- RN001: +5 pontos por coment√°rio publicado
- RN002: Pontos atribu√≠dos imediatamente ap√≥s coment√°rio ser criado
- RN003: Coment√°rios deletados removem os pontos
- RN004: Limite di√°rio: m√°ximo 100 pontos por dia em coment√°rios (20 coment√°rios)
- RN005: Coment√°rios spam/muito curtos n√£o ganham pontos (valida√ß√£o posterior)
- RN006: Registro em tabela `user_points` com refer√™ncia ao coment√°rio
- RN007: Mesmo coment√°rio n√£o pode renderizar m√∫ltiplos pontos (idempotente)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que publico coment√°rio em thread
      Quando coment√°rio √© criado com sucesso
      Ent√£o recebo imediatamente +5 pontos
      
- [ ] Dado que verifico hist√≥rico de pontos
      Quando visualizo
      Ent√£o vejo "+ 5 pontos - Coment√°rio em: [Thread]"
      
- [ ] Dado que publico 20 coment√°rios em 1 dia (100 pontos)
      Quando tento postar 21¬∫
      Ent√£o vejo aviso "Limite di√°rio de pontos em coment√°rios atingido"
      
- [ ] Dado que deleto meu coment√°rio
      Quando dele√ß√£o √© processada
      Ent√£o perdo os 5 pontos
      
- [ ] Dado que coment√°rio foi postado h√° dias
      Quando edito o coment√°rio
      Ent√£o pontos n√£o s√£o modificados (apenas uma vez)

##### Prioridade
**Alta** - Core de gamifica√ß√£o

##### Complexidade
**Baixa** - Trigger simples

##### Depend√™ncias
RF027 (Comentar), RF103-RF104 (Dashboard e hist√≥rico)

##### Notas/Observa√ß√µes
- Trigger: ON INSERT comments THEN INSERT user_points(user_id, points=5, reason='comment_created', comment_id)
- Tabela `user_points`: refer√™ncia comment_id
- Valida√ß√£o: comment.status != 'deleted'
- Rate limiting: 20 coment√°rios/dia por usu√°rio (ou por thread)
- Campo idempot√™ncia: evitar dupla contagem
- Coment√°rios muito curtos (<10 caracteres) podem n√£o ganhar pontos (opcional)
- Logs para auditoria
- Considerar "melhor resposta" com b√¥nus (Fase 2)
- Analytics: engajamento por n√∫mero de coment√°rios



#### RF099 - Atribuir +2 pontos ao receber upvote

##### User Story
Como **aluno que recebeu upvote**
Quero **receber pontos quando meu conte√∫do √© validado**
Para **ter reconhecimento por qualidade do meu conte√∫do**

##### Descri√ß√£o
Sistema que atribui 2 pontos ao autor de thread/coment√°rio sempre que recebe upvote de outro usu√°rio.

##### Regras de Neg√≥cio
- RN001: +2 pontos por upvote recebido (thread ou coment√°rio)
- RN002: Pontos atribu√≠dos imediatamente ap√≥s upvote ser registrado
- RN003: Remover upvote remove os pontos do autor
- RN004: Cada upvote conta uma vez (n√£o m√∫ltiplos da mesma pessoa)
- RN005: Autor n√£o pode dar upvote em pr√≥prio conte√∫do (validado em RF030)
- RN006: Limite semanal: m√°ximo 200 pontos em upvotes (100 upvotes)
- RN007: Registro em tabela `user_points` com refer√™ncia ao upvote

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que algu√©m d√° upvote na minha thread
      Quando upvote √© registrado
      Ent√£o recebo imediatamente +2 pontos
      
- [ ] Dado que meu coment√°rio tem 15 upvotes
      Quando verifico pontos
      Ent√£o vejo "+ 30 pontos" (15 √ó 2) em hist√≥rico agregado
      
- [ ] Dado que algu√©m remove upvote que tinha dado
      Quando remo√ß√£o √© processada
      Ent√£o perco os 2 pontos correspondentes
      
- [ ] Dado que recebi 100 upvotes em 1 semana (200 pontos)
      Quando recebo 101¬∫ upvote
      Ent√£o n√£o ganho mais pontos (limite atingido)
      
- [ ] Dado que algu√©m tenta dar upvote em meu pr√≥prio conte√∫do
      Quando tenta
      Ent√£o upvote √© bloqueado (valida√ß√£o anterior)

##### Prioridade
**Alta** - Core de gamifica√ß√£o

##### Complexidade
**M√©dia** - Trigger com valida√ß√µes bidirecionais

##### Depend√™ncias
RF030-RF033 (Sistema de upvotes), RF103-RF104 (Dashboard)

##### Notas/Observa√ß√µes
- Trigger: ON INSERT votes(vote_type='up') THEN INSERT user_points(points=2, reason='upvote_received')
- Trigger reverso: ON DELETE votes THEN DELETE FROM user_points WHERE reason='upvote_received' AND vote_id
- Idempot√™ncia: uma pessoa = um upvote = 2 pontos (m√°ximo)
- Rate limiting semanal: 200 pontos/semana em upvotes
- Logs completos de quem votou
- Valida√ß√£o: author_id != voter_id
- Considerar "b√¥nus" para conte√∫do muito votado (Fase 2)
- Analytics: upvotes distribu√≠dos vs pontos



#### RF100 - Atribuir +15 pontos ao ter thread marcada como √∫til

##### User Story
Como **autor de thread resolvida**
Quero **receber b√¥nus de pontos por resolver problema**
Para **ser reconhecido por contribui√ß√£o valiosa para comunidade**

##### Descri√ß√£o
Sistema que atribui 15 pontos ao autor de thread quando ela √© marcada como "Resolvida/√ötil".

##### Regras de Neg√≥cio
- RN001: +15 pontos ao thread ser marcada como resolvida
- RN002: Pontos atribu√≠dos imediatamente ap√≥s marca√ß√£o
- RN003: Desmarcar como resolvida remove os 15 pontos
- RN004: Apenas thread creator pode marcar (ou admin)
- RN005: Uma thread pode ser marcada como resolvida apenas 1 vez
- RN006: Limite: m√°ximo 50 pontos por dia em resolu√ß√µes (3-4 threads)
- RN007: Registro em tabela `user_points` com refer√™ncia √† thread

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que marco minha thread como "Resolvida"
      Quando resolu√ß√£o √© registrada
      Ent√£o recebo imediatamente +15 pontos
      
- [ ] Dado que thread tem status "Resolvida"
      Quando verifico hist√≥rico de pontos
      Ent√£o vejo "+ 15 pontos - Thread resolvida: [T√≠tulo]"
      
- [ ] Dado que desmarco thread como resolvida
      Quando desmarca√ß√£o √© processada
      Ent√£o perdo os 15 pontos
      
- [ ] Dado que marco 4 threads como resolvidas em 1 dia
      Quando tento marcar 5¬™
      Ent√£o vejo aviso "Limite di√°rio em resolu√ß√µes atingido"
      
- [ ] Dado que try marcar thread duas vezes
      Quando tenta segunda vez
      Ent√£o vejo erro "Esta thread j√° foi marcada como resolvida"

##### Prioridade
**Alta** - Incentiva resolu√ß√£o de problemas

##### Complexidade
**M√©dia** - Valida√ß√£o de estado √∫nico

##### Depend√™ncias
RF035 (Marcar como resolvida), RF103-RF104 (Dashboard)

##### Notas/Observa√ß√µes
- Trigger: ON UPDATE threads(resolved=true) THEN INSERT user_points(points=15, reason='thread_resolved')
- Campo constraint: resolved_at pode ser setado apenas uma vez
- Soft revert: UPDATE status SET resolved=false THEN DELETE points
- Rate limiting: 50 pontos/dia em resolu√ß√µes
- Valida√ß√£o: apenas criador ou admin pode marcar
- Logs de quem marcou e quando
- Considerar "super resolvida" com m√∫ltiplos coment√°rios √∫teis (Fase 2)
- Analytics: % de threads que s√£o resolvidas



#### RF101 - Atribuir +20 pontos ao participar de evento

##### User Story
Como **aluno que confirmou presen√ßa em evento**
Quero **receber pontos por participar de atividades da comunidade**
Para **ser incentivado a engajar presencialmente**

##### Descri√ß√£o
Sistema que atribui 20 pontos ao usu√°rio quando confirma presen√ßa em evento e posteriormente o evento ocorre.

##### Regras de Neg√≥cio
- RN001: +20 pontos quando evento come√ßa (n√£o na confirma√ß√£o, mas na data/hora)
- RN002: Pontos atribu√≠dos 1 hora depois do evento come√ßar (assumir presen√ßa)
- RN003: Remover confirma√ß√£o antes do evento cancela os pontos
- RN004: Limite: m√°ximo 100 pontos por dia em eventos (5 eventos)
- RN005: Evento cancelado n√£o gera pontos
- RN006: Registro em tabela `user_points` com refer√™ncia ao evento
- RN007: Considerar presen√ßa confirmada (sem check-in physical para MVP)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que confirmei presen√ßa em evento que acontece hoje √†s 19h
      Quando evento come√ßa (19h passa)
      Ent√£o sistema aguarda 1h (at√© 20h)
      
- [ ] Dado que s√£o 20:05 (1h05min ap√≥s evento come√ßar)
      Quando job rodeia
      Ent√£o recebo +20 pontos (presen√ßa confirmada)
      
- [ ] Dado que cancelei confirma√ß√£o antes do evento
      Quando evento come√ßa
      Ent√£o n√£o recebo os 20 pontos
      
- [ ] Dado que participei de 5 eventos em 1 dia (100 pontos)
      Quando 6¬∫ evento come√ßar
      Ent√£o n√£o ganho pontos (limite di√°rio atingido)
      
- [ ] Dado que evento foi cancelado
      Quando data/hora do evento chega
      Ent√£o ningu√©m recebe pontos (evento n√£o ocorreu)

##### Prioridade
**Alta** - Incentiva engajamento presencial

##### Complexidade
**M√©dia** - Job agendado com verifica√ß√µes de status

##### Depend√™ncias
RF084 (Confirmar presen√ßa), RF081 (Cancelamento), RF103-RF104 (Dashboard)

##### Notas/Observa√ß√µes
- Job scheduler: rodando a cada 15 minutos
- Query: SELECT * FROM confirmations WHERE event_id IN (SELECT * FROM events WHERE NOW() > event_date + 1h) AND points_awarded=false
- Valida√ß√£o: confirma√ß√£o ativa, evento n√£o cancelado, limite di√°rio n√£o atingido
- Coluna `points_awarded` na tabela confirmations (idempot√™ncia)
- Presen√ßa presumida (sem check-in para MVP)
- Considerar check-in f√≠sico/QR code (Fase 2)
- Rate limiting: 100 pontos/dia em eventos
- Logs de eventos onde pontos foram atribu√≠dos
- Analytics: evento com mais presen√ßa (pontos distribu√≠dos)



#### RF102 - Atribuir +50 pontos ao completar perfil 100%

##### User Story
Como **aluno que completou seu perfil**
Quero **receber b√¥nus ao ter perfil completo**
Para **ser reconhecido por investir em meu perfil e comunidade**

##### Descri√ß√£o
Sistema que atribui 50 pontos b√¥nus √∫nica vez ao usu√°rio quando seu perfil atinge 100% de completude.

##### Regras de Neg√≥cio
- RN001: +50 pontos quando perfil atinge 100% de completude
- RN002: Pontos atribu√≠dos apenas uma vez (b√¥nus de completude)
- RN003: Completude = foto + bio + tags (m√≠nimo 3) + redes sociais (m√≠nimo 1)
- RN004: Se usu√°rio reduz completude abaixo de 100%, b√¥nus n√£o √© removido (one-time)
- RN005: Verifica√ß√£o: ao salvar perfil, se passou de <100% para 100%
- RN006: Registro em tabela `user_points` com motivo 'profile_completed'
- RN007: Notifica√ß√£o ao usu√°rio quando atinge 100%

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que meu perfil est√° em 80% completo
      Quando adiciono √∫ltima tag necess√°ria
      Ent√£o atinge 100% e recebo +50 pontos
      
- [ ] Dado que verifico hist√≥rico de pontos
      Ent√£o vejo "+ 50 pontos - Perfil completo" registrado uma √∫nica vez
      
- [ ] Dado que completo perfil ap√≥s dias
      Quando adiciono foto (√∫ltima coisa que faltava)
      Ent√£o recebo notifica√ß√£o "Parab√©ns! Perfil completo! üéâ"
      
- [ ] Dado que recebi b√¥nus de perfil completo
      Quando removo foto (abaixo de 100%)
      Ent√£o pontos N√ÉO s√£o removidos (b√¥nus j√° ganho)
      
- [ ] Dado que tento manipular sistema (hack)
      Quando backend valida
      Ent√£o pontos s√≥ s√£o atribu√≠dos uma vez (constraint)

##### Prioridade
**Alta** - Incentiva onboarding completo

##### Complexidade
**M√©dia** - C√°lculo de completude e valida√ß√£o √∫nica

##### Depend√™ncias
RF010-RF021 (Componentes de perfil), RF103-RF104 (Dashboard)

##### Notas/Observa√ß√µes
- Fun√ß√£o: calculate_profile_completion() retorna 0-100%
- Componentes: foto (20%), bio (20%), tags>=3 (20%), redes sociais>=1 (20%), email verificado (20%)
- Trigger: ON UPDATE users THEN IF new_completion=100% AND old_completion<100% AND !profile_completion_bonus THEN award
- Coluna: `profile_completion_bonus_awarded` boolean (default false)
- Constraint: idempot√™ncia com coluna booleana
- Notifica√ß√£o: toast + email
- Badge na p√°gina de perfil: "‚úì Perfil Completo"
- Considerar "Super Profile" com foto + bio + tags + redes + eventos + mentorias (Fase 2)
- Analytics: % de usu√°rios com perfil completo



#### RF103 - Dashboard pessoal de pontos acumulados

##### User Story
Como **aluno cadastrado**
Quero **visualizar meus pontos acumulados e n√≠vel atual**
Para **acompanhar meu progresso e reconhecimento na comunidade**

##### Descri√ß√£o
P√°gina/se√ß√£o do perfil que exibe pontua√ß√£o total do usu√°rio, n√≠vel de engajamento, progresso para pr√≥ximo n√≠vel, e breakdown de pontos por categoria.

##### Regras de Neg√≥cio
- RN001: Exibir pontos totais acumulados
- RN002: Exibir n√≠vel atual baseado em faixas: Novato (0-100), Colaborador (101-500), Conector (501-1000), Embaixador (1001+)
- RN003: Mostrar progresso para pr√≥ximo n√≠vel em barra visual
- RN004: Breakdown: pontos por categoria (threads, coment√°rios, upvotes, eventos, etc)
- RN005: Top contributors vis√≠vel (opcional - sem ranking competitivo direto)
- RN006: Hist√≥rico: √∫ltimos 10 movimentos de pontos
- RN007: Tempo real: pontos atualizam ao fazer a√ß√£o

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso meu dashboard de pontos
      Quando p√°gina carrega
      Ent√£o vejo "Voc√™ tem 450 pontos - Colaborador"
      
- [ ] Dado que tenho 450 pontos (entre 101-500)
      Quando visualizo n√≠vel
      Ent√£o vejo "N√≠vel: Colaborador (50 de 500 para pr√≥ximo n√≠vel)"
      
- [ ] Dado que visualizo breakdown de pontos
      Ent√£o vejo: "Threads: +80, Coment√°rios: +95, Upvotes: +120, Eventos: +60, Perfil: +50"
      
- [ ] Dado que acabei de criar thread
      Quando recarrego dashboard
      Ent√£o pontos aumentam de 450 para 460 (+10)
      
- [ ] Dado que visualizo "√öltimos movimentos"
      Quando vejo hist√≥rico
      Ent√£o aparecem 10 a√ß√µes mais recentes com +X pontos cada

##### Prioridade
**Alta** - Componente core de gamifica√ß√£o

##### Complexidade
**M√©dia** - Agrega√ß√£o de dados m√∫ltiplos

##### Depend√™ncias
RF103 (Sistema de pontos), RF103-RF104 (Hist√≥rico)

##### Notas/Observa√ß√µes
- URL: /perfil/pontos ou /dashboard/pontos
- Query: SELECT SUM(points) FROM user_points WHERE user_id=?
- C√°lculo de n√≠vel: CASE WHEN points < 101 THEN 'Novato' WHEN points < 501...
- Barra de progresso: (pontos_atuais - faixa_anterior) / (faixa_pr√≥xima - faixa_anterior)
- Breakdown: SELECT reason, SUM(points) FROM user_points GROUP BY reason
- Top contributors: SELECT user_id, SUM(points) FROM user_points GROUP BY user_id ORDER BY points DESC LIMIT 10 (opcional, sem ranking p√∫blico)
- Cards informativos com √≠cones por tipo
- Atualiza√ß√£o em tempo real via WebSocket (opcional)
- Considerar badges baseadas em pontos (Fase 2)
- Analytics: distribui√ß√£o de pontos na comunidade



#### RF104 - Hist√≥rico de pontua√ß√£o

##### User Story
Como **aluno**
Quero **visualizar hist√≥rico completo de pontos ganhos**
Para **acompanhar minhas contribui√ß√µes ao longo do tempo**

##### Descri√ß√£o
P√°gina que exibe hist√≥rico detalhado de todas as movimenta√ß√µes de pontos do usu√°rio, com filtros por tipo e per√≠odo.

##### Regras de Neg√≥cio
- RN001: Exibir todas as movimenta√ß√µes (gain/loss) de pontos
- RN002: Informa√ß√µes: data, motivo, pontos, refer√™ncia (link para thread/evento/etc)
- RN003: Ordena√ß√£o padr√£o: mais recente primeiro
- RN004: Pagina√ß√£o: 50 movimenta√ß√µes por p√°gina
- RN005: Filtro por tipo: threads, coment√°rios, upvotes, eventos, perfil, outros
- RN006: Filtro por per√≠odo: √∫ltima semana, m√™s, trimestre, custom
- RN007: Contador total no topo: "Total: 450 pontos em 45 contribui√ß√µes"

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso "Hist√≥rico de Pontos"
      Quando p√°gina carrega
      Ent√£o vejo lista com √∫ltimas 50 movimenta√ß√µes
      
- [ ] Dado que verifico hist√≥rico
      Quando vejo movimenta√ß√µes
      Ent√£o vejo: data, +/-X pontos, motivo, link para refer√™ncia
      
- [ ] Dado que filtro por "Threads"
      Quando aplico
      Ent√£o vejo apenas movimenta√ß√µes de threads criadas
      
- [ ] Dado que filtro por "√öltima semana"
      Quando aplico
      Ent√£o vejo apenas movimenta√ß√µes dos √∫ltimos 7 dias
      
- [ ] Dado que clico em movimenta√ß√£o de thread
      Quando clico em link
      Ent√£o sou redirecionado para aquela thread

##### Prioridade
**M√©dia** - Hist√≥rico importante mas n√£o cr√≠tico

##### Complexidade
**Baixa** - Listagem simples com filtros

##### Depend√™ncias
RF097-RF102 (Todos sistemas de pontos), RF103 (Dashboard)

##### Notas/Observa√ß√µes
- Tabela `user_points`: user_id, points (can be negative), reason, reference_id, created_at
- Query: SELECT * FROM user_points WHERE user_id=? ORDER BY created_at DESC
- Pagina√ß√£o: LIMIT 50 OFFSET
- Filtro: WHERE reason IN (?)
- Per√≠odo: WHERE created_at BETWEEN ? AND ?
- Cards com motivo leg√≠vel: "Thread: [T√≠tulo]", "Coment√°rio: [Preview]", "Upvote recebido", etc
- √çcones por tipo de movimenta√ß√£o (+ verde, - vermelho)
- Sidebar com filtros
- Link para refer√™ncia (thread, evento, coment√°rio)
- Considerar export (CSV) do hist√≥rico (Fase 2)
- Agrega√ß√£o visual: "Voc√™ ganhou 150 pontos esta semana!"
- Analytics: padr√£o de pontua√ß√£o do usu√°rio (ativo em qual hor√°rio)



#### RF105 - Cria√ß√£o de badges personalizadas pelo admin (nome, descri√ß√£o, √≠cone, crit√©rio)

##### User Story
Como **administrador ISMART**
Quero **criar badges personalizadas com crit√©rios customizados**
Para **incentivar comportamentos espec√≠ficos e reconhecer contribui√ß√µes variadas**

##### Descri√ß√£o
Interface no painel administrativo que permite criar novas badges com nome, descri√ß√£o, upload de √≠cone e defini√ß√£o de crit√©rios de conquista (manual ou autom√°tico).

##### Regras de Neg√≥cio
- RN001: Nome obrigat√≥rio: 5-50 caracteres
- RN002: Descri√ß√£o obrigat√≥ria: 10-200 caracteres
- RN003: √çcone obrigat√≥rio: upload PNG/SVG (max 2MB, 256x256px)
- RN004: Crit√©rio: manual (admin atribui) ou autom√°tico (regra baseada em dados)
- RN005: Crit√©rio autom√°tico: express√£o em JSON (ex: {"type": "threads_created", "value": 10})
- RN006: Cor personaliz√°vel (picker de cores)
- RN007: Raridade opcional: comum/raro/√©pico/lend√°rio (UI)
- RN008: Data de ativa√ß√£o: pode ser futura
- RN009: Admin pode desativar badge sem remover de usu√°rios

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso painel de admin "Badges"
      Quando clico em "Criar Badge"
      Ent√£o vejo formul√°rio com campos: nome, descri√ß√£o, √≠cone, crit√©rio
      
- [ ] Dado que preencho nome "Debatedor Ativo" e descri√ß√£o
      Quando fa√ßo upload de √≠cone PNG
      Ent√£o vejo preview do √≠cone antes de salvar
      
- [ ] Dado que seleciono crit√©rio "Autom√°tico"
      Quando vejo op√ß√µes
      Ent√£o posso escolher: "X coment√°rios", "X threads", "X upvotes", "Custom"
      
- [ ] Dado que criei badge com crit√©rio "Custom"
      Quando salvo
      Ent√£o posso definir express√£o JSON: {"type": "custom_metric", "value": 50}
      
- [ ] Dado que seleciono raridade "√âpico"
      Quando visualizo badge no perfil do usu√°rio
      Ent√£o tem destaque visual especial (cor dourada, tamanho maior)

##### Prioridade
**Alta** - Gamifica√ß√£o customiz√°vel

##### Complexidade
**Alta** - Editor de crit√©rios e valida√ß√£o de express√µes

##### Depend√™ncias
RF111-RF114 (Sistema de badges)

##### Notas/Observa√ß√µes
- Tabela `badges`: id, name, description, icon_url, criteria_type, criteria_json, color, rarity, active, created_at
- Criteria types: 'manual', 'auto_threads', 'auto_comments', 'auto_upvotes', 'auto_events', 'auto_mentorship', 'custom'
- Editor JSON visual (n√£o c√≥digo bruto) com valida√ß√£o
- Upload de √≠cone: salvar em S3/storage com dimens√µes 256x256
- Color picker: hex ou interface visual
- Preview ao vivo do badge com cor e √≠cone
- Rarity levels: 'common' (cinza), 'rare' (azul), 'epic' (roxo), 'legendary' (dourado)
- Valida√ß√£o: nome √∫nico (n√£o pode repetir)
- Logs completos de cria√ß√£o e modifica√ß√£o
- Considerar "Badge por per√≠odo" (mensal, semanal) - Fase 2
- Versionamento de badges (hist√≥rico de altera√ß√µes)



#### RF106 - Badge autom√°tica: Primeira Conex√£o

##### User Story
Como **aluno que fez sua primeira amizade**
Quero **receber badge ao conectar com primeiro colega**
Para **marcar esse momento importante e ser reconhecido**

##### Descri√ß√£o
Badge autom√°tica concedida quando usu√°rio aceita ou envia primeira solicita√ß√£o de amizade confirmada, reconhecendo in√≠cio de networking.

##### Regras de Neg√≥cio
- RN001: Concedida quando: primeira amizade confirmada (status='accepted')
- RN002: Concess√£o: ao aceitar ou ser aceito (bidirecional conta como uma)
- RN003: Apenas uma vez por usu√°rio (n√£o repet√≠vel)
- RN004: Atribui√ß√£o autom√°tica via trigger ao registrar primeira amizade
- RN005: Notifica√ß√£o ao usu√°rio ao conquistar
- RN006: Aparece no perfil com data de conquista
- RN007: N√£o pode ser removida (permanente)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que sou novo usu√°rio
      Quando aceito primeiro pedido de amizade
      Ent√£o recebo notifica√ß√£o "Parab√©ns! Voc√™ conquistou a badge 'Primeira Conex√£o'! üéâ"
      
- [ ] Dado que badge foi concedida
      Quando visualizo meu perfil
      Ent√£o vejo badge "Primeira Conex√£o" com √≠cone de m√£o/amizade
      
- [ ] Dado que recebi primeira amizade
      Quando verifico hist√≥rico de badges
      Ent√£o vejo data exata: "Conquistada em DD/MM/YYYY"
      
- [ ] Dado que j√° tenho badge "Primeira Conex√£o"
      Quando aceito segunda amizade
      Ent√£o n√£o ganho badge novamente (√∫nica)
      
- [ ] Dado que sou novo usu√°rio
      Quando envio solicita√ß√£o para algu√©m
      Ent√£o n√£o ganho badge (s√≥ ao confirmar)

##### Prioridade
**Alta** - Reconhecimento de milestone importante

##### Complexidade
**M√©dia** - Trigger baseado em primeira amizade

##### Depend√™ncias
RF059 (Aceitar amizade), RF111-RF113 (Sistema de badges)

##### Notas/Observa√ß√µes
- Trigger: ON UPDATE friendships SET status='accepted' WHERE (first_friendship.accepted_count = 1)
- Valida√ß√£o: SELECT COUNT(*) FROM friendships WHERE (user_id=? OR friend_id=?) AND status='accepted' = 1
- Atributo: badge_first_connection_awarded boolean na tabela users (idempot√™ncia)
- Notifica√ß√£o: toast + in-app + email
- √çcone: ü§ù ou üë•
- Descri√ß√£o da badge: "Voc√™ fez sua primeira conex√£o!"
- Data permanente: first_connection_date em users
- Considerar varia√ß√µes: "Networking Beginner" vs "Social Butterfly" (m√∫ltiplas amizades) - Fase 2
- Analytics: % de usu√°rios com esta badge



#### RF107 - Badge autom√°tica: Solucionador (5 threads √∫teis)

##### User Story
Como **aluno que ajudou a comunidade**
Quero **receber badge ao ter 5 threads marcadas como √∫teis**
Para **ser reconhecido como solucionador de problemas**

##### Descri√ß√£o
Badge autom√°tica concedida quando autor de thread atinge 5 threads marcadas como "Resolvida/√ötil", reconhecendo contribui√ß√£o valiosa.

##### Regras de Neg√≥cio
- RN001: Concedida quando: 5 threads do usu√°rio marcadas como resolvidas
- RN002: Contagem: threads onde status='resolved' AND resolved_by=user_id (ou criador)
- RN003: Atualizada automaticamente a cada thread marcada como resolvida
- RN004: Pode ser conquistada m√∫ltiplas vezes (varia√ß√µes: Solucionador J√∫nior 5, S√™nior 10, Experiente 20)
- RN005: Notifica√ß√£o ao atingir 5¬™ thread resolvida
- RN006: Aparece no perfil com contador agregado
- RN007: √çcone e cor espec√≠ficos para badge

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que tenho 4 threads resolvidas
      Quando marco 5¬™ thread como resolvida
      Ent√£o recebo notifica√ß√£o "Parab√©ns! Voc√™ √© um Solucionador! üí°"
      
- [ ] Dado que conquistei badge "Solucionador"
      Quando visualizo perfil
      Ent√£o vejo badge com √≠cone de l√¢mpada/check
      
- [ ] Dado que tenho 10 threads resolvidas
      Quando visualizo badge
      Ent√£o vejo "Solucionador (10 threads)" com contador
      
- [ ] Dado que tenho 9 threads resolvidas
      Quando marco 10¬™ como resolvida
      Ent√£o recebo notifica√ß√£o "Avan√ßado: 10 threads resolvidas!"
      
- [ ] Dado que removo marca√ß√£o de thread como resolvida
      Quando removo
      Ent√£o contador decresce (ex: 10 ‚Üí 9) mas badge n√£o √© removida

##### Prioridade
**Alta** - Reconhecimento de solu√ß√µes

##### Complexidade
**M√©dia** - Contagem com trigger de atualiza√ß√£o

##### Depend√™ncias
RF035 (Marcar como resolvida), RF111-RF113 (Sistema de badges)

##### Notas/Observa√ß√µes
- Trigger: ON UPDATE threads SET resolved=true THEN COUNT resolved threads, IF count=5,10,20,50 THEN award badge
- Query: SELECT COUNT(*) FROM threads WHERE user_id=? AND resolved=true
- Varia√ß√µes de badge: 'solver_bronze' (5), 'solver_silver' (10), 'solver_gold' (20), 'solver_legend' (50)
- Notifica√ß√£o milestones: 5, 10, 20, 50
- √çcone: üí° (l√¢mpada)
- Descri√ß√£o: "Voc√™ resolveu X problemas!"
- Contador vis√≠vel: "Solucionador (X threads)"
- Considerar "Especialista em categoria" (5 threads sobre Python) - Fase 2
- Badge progressiva (bronze‚Üísilver‚Üígold)
- Analytics: distribui√ß√£o de solucionadores



#### RF108 - Badge autom√°tica: Mentor Ativo

##### User Story
Como **aluno que est√° mentorando**
Quero **receber badge ao ter mentorias ativas**
Para **ser reconhecido como mentor experiente**

##### Descri√ß√£o
Badge autom√°tica concedida quando usu√°rio tem 1+ mentorias ativas ou ao completar primeira mentoria com sucesso.

##### Regras de Neg√≥cio
- RN001: Varia√ß√µes: "Mentor Iniciante" (1 mentorado ativo), "Mentor Ativo" (2+), "Mentor Experiente" (10+ completadas)
- RN002: Concedida imediatamente ao receber primeiro mentorado
- RN003: Atualizada conforme n√∫mero de mentorados varia
- RN004: Permanente (n√£o removida se mentorados diminuem)
- RN005: Aparecem m√∫ltiplas badges se aplic√°vel
- RN006: Notifica√ß√£o ao virar mentor
- RN007: Link para "Meus Mentorados" no perfil

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que recebo primeiro mentorado
      Quando matching √© confirmado
      Ent√£o recebo badge "Mentor Iniciante" üéì
      
- [ ] Dado que tenho 1 mentorado ativo
      Quando visualizo perfil
      Ent√£o vejo badge com √≠cone de professor/mentor
      
- [ ] Dado que j√° tenho 1 mentorado e recebo 2¬∫
      Quando 2¬∫ matching √© confirmado
      Ent√£o badge √© atualizada para "Mentor Ativo"
      
- [ ] Dado que completei 10 mentorias
      Quando verifico perfil
      Ent√£o vejo badge "Mentor Experiente" com contador (10)
      
- [ ] Dado que sou mentor
      Quando visualizo badge no perfil
      Ent√£o clicando vejo lista de meus mentorados

##### Prioridade
**Alta** - Reconhecimento de contribui√ß√£o

##### Complexidade
**M√©dia** - M√∫ltiplas varia√ß√µes com contadores

##### Depend√™ncias
RF068-RF078 (Sistema de mentoria), RF111-RF113 (Badges)

##### Notas/Observa√ß√µes
- Trigger: ON INSERT mentorships THEN IF mentor_id THEN award mentor badges
- Varia√ß√µes: 'mentor_novice' (1+ ativo), 'mentor_active' (2+), 'mentor_expert' (10+ completed)
- Query: COUNT(*) FROM mentorships WHERE mentor_id=? AND status IN ('active', 'in_progress')
- Contagem de completas: COUNT(*) WHERE status='completed'
- √çcone: üéì (cap) ou üë®‚Äçüè´ (professor)
- Descri√ß√£o: "Voc√™ est√° mentorando X alunos"
- Notifica√ß√£o: "Parab√©ns! Voc√™ √© um Mentor! üéì"
- Badge aparece em "Explorar" (filtro de mentores)
- Link no perfil: "Ver meus mentorados"
- Considerar "Mentor Top" (avalia√ß√µes altas) - Fase 2
- Analytics: n√∫mero de mentores ativos



#### RF109 - Badge autom√°tica: Embaixador (3+ universidades)

##### User Story
Como **aluno conectado com m√∫ltiplas universidades**
Quero **receber badge ao ter amigos de 3+ universidades**
Para **ser reconhecido como ponte entre comunidades**

##### Descri√ß√£o
Badge autom√°tica concedida quando usu√°rio possui amigos de 3 ou mais universidades diferentes, reconhecendo networking inter-institucional.

##### Regras de Neg√≥cio
- RN001: Concedida quando: amigos de 3+ universidades diferentes
- RN002: Contagem: SELECT DISTINCT university FROM users JOIN friendships WHERE friend_id=? AND status='accepted'
- RN003: Atualizada automaticamente a cada nova amizade
- RN004: Permanente (n√£o removida se amigo √© removido)
- RN005: Varia√ß√µes: "Embaixador Regional" (3), "Embaixador Nacional" (5+)
- RN006: Notifica√ß√£o ao atingir 3¬™ universidade diferente
- RN007: Tooltip mostra universidades conectadas

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que tenho amigos de 2 universidades (USP, UNICAMP)
      Quando fa√ßo amizade com algu√©m da FGV
      Ent√£o recebo badge "Embaixador Regional" üåç
      
- [ ] Dado que tenho badge "Embaixador Regional"
      Quando visualizo perfil
      Ent√£o vejo √≠cone de globo/ponte
      
- [ ] Dado que passo mouse sobre badge
      Quando hover
      Ent√£o vejo tooltip "Conectado com 3 universidades: USP, UNICAMP, FGV"
      
- [ ] Dado que tenho amigos de 5+ universidades
      Quando verifico badge
      Ent√£o vejo "Embaixador Nacional" com destaque especial
      
- [ ] Dado que removo amizade com algu√©m da FGV
      Quando amigo √© removido
      Ent√£o badge permanece (n√£o √© removida)

##### Prioridade
**Alta** - Reconhecimento de networking inter-institucional

##### Complexidade
**M√©dia** - Contagem de universidades distintas

##### Depend√™ncias
RF059 (Amizades), RF111-RF113 (Badges)

##### Notas/Observa√ß√µes
- Trigger: ON UPDATE friendships SET status='accepted' THEN COUNT DISTINCT universities
- Query: SELECT COUNT(DISTINCT users.university) FROM users JOIN friendships WHERE (user_id=? OR friend_id=?) AND status='accepted'
- Varia√ß√µes: 'ambassador_regional' (3), 'ambassador_national' (5+), 'ambassador_international' (10+)
- Atributo: ambassador_awarded boolean na tabela users
- √çcone: üåç (globo) ou üåâ (ponte)
- Descri√ß√£o: "Voc√™ √© uma ponte entre X universidades!"
- Tooltip ao hover: lista universidades conectadas
- Notifica√ß√£o: "Voc√™ √© um Embaixador! Conectando comunidades üåç"
- Link: mostrar "Amigos por universidade" (dashboard)
- Considerar "Conex√µes internacionais" (Fase 2)
- Analytics: distribui√ß√£o de embaixadores



#### RF110 - Badge autom√°tica: Networker (20+ amigos)

##### User Story
Como **aluno com ampla rede de conex√µes**
Quero **receber badge ao atingir 20+ amigos**
Para **ser reconhecido como excelente networker**

##### Descri√ß√£o
Badge autom√°tica concedida quando usu√°rio atinge 20 amigos confirmados, com varia√ß√µes para 50 e 100 amigos.

##### Regras de Neg√≥cio
- RN001: Varia√ß√µes: "Networker" (20), "Super Networker" (50), "Network Influencer" (100+)
- RN002: Contagem: SELECT COUNT(*) FROM friendships WHERE status='accepted' AND (user_id=? OR friend_id=?)
- RN003: Atualizada a cada nova amizade confirmada
- RN004: Permanente (n√£o removida se amigos s√£o removidos)
- RN005: Notifica√ß√£o em milestones: 20, 50, 100
- RN006: Contador agregado no perfil: "Networker (X amigos)"
- RN007: √çcone e cores progressivas

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que tenho 19 amigos confirmados
      Quando fa√ßo amizade com 20¬∫
      Ent√£o recebo badge "Networker" ü§ù
      
- [ ] Dado que conquistei badge "Networker"
      Quando visualizo perfil
      Ent√£o vejo badge com contador "20+"
      
- [ ] Dado que tenho 50 amigos
      Quando verifico badges
      Ent√£o vejo "Super Networker (50+)"
      
- [ ] Dado que tenho 100 amigos
      Quando visualizo
      Ent√£o vejo "Network Influencer (100+)" com destaque especial
      
- [ ] Dado que removo amizade com algu√©m
      Quando amizo √© removido (ex: 50 ‚Üí 49)
      Ent√£o badges n√£o s√£o removidas (permanentes)

##### Prioridade
**Alta** - Reconhecimento de rede

##### Complexidade
**Baixa** - Contagem simples com milestones

##### Depend√™ncias
RF059 (Amizades), RF061 (Lista de amigos), RF111-RF113 (Badges)

##### Notas/Observa√ß√µes
- Trigger: ON UPDATE friendships SET status='accepted' THEN COUNT total friends
- Query: SELECT COUNT(*) FROM friendships WHERE (user_id=? OR friend_id=?) AND status='accepted'
- Varia√ß√µes: 'networker' (20), 'super_networker' (50), 'network_influencer' (100)
- Milestones: 20, 50, 100
- √çcone: ü§ù (aperto de m√£o)
- Descri√ß√£o: "Voc√™ tem X amigos! Excelente networker!"
- Notifica√ß√£o: "üéâ Voc√™ √© um Networker! Parab√©ns por sua rede!"
- Contador vis√≠vel: "Networkter (X amigos)"
- Cores progressivas: Bronze (20), Silver (50), Gold (100)
- Link: "Ver minha rede"
- Considerar "Influenciador" (Fase 2)
- Analytics: distribui√ß√£o de networkters



#### RF111 - Visualiza√ß√£o de badges no perfil

##### User Story
Como **aluno**
Quero **ver as badges conquistadas no meu perfil**
Para **exibir reconhecimentos e conquistas para outros usu√°rios**

##### Descri√ß√£o
Se√ß√£o no perfil que exibe todas as badges conquistadas com √≠cones, nomes, datas de conquista e descri√ß√µes ao hover.

##### Regras de Neg√≥cio
- RN001: Exibir apenas badges conquistadas (n√£o bloqueadas/futuras)
- RN002: Ordena√ß√£o: mais recente primeiro
- RN003: Informa√ß√µes por badge: √≠cone, nome, data de conquista
- RN004: Tooltip ao hover: descri√ß√£o completa + data
- RN005: Clique em badge abre modal com detalhes
- RN006: Perfis p√∫blicos tamb√©m mostram badges (n√£o privado)
- RN007: Badges raras/√©picas com destaque visual especial

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que tenho 5 badges conquistadas
      Quando visualizo meu perfil
      Ent√£o vejo se√ß√£o "Badges" com 5 √≠cones
      
- [ ] Dado que passo mouse sobre badge
      Quando hover ativa
      Ent√£o vejo tooltip: "Nome da Badge - Conquistada em DD/MM/YYYY"
      
- [ ] Dado que clico em badge
      Quando clico
      Ent√£o abre modal com descri√ß√£o completa e crit√©rio
      
- [ ] Dado que badge √© "Rara"
      Quando visualizo
      Ent√£o tem destaque visual: borda brilhante, cor especial
      
- [ ] Dado que visualizo perfil de outro usu√°rio
      Quando vejo se√ß√£o de badges
      Ent√£o badges dele aparecem igual ao meu (p√∫blico)

##### Prioridade
**Alta** - Exibi√ß√£o principal de conquistas

##### Complexidade
**Baixa** - Renderiza√ß√£o de badges

##### Depend√™ncias
RF105-RF114 (Todos sistemas de badges)

##### Notas/Observa√ß√µes
- Tabela `user_badges`: user_id, badge_id, awarded_at, source (trigger que a concedeu)
- Query: SELECT badges.*, user_badges.awarded_at FROM badges JOIN user_badges ORDER BY awarded_at DESC
- Layout: grid 4-5 colunas (desktop), 3 colunas (tablet), 2 colunas (mobile)
- √çcone: imagem 128x128 do badge
- Tooltip com Popper/Tippy
- Modal com descri√ß√£o, data, raridade, estat√≠sticas (% de usu√°rios com ela)
- Se√ß√£o vazia: "Comece a ganhar badges! Crie threads, coment√°rios, eventos..."
- Badges raras (√©picas/lend√°rias): bordas brilhantes, anima√ß√£o sutil
- Considerar "showcase" de at√© 5 badges preferidas (Fase 2)



#### RF112 - Notifica√ß√£o ao conquistar badge

##### User Story
Como **aluno que conquistou badge**
Quero **receber notifica√ß√£o celebrat√≥ria**
Para **saber que alcancei conquista e ser reconhecido**

##### Descri√ß√£o
Notifica√ß√£o in-app com celebra√ß√£o quando usu√°rio conquista nova badge, com op√ß√£o de compartilhar em redes sociais.

##### Regras de Neg√≥cio
- RN001: Notifica√ß√£o imediata quando badge √© atribu√≠da
- RN002: Tipo: in-app toast com anima√ß√£o celebrat√≥ria
- RN003: Conte√∫do: "üéâ Parab√©ns! Voc√™ conquistou: [Nome da Badge]"
- RN004: Incluir descri√ß√£o curta da badge
- RN005: Bot√£o "Compartilhar" (social media - Fase 2)
- RN006: Bot√£o "Ver perfil" (fechar notif e ir para perfil)
- RN007: Notifica√ß√£o persiste por 5 segundos (auto-close)
- RN008: Som opcional (ding/success sound)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que conquistei badge "Primeira Conex√£o"
      Quando badge √© atribu√≠da
      Ent√£o recebo toast: "üéâ Parab√©ns! Voc√™ conquistou: Primeira Conex√£o ü§ù"
      
- [ ] Dado que vejo notifica√ß√£o
      Quando visualizo
      Ent√£o desaparece automaticamente em 5 segundos
      
- [ ] Dado que vejo notifica√ß√£o
      Quando clico em "Ver perfil"
      Ent√£o sou redirecionado para meu perfil (se√ß√£o badges)
      
- [ ] Dado que vejo notifica√ß√£o
      Quando clico em "Compartilhar" (Fase 2)
      Ent√£o abre op√ß√µes: Twitter, Facebook, LinkedIn
      
- [ ] Dado que som est√° ativado nas prefer√™ncias
      Quando conquisto badge
      Ent√£o escuto "ding" celebrat√≥rio

##### Prioridade
**Alta** - Reconhecimento e celebra√ß√£o

##### Complexidade
**Baixa** - Toast notification simples

##### Depend√™ncias
RF113 (Atribui√ß√£o autom√°tica), RF169-RF182 (Notifica√ß√µes)

##### Notas/Observa√ß√µes
- Toast component: React Toast, Chakra Alert, ou similar
- Anima√ß√£o: fade-in + bounce + confetti (opcional)
- Dura√ß√£o: 5000ms auto-close
- √çcone: üéâ + √≠cone da badge
- Cores: vibrante (verde/azul) com fundo subtil
- Som: success.mp3 (curto, <1s)
- Bot√µes: "Ver Perfil", "Compartilhar" (opcional)
- Trigger: quando user_badges.awarded_at √© registrado
- Pode ser agrupada se m√∫ltiplas badges (e.g., levantamento de n√≠vel)
- Logs: notifica√ß√£o enviada com timestamp
- Considerar email notification tamb√©m (Fase 2)
- Analytics: % de usu√°rios que veem notifica√ß√µes



#### RF113 - Atribui√ß√£o autom√°tica de badges quando crit√©rios s√£o atingidos

##### User Story
Como **sistema ISMART Conecta**
Quero **atribuir badges automaticamente quando usu√°rios atingem crit√©rios**
Para **reconhecer conquistas sem interven√ß√£o manual**

##### Descri√ß√£o
Sistema que verifica automaticamente crit√©rios de badges e atribui quando atingidos, sem necessidade de a√ß√£o do admin, com triggers e jobs agendados.

##### Regras de Neg√≥cio
- RN001: Verifica√ß√£o autom√°tica: ao realizar a√ß√£o (criar thread, aceitar amizade, etc)
- RN002: Verifica√ß√£o peri√≥dica: job agendado para crit√©rios complexos (a cada 1h)
- RN003: Atribui√ß√£o: inserir em user_badges com awarded_at=NOW()
- RN004: Idempot√™ncia: validar se badge j√° foi conquistada
- RN005: Notifica√ß√£o autom√°tica gerada ao atribuir
- RN006: Logs completos de atribui√ß√£o com motivo
- RN007: Admin pode visualizar hist√≥rico de atribui√ß√µes

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que crio thread
      Quando thread √© publicada
      Ent√£o sistema valida automaticamente badges aplic√°veis
      
- [ ] Dado que atendo crit√©rio de badge (ex: 5¬∫ thread resolvida)
      Quando crit√©rio √© atingido
      Ent√£o badge √© atribu√≠da automaticamente sem delay
      
- [ ] Dado que atingi m√∫ltiplas badges simultaneamente
      Quando crit√©rios s√£o atingidos
      Ent√£o todas s√£o atribu√≠das (n√£o s√≥ primeira)
      
- [ ] Dado que j√° tenho badge conquistada
      Quando trigger rodeia novamente
      Ent√£o badge n√£o √© duplicada (valida√ß√£o de unicidade)
      
- [ ] Dado que sou admin
      Quando acesso logs de badges
      Ent√£o vejo hist√≥rico: usu√°rio, badge, data, crit√©rio que acionou

##### Prioridade
**Alta** - Automa√ß√£o de gamifica√ß√£o

##### Complexidade
**Alta** - M√∫ltiplos triggers e jobs complexos

##### Depend√™ncias
RF105-RF110 (Todas as badges), RF112 (Notifica√ß√µes)

##### Notas/Observa√ß√µes
- Triggers: ON INSERT threads, ON UPDATE friendships, ON UPDATE comments, etc
- Jobs agendados: verifica√ß√£o a cada 1h para crit√©rios complexos (contagens)
- Tabela `badge_criteria`: badge_id, type, condition_json
- Tipos: 'trigger_based' (imediato), 'periodic' (job), 'manual' (admin)
- Query de verifica√ß√£o: SELECT user_id, COUNT(*) as count FROM [tabela] WHERE [condi√ß√£o]
- Valida√ß√£o: SELECT COUNT(*) FROM user_badges WHERE user_id=? AND badge_id=? (evitar duplicata)
- Notifica√ß√£o disparada automaticamente (RF112)
- Logs: INSERT user_badge_logs(user_id, badge_id, awarded_at, trigger_reason)
- Exponential backoff para retry em falhas
- Considerar "conditional badges" (m√∫ltiplos crit√©rios com AND/OR) - Fase 2
- Analytics: badges mais conquistadas, distribui√ß√£o



#### RF114 - Atribui√ß√£o manual de badge pelo admin

##### User Story
Como **administrador ISMART**
Quero **atribuir badges manualmente para usu√°rios**
Para **reconhecer contribui√ß√µes especiais que n√£o se encaixam em crit√©rios autom√°ticos**

##### Descri√ß√£o
Interface no painel admin que permite buscar usu√°rio e atribuir manualmente qualquer badge, com motivo e confirma√ß√£o.

##### Regras de Neg√≥cio
- RN001: Admin pode buscar usu√°rio por nome, email ou ID
- RN002: Sele√ß√£o de badge a atribuir (dropdown com todas as badges)
- RN003: Campo opcional: motivo da atribui√ß√£o (texto at√© 200 caracteres)
- RN004: Confirma√ß√£o antes de atribuir
- RN005: Valida√ß√£o: n√£o permitir duplica√ß√£o (usu√°rio j√° tem badge)
- RN006: Notifica√ß√£o autom√°tica enviada ao usu√°rio
- RN007: Logs: admin, badge, usu√°rio, data, motivo
- RN008: Admin pode remover badge manualmente (com confirma√ß√£o)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso painel admin "Badges Manuais"
      Quando clico em "Atribuir Badge"
      Ent√£o vejo formul√°rio com campos: usu√°rio, badge, motivo
      
- [ ] Dado que digito "Jo√£o Silva" no campo usu√°rio
      Quando digito
      Ent√£o vejo autocomplete com usu√°rios que correspondem
      
- [ ] Dado que seleciono usu√°rio e badge "Mentor Experiente"
      Quando preencho motivo "Ajudou 15 alunos"
      Ent√£o bot√£o "Atribuir" fica habilitado
      
- [ ] Dado que clico em "Atribuir"
      Quando confirmo
      Ent√£o Jo√£o recebe notifica√ß√£o: "Admin atribuiu badge: Mentor Experiente"
      
- [ ] Dado que tento atribuir badge que usu√°rio j√° tem
      Quando tenta
      Ent√£o vejo erro "Usu√°rio j√° possui esta badge"

##### Prioridade
**M√©dia** - Flexibilidade para casos especiais

##### Complexidade
**M√©dia** - Formul√°rio com autocomplete e valida√ß√µes

##### Depend√™ncias
RF105-RF113 (Sistema de badges)

##### Notas/Observa√ß√µes
- Acesso: apenas admin/moderador (role-based)
- Busca de usu√°rio: autocomplete com query LIKE
- Dropdown de badges: todas as badges ativas
- Campo motivo: texto at√© 200 chars (opcional)
- Valida√ß√£o: CHECK user_id AND badge_id combo (n√£o duplicar)
- Confirma√ß√£o modal antes de inserir
- Notifica√ß√£o autom√°tica: RF112 disparada
- Logs em tabela `badge_manual_assignments`: admin_id, user_id, badge_id, reason, assigned_at
- Remo√ß√£o manual: bot√£o "Remover Badge" em cada user_badge (soft delete com flag removed=true)
- Audit trail completo: quem atribuiu, quando, por qu√™
- Bulk assignment (Fase 2): atribuir mesma badge para m√∫ltiplos usu√°rios via CSV
- Report: admin pode ver badges atribu√≠das manualmente por per√≠odo
- Considerar "verifica√ß√£o de contexto": sugerir motivo baseado em atividade do usu√°rio



#### RF115 - N√≠vel Novato (0-100 pontos)

##### User Story
Como **aluno novo na plataforma**
Quero **ter um n√≠vel "Novato" enquanto estou come√ßando**
Para **ser reconhecido como novo membro e ter expectativas apropriadas**

##### Descri√ß√£o
Primeiro n√≠vel de engajamento atribu√≠do automaticamente a usu√°rios com pontua√ß√£o entre 0-100 pontos, marcando seu in√≠cio na comunidade.

##### Regras de Neg√≥cio
- RN001: Faixa de pontos: 0-100
- RN002: Atribu√≠do automaticamente ao criar conta
- RN003: Status: "Novato" com √≠cone üå± (semente/iniciante)
- RN004: Cor: verde claro (s√≠mbolo de come√ßo)
- RN005: Descri√ß√£o: "Voc√™ est√° come√ßando sua jornada!"
- RN006: Badges sugeridas: "Primeira Conex√£o", "Primeira Thread", "Completar Perfil"
- RN007: Transi√ß√£o: autom√°tica ao atingir 101 pontos (sem a√ß√£o manual)
- RN008: Privil√©gios: sem restri√ß√µes (todos podem usar plataforma normalmente)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que sou novo usu√°rio
      Quando crio conta
      Ent√£o meu n√≠vel √© definido como "Novato"
      
- [ ] Dado que tenho 50 pontos
      Quando visualizo meu perfil
      Ent√£o vejo "N√≠vel: Novato üå±" com √≠cone verde
      
- [ ] Dado que tenho 100 pontos
      Quando visualizo
      Ent√£o ainda vejo "Novato" (faixa 0-100)
      
- [ ] Dado que atinjo 101 pontos
      Quando sistema recalcula
      Ent√£o n√≠vel muda automaticamente para "Colaborador"
      
- [ ] Dado que visualizo p√°gina do n√≠vel
      Quando clico em "Novato"
      Ent√£o vejo descri√ß√£o: "Voc√™ est√° come√ßando sua jornada!"

##### Prioridade
**Alta** - N√≠vel fundamental

##### Complexidade
**Baixa** - Simples faixa de pontos

##### Depend√™ncias
RF103 (Pontos), RF119-RF120 (Visualiza√ß√£o de n√≠veis)

##### Notas/Observa√ß√µes
- Tabela `user_levels`: user_id, level_name, level_tier (1-4), awarded_at, current_points
- N√≠vel_tier: 1=Novato, 2=Colaborador, 3=Conector, 4=Embaixador
- C√°lculo: CASE WHEN points < 101 THEN 'Novato'...
- √çcone: üå± (semente) ou üë∂ (beb√™)
- Cor: #4CAF50 (verde claro)
- Transi√ß√£o autom√°tica: trigger ao UPDATE user_points SET points=101
- Notifica√ß√£o de progresso: "Voc√™ tem X pontos at√© o pr√≥ximo n√≠vel (Colaborador)"
- Badge sugerida: mostrar caminho de crescimento
- Sem privil√©gios especiais (acesso total)
- Considerar "tutorial onboarding" para Novacos (Fase 2)
- Analytics: % de usu√°rios por n√≠vel



#### RF116 - N√≠vel Colaborador (101-500 pontos)

##### User Story
Como **aluno que est√° contribuindo regularmente**
Quero **avan√ßar para n√≠vel "Colaborador" quando atinjo 101 pontos**
Para **ser reconhecido como membro ativo que contribui com qualidade**

##### Descri√ß√£o
Segundo n√≠vel de engajamento para usu√°rios com 101-500 pontos, reconhecendo engajamento regular e contribui√ß√µes consistentes.

##### Regras de Neg√≥cio
- RN001: Faixa de pontos: 101-500
- RN002: Transi√ß√£o autom√°tica ao atingir 101 pontos
- RN003: Status: "Colaborador" com √≠cone üöÄ (crescimento)
- RN004: Cor: azul (s√≠mbolo de progresso)
- RN005: Descri√ß√£o: "Voc√™ √© um membro ativo!"
- RN006: Privil√©gios (Fase 2): criar eventos, destacar threads
- RN007: Badges sugeridas: "Solucionador", "Networker"
- RN008: Transi√ß√£o: autom√°tica ao atingir 501 pontos

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que tenho 101 pontos
      Quando sistema recalcula
      Ent√£o n√≠vel muda para "Colaborador" üöÄ
      
- [ ] Dado que sou Colaborador
      Quando visualizo perfil
      Ent√£o vejo "N√≠vel: Colaborador" com cor azul
      
- [ ] Dado que tenho 250 pontos
      Quando visualizo
      Ent√£o ainda estou no n√≠vel "Colaborador"
      
- [ ] Dado que atinjo 500 pontos
      Quando visualizo
      Ent√£o ainda estou em "Colaborador" (faixa 101-500)
      
- [ ] Dado que alc√ßo 501 pontos
      Quando sistema recalcula
      Ent√£o n√≠vel muda para "Conector"

##### Prioridade
**Alta** - N√≠vel central de engajamento

##### Complexidade
**Baixa** - Faixa simples de pontos

##### Depend√™ncias
RF103 (Pontos), RF115 (Novato), RF119-RF120 (Visualiza√ß√£o)

##### Notas/Observa√ß√µes
- Faixa: 101-500 pontos
- √çcone: üöÄ (foguete/crescimento)
- Cor: #2196F3 (azul)
- Descri√ß√£o: "Voc√™ √© um membro ativo!"
- Transi√ß√£o autom√°tica ao atingir 101 e 501 pontos
- Notifica√ß√£o: "Parab√©ns! Voc√™ alcan√ßou o n√≠vel Colaborador! üöÄ"
- Badges sugeridas: "Solucionador", "Mentor", "Networker"
- Barra de progresso: (pontos_atuais - 101) / (500 - 101) * 100%
- Faixa intermedi√°ria: maior quantidade de usu√°rios neste n√≠vel
- Considerar "benef√≠cio de Colaborador": criar eventos, editar posts (Fase 2)
- Analytics: tempo m√©dio de progress√£o at√© Colaborador



#### RF117 - N√≠vel Conector (501-1000 pontos)

##### User Story
Como **aluno que se tornou l√≠der de comunidade**
Quero **avan√ßar para n√≠vel "Conector" ao atingir 501 pontos**
Para **ser reconhecido como pessoa que conecta e lidera**

##### Descri√ß√£o
Terceiro n√≠vel de engajamento para usu√°rios com 501-1000 pontos, reconhecendo lideran√ßa emergente, networking forte e mentoria.

##### Regras de Neg√≥cio
- RN001: Faixa de pontos: 501-1000
- RN002: Transi√ß√£o autom√°tica ao atingir 501 pontos
- RN003: Status: "Conector" com √≠cone üîó (conectado)
- RN004: Cor: roxo (s√≠mbolo de lideran√ßa/status)
- RN005: Descri√ß√£o: "Voc√™ √© um l√≠der em nossa comunidade!"
- RN006: Privil√©gios (Fase 2): destaque em "Explorar", criar categoria de threads
- RN007: Badges esperadas: "Mentor Ativo", "Embaixador", "Networker"
- RN008: Transi√ß√£o: autom√°tica ao atingir 1001 pontos

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que tenho 501 pontos
      Quando sistema recalcula
      Ent√£o n√≠vel muda para "Conector" üîó
      
- [ ] Dado que sou Conector
      Quando visualizo perfil
      Ent√£o vejo "N√≠vel: Conector" com cor roxo
      
- [ ] Dado que tenho 750 pontos
      Quando visualizo
      Ent√£o barra mostra progresso em dire√ß√£o a "Embaixador"
      
- [ ] Dado que alc√ßo 1000 pontos
      Quando visualizo
      Ent√£o ainda estou em "Conector" (limite superior)
      
- [ ] Dado que alc√ßo 1001 pontos
      Quando sistema recalcula
      Ent√£o n√≠vel muda para "Embaixador"

##### Prioridade
**Alta** - N√≠vel de lideran√ßa

##### Complexidade
**Baixa** - Faixa de pontos

##### Depend√™ncias
RF103 (Pontos), RF116 (Colaborador), RF119-RF120 (Visualiza√ß√£o)

##### Notas/Observa√ß√µes
- Faixa: 501-1000 pontos
- √çcone: üîó (corrente/conex√£o) ou üë• (rede)
- Cor: #9C27B0 (roxo)
- Descri√ß√£o: "Voc√™ √© um l√≠der em nossa comunidade!"
- Transi√ß√£o autom√°tica ao atingir 501 e 1001 pontos
- Notifica√ß√£o: "Excelente! Voc√™ atingiu o n√≠vel Conector! üîó"
- Badges esperadas: "Mentor Ativo", "Embaixador", "Networker"
- Barra de progresso: (pontos_atuais - 501) / (1000 - 501) * 100%
- Perfil destacado em "Explorar" (badge de Conector)
- Faixa raridade: menos usu√°rios neste n√≠vel
- Considerar "crach√° de especialista" por categoria (Fase 2)
- Analytics: distribui√ß√£o de Conectores por universidade



#### RF118 - N√≠vel Embaixador (1000+ pontos)

##### User Story
Como **aluno que alcan√ßou excel√™ncia na comunidade**
Quero **atingir n√≠vel "Embaixador" ao passar de 1000 pontos**
Para **ser reconhecido como figura de proa e maior influ√™ncia**

##### Descri√ß√£o
Quarto e m√°ximo n√≠vel de engajamento para usu√°rios com 1000+ pontos, representando lideran√ßa m√°xima, influ√™ncia e dedica√ß√£o excepcional.

##### Regras de Neg√≥cio
- RN001: Faixa de pontos: 1000+ (sem limite superior)
- RN002: Transi√ß√£o autom√°tica ao atingir 1001 pontos
- RN003: Status: "Embaixador" com √≠cone üëë (coroa)
- RN004: Cor: dourado (s√≠mbolo de prest√≠gio m√°ximo)
- RN005: Descri√ß√£o: "Voc√™ √© um Embaixador de nossa comunidade!"
- RN006: Privil√©gios (Fase 2): modera√ß√£o, destacar threads, criar subcategorias
- RN007: Badges esperadas: "Embaixador Regional/Nacional", "Mentor Experiente", "Network Influencer"
- RN008: Permanente: nunca retrocede de n√≠vel (mesmo com perda de pontos)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que tenho 1001 pontos
      Quando sistema recalcula
      Ent√£o n√≠vel muda para "Embaixador" üëë
      
- [ ] Dado que sou Embaixador
      Quando visualizo perfil
      Ent√£o vejo "N√≠vel: Embaixador" com cor dourada
      
- [ ] Dado que tenho 5000 pontos
      Quando visualizo
      Ent√£o ainda sou "Embaixador" (sem limite superior)
      
- [ ] Dado que perco pontos (de 1500 ‚Üí 950)
      Quando verifico n√≠vel
      Ent√£o ainda sou "Embaixador" (n√£o retrocede)
      
- [ ] Dado que sou Embaixador
      Quando visualizo "Explorar"
      Ent√£o sou destacado com badge de Embaixador

##### Prioridade
**Alta** - N√≠vel m√°ximo de reconhecimento

##### Complexidade
**Baixa** - Faixa de pontos aberta

##### Depend√™ncias
RF103 (Pontos), RF117 (Conector), RF119-RF120 (Visualiza√ß√£o)

##### Notas/Observa√ß√µes
- Faixa: 1000+ pontos (sem limite)
- √çcone: üëë (coroa) ou ‚≠ê (estrela)
- Cor: #FFD700 (dourado)
- Descri√ß√£o: "Voc√™ √© um Embaixador de nossa comunidade!"
- Transi√ß√£o autom√°tica ao atingir 1001 pontos
- Notifica√ß√£o: "üéâ Parab√©ns! Voc√™ atingiu o n√≠vel m√°ximo: Embaixador! üëë"
- Badges esperadas: "Embaixador Regional/Nacional", "Mentor Experiente"
- Perman√™ncia: nunca retrocede (mesmo com perda de pontos)
- Ranking de Embaixadores (opcional): mostrar top 10
- Perfil destaca com destaque em "Explorar" e "Sugest√µes"
- Raro: <1% de usu√°rios deve atingir este n√≠vel
- Privil√©gios (Fase 2): moderador, destacar threads, criar categorias
- Considerar "Conselho de Embaixadores" para feedback (Fase 2)
- Analytics: n√∫mero de Embaixadores, crescimento ao longo do tempo



#### RF119 - Visualiza√ß√£o de n√≠vel atual no perfil

##### User Story
Como **aluno**
Quero **visualizar meu n√≠vel atual de forma clara no meu perfil**
Para **entender onde estou na hierarquia de engajamento**

##### Descri√ß√£o
Exibi√ß√£o prominente do n√≠vel atual no perfil do usu√°rio, mostrando nome do n√≠vel, √≠cone, descri√ß√£o e progresso at√© pr√≥ximo n√≠vel.

##### Regras de Neg√≥cio
- RN001: Posi√ß√£o: se√ß√£o "N√≠vel de Engajamento" no topo do perfil (ap√≥s pontos totais)
- RN002: Exibir: √≠cone, nome do n√≠vel, descri√ß√£o, barra de progresso
- RN003: Cores: espec√≠ficas por n√≠vel (verde, azul, roxo, dourado)
- RN004: Tamanho de √≠cone: 48x48px (grande, bem vis√≠vel)
- RN005: Pr√≥ximo n√≠vel: mostrar qual √© e quantos pontos faltam
- RN006: N√≠vel Embaixador: mostrar "M√°ximo atingido" ao inv√©s de pr√≥ximo
- RN007: Perfis de outros usu√°rios: tamb√©m mostram n√≠vel (p√∫blico)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que visualizo meu perfil
      Quando p√°gina carrega
      Ent√£o vejo se√ß√£o "N√≠vel de Engajamento" no topo
      
- [ ] Dado que sou Colaborador
      Quando vejo n√≠vel
      Ent√£o apare√ßa √≠cone üöÄ, nome "Colaborador", descri√ß√£o e cor azul
      
- [ ] Dado que tenho 250/500 pontos na faixa
      Quando visualizo perfil
      Ent√£o vejo "Faltam 250 pontos para Conector"
      
- [ ] Dado que sou Embaixador
      Quando visualizo n√≠vel
      Ent√£o vejo "N√≠vel M√°ximo Atingido" ao inv√©s de pr√≥ximo
      
- [ ] Dado que visualizo perfil de outro usu√°rio
      Quando vejo
      Ent√£o seu n√≠vel aparece igualmente vis√≠vel

##### Prioridade
**Alta** - Exibi√ß√£o principal de status

##### Complexidade
**Baixa** - Renderiza√ß√£o de informa√ß√µes

##### Depend√™ncias
RF115-RF118 (Todos os n√≠veis), RF103 (Pontos)

##### Notas/Observa√ß√µes
- Se√ß√£o: "N√≠vel de Engajamento" ou "Status"
- Layout: card com √≠cone grande + informa√ß√µes ao lado
- √çcone: 48x48px PNG/SVG
- Cor: espec√≠fica do n√≠vel (verde, azul, roxo, dourado)
- Descri√ß√£o: frase motivacional por n√≠vel
- Pr√≥ximo n√≠vel: "X pontos para [Nome]" em texto menor
- Percentual: barra mostrando % de progresso
- Clique no n√≠vel: abre modal com explica√ß√£o de todos os n√≠veis
- Responsivo: adapta em mobile (√≠cone menor, texto resumido)
- Perfis p√∫blicos: n√≠vel tamb√©m √© vis√≠vel
- Atualiza√ß√£o em tempo real via WebSocket (opcional)
- Badges relacionadas ao n√≠vel abaixo



#### RF120 - Barra de progresso para pr√≥ximo n√≠vel

##### User Story
Como **aluno que quer avan√ßar de n√≠vel**
Quero **visualizar uma barra de progresso mostrando quanto falta**
Para **ser motivado e acompanhar minha evolu√ß√£o**

##### Descri√ß√£o
Barra visual que exibe progresso em dire√ß√£o ao pr√≥ximo n√≠vel, mostrando pontos atuais vs pontos necess√°rios na faixa atual.

##### Regras de Neg√≥cio
- RN001: C√°lculo: (pontos_atuais - limite_inferior) / (limite_superior - limite_inferior) * 100
- RN002: Visualiza√ß√£o: barra horizontal com cores: verde (novo), azul (mid), roxo (alto), ouro (m√°ximo)
- RN003: Exibir: percentual atual (ex: 45%) e pontos (ex: 225/500)
- RN004: Tooltip ao hover: mostra exatamente quantos pontos faltam
- RN005: Anima√ß√£o suave: barra anima ao ganhar pontos (n√£o jump)
- RN006: N√≠vel Embaixador: barra completa (100%) com mensagem "M√°ximo atingido"
- RN007: Atualiza√ß√£o em tempo real quando pontos s√£o ganhos

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que tenho 250 pontos (Colaborador)
      Quando visualizo barra
      Ent√£o vejo progresso: (250-101)/(500-101) = 33% preenchido
      
- [ ] Dado que vejo barra de progresso
      Quando passo mouse
      Ent√£o tooltip mostra "Faltam 250 pontos para Conector"
      
- [ ] Dado que ganho 10 pontos
      Quando barra atualiza
      Ent√£o vejo anima√ß√£o suave do avan√ßo (250 ‚Üí 260)
      
- [ ] Dado que tenho 1001+ pontos (Embaixador)
      Quando visualizo barra
      Ent√£o vejo "100% - N√≠vel M√°ximo Atingido"
      
- [ ] Dado que estou no limite da faixa (500 pontos, Colaborador)
      Quando visualizo barra
      Ent√£o mostra 99.9% (quase completo)

##### Prioridade
**Alta** - Motiva√ß√£o visual

##### Complexidade
**M√©dia** - C√°lculo din√¢mico com anima√ß√£o

##### Depend√™ncias
RF103 (Pontos), RF115-RF118 (N√≠veis), RF119 (Visualiza√ß√£o de n√≠vel)

##### Notas/Observa√ß√µes
- Elemento: `<progress>` HTML5 ou SVG custom
- Altura: 8-12px (discreto mas vis√≠vel)
- Cores por n√≠vel: Verde (Novato), Azul (Colaborador), Roxo (Conector), Dourado (Embaixador)
- C√°lculo: min_pontos = [0, 101, 501, 1001]; max_pontos = [100, 500, 1000, ‚àû]
- F√≥rmula: progress = ((current - min) / (max - min)) * 100
- Anima√ß√£o: transition: width 0.5s ease (suave)
- Tooltip: Popper/Tippy com "Faltam X pontos para [N√≠vel]"
- Atualiza√ß√£o em tempo real: WebSocket ou polling
- Texto abaixo: "XXX/YYY pontos - ZZ% completo"
- Mobile: responsiva, texto adapta
- Considera√ß√µes:
  - Barra nunca deve passar 100% (valida√ß√£o)
  - M√°ximo sempre mostra 100%
  - Anima√ß√£o ao ganhar pontos (visual motivador)
  - Ondas/particles ao atingir novo n√≠vel (Fase 2)
- Analytics: distribui√ß√£o de pontos, velocidade m√©dia de progress√£o