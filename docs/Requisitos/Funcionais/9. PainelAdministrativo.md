### M√ìDULO 9: PAINEL ADMINISTRATIVO

#### RF121 - Upload de CSV com emails dos alunos

##### User Story
Como **administrador ISMART**
Quero **fazer upload de arquivo CSV com emails dos alunos**
Para **convidar m√∫ltiplos alunos de uma s√≥ vez para se cadastrarem**

##### Descri√ß√£o
Interface de upload no painel admin que aceita arquivo CSV contendo emails de alunos, valida o formato, processa os dados e armazena como convites pendentes.

##### Regras de Neg√≥cio
- RN001: Arquivo m√°ximo: 10.000 linhas
- RN002: Arquivo obrigatoriamente em formato CSV (.csv)
- RN003: Encoding obrigat√≥rio: UTF-8
- RN004: Coluna obrigat√≥ria: "email" (case-insensitive)
- RN005: Emails duplicados no arquivo: apenas primeira ocorr√™ncia √© processada
- RN006: Emails j√° cadastrados na plataforma: sinalizados mas n√£o bloqueiam upload
- RN007: Formato de email deve seguir RFC 5322
- RN008: Apenas administradores autenticados podem fazer upload
- RN009: Valida√ß√£o obrigat√≥ria no backend (n√£o confiar s√≥ em frontend)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso painel admin "Gest√£o de Usu√°rios"
      Quando clico em "Upload CSV"
      Ent√£o vejo interface com input de arquivo e instru√ß√µes
      
- [ ] Dado que seleciono arquivo CSV v√°lido com 100 emails
      Quando clico em "Processar"
      Ent√£o sistema valida e exibe: "100 emails a processar"
      
- [ ] Dado que arquivo tem coluna "email" + "nome" (extra)
      Quando processa
      Ent√£o sistema ignora coluna extra e processa apenas emails
      
- [ ] Dado que arquivo tem emails duplicados (ex: user@email.com aparece 2x)
      Quando processa
      Ent√£o apenas primeira ocorr√™ncia √© adicionada, segunda √© ignorada
      
- [ ] Dado que 80 emails s√£o novos e 20 j√° existem
      Quando processamento termina
      Ent√£o vejo: "80 novos | 20 j√° existentes (ignorados)"

##### Prioridade
**Alta** - Porta de entrada para alunos

##### Complexidade
**M√©dia** - Valida√ß√µes robustas e processamento

##### Depend√™ncias
RF001 (Sistema de cadastro)

##### Notas/Observa√ß√µes
- Input file: accept=".csv"
- Biblioteca parsing: Papa Parse (JS) ou pandas (Python)
- Valida√ß√£o: extens√£o, encoding, estrutura
- Limite: 10.000 linhas por upload
- Processamento ass√≠ncrono: n√£o bloquear interface
- Barra de progresso: durante processamento
- Logs detalhados: quantidade processada, ignorada, erro
- Download de template: arquivo exemplo com estrutura correta
- Tratamento de erros: listar linhas com erro (ex: email inv√°lido em linha 45)
- Preven√ß√£o: desabilitar bot√£o durante upload
- Confirma√ß√£o: "Tem certeza? Ser√£o enviados convites para 80 emails"
- Rate limiting: m√°ximo 1 upload a cada 5 minutos (evitar spam)
- Armazenamento tempor√°rio: salvar CSV processado por 7 dias
- Retry: possibilidade de reenvio para emails que falharem



#### RF122 - Envio em massa de c√≥digos de cadastro

##### User Story
Como **administrador ISMART**
Quero **enviar automaticamente c√≥digos de cadastro para os emails processados**
Para **que alunos recebam link e possam se registrar**

##### Descri√ß√£o
Funcionalidade que, ap√≥s upload de CSV, envia automaticamente emails com c√≥digos √∫nicos de cadastro para cada endere√ßo validado.

##### Regras de Neg√≥cio
- RN001: Envio ocorre ap√≥s processamento do CSV (autom√°tico ou manual)
- RN002: Cada email recebe c√≥digo √∫nico alfanum√©rico de 12 caracteres
- RN003: C√≥digo tem validade de 30 dias
- RN004: Taxa de envio: m√°ximo 100 emails por minuto (respeitar limites de SMTP)
- RN005: Tentativas de reenvio: m√°ximo 3 em caso de falha
- RN006: Registro de tentativas: sucesso/falha com timestamp
- RN007: Email deve vir de dom√≠nio confi√°vel: noreply@ismartconecta.org.br
- RN008: Template de email customiz√°vel pelo admin

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que processamento do CSV terminou com 80 novos emails
      Quando clico em "Enviar C√≥digos"
      Ent√£o sistema gera 80 c√≥digos √∫nicos
      
- [ ] Dado que c√≥digos foram gerados
      Quando envio √© iniciado
      Ent√£o sistema enfileira emails e come√ßa envio (m√°x 100/min)
      
- [ ] Dado que email √© enviado com sucesso
      Quando aluno recebe
      Ent√£o cont√©m: c√≥digo, link direto para cadastro, instru√ß√µes
      
- [ ] Dado que envio falha para 5 emails
      Quando sistema detecta falha
      Ent√£o registra erro e tenta reenvio (at√© 3 vezes total)
      
- [ ] Dado que processamento termina
      Quando verifico painel admin
      Ent√£o vejo: "80 enviados | 5 falhando | 0 pendentes"

##### Prioridade
**Alta** - Cr√≠tico para onboarding

##### Complexidade
**Alta** - Integra√ß√£o com servi√ßo SMTP, retry logic, fila

##### Depend√™ncias
RF121 (Upload CSV), RF002 (Envio de email com c√≥digo)

##### Notas/Observa√ß√µes
- Servi√ßo SMTP: SendGrid, AWS SES, Mailgun
- Fila: Redis + job worker (Celery, Bull, etc)
- Taxa: 100 emails/minuto (padr√£o de SMTP)
- C√≥digo: UUID v4 ou random string 12 caracteres
- Validade: 30 dias (stored em banco)
- Retry: exponential backoff (1min, 5min, 15min)
- Template: vari√°veis {CODIGO}, {LINK}, {DATA_EXPIRACAO}
- Webhook: tracking de abertura (opcional)
- Dashboard: mostrar status em tempo real
- Log: tabela email_logs(recipient, code, status, attempt_count, last_attempt_at)
- Possibilidade: pausar/retomar envio
- Fallback: permitir reenvio manual via admin
- Considerar SMS como alternativa (Fase 2)



#### RF123 - Visualizar lista de todos os usu√°rios

##### User Story
Como **administrador ISMART**
Quero **visualizar lista de todos os usu√°rios da plataforma**
Para **gerenciar comunidade e monitorar atividade**

##### Descri√ß√£o
P√°gina no painel admin exibindo lista de todos os usu√°rios cadastrados com informa√ß√µes b√°sicas, status de ativa√ß√£o e a√ß√µes de gerenciamento.

##### Regras de Neg√≥cio
- RN001: Exibir: nome, email, universidade, semestre, status (ativo/inativo), data de cadastro
- RN002: Pagina√ß√£o: 50 usu√°rios por p√°gina
- RN003: Ordena√ß√£o padr√£o: mais recentes primeiro
- RN004: Filtro por status: ativo, inativo, deletado
- RN005: Filtro por universidade: dropdown com todas
- RN006: Busca por nome/email dispon√≠vel
- RN007: A√ß√£o r√°pida: desativar/reativar direto da lista
- RN008: Exportar lista: bot√£o para baixar CSV

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso painel admin "Usu√°rios"
      Quando p√°gina carrega
      Ent√£o vejo tabela com lista de usu√°rios (50 por p√°gina)
      
- [ ] Dado que h√° 250 usu√°rios
      Quando visualizo p√°gina 1
      Ent√£o vejo primeiros 50 com bot√£o "Pr√≥xima p√°gina"
      
- [ ] Dado que filtro por status "Inativo"
      Quando aplico
      Ent√£o vejo apenas usu√°rios desativados
      
- [ ] Dado que busco por "Jo√£o Silva"
      Quando digito
      Ent√£o resultados filtram em tempo real
      
- [ ] Dado que clico em "Desativar" direto da lista
      Quando confirmo
      Ent√£o usu√°rio √© desativado sem abrir novo modal

##### Prioridade
**Alta** - Gest√£o fundamental

##### Complexidade
**M√©dia** - Listagem com filtros e pagina√ß√£o

##### Depend√™ncias
RF003 (Cadastro de usu√°rios)

##### Notas/Observa√ß√µes
- Tabela: users com colunas: id, name, email, university, semester, status, created_at
- Query: SELECT * FROM users WHERE status != 'deleted' ORDER BY created_at DESC LIMIT 50 OFFSET
- Pagina√ß√£o: 50 usu√°rios/p√°gina
- Filtros: status, universidade, data range
- Busca: LIKE no name/email
- Colunas na tabela: checkbox (select m√∫ltiplos), nome, email, universidade, semestre, status (badge), data
- Status badge: Verde (ativo), Vermelho (inativo), Cinza (deletado)
- A√ß√µes: menu dropdown com "Desativar", "Ver Perfil", "Enviar Mensagem", "Exportar Dados"
- Bulk actions: selecionar m√∫ltiplos e desativar em massa
- Responsivo: scroll horizontal em mobile
- Considerar "Visualiza√ß√£o por universidade" (Fase 2)



#### RF124 - Buscar usu√°rio espec√≠fico

##### User Story
Como **administrador ISMART**
Quero **buscar rapidamente um usu√°rio espec√≠fico**
Para **encontrar informa√ß√µes ou tomar a√ß√µes de modera√ß√£o**

##### Descri√ß√£o
Funcionalidade de busca que permite admin encontrar usu√°rio por nome, email ou ID com resultados instant√¢neos em tempo real.

##### Regras de Neg√≥cio
- RN001: Busca case-insensitive
- RN002: Busca em: nome completo, email, ID
- RN003: Termo m√≠nimo: 2 caracteres
- RN004: Resultados em tempo real (debounce 300ms)
- RN005: Limite: m√°ximo 10 resultados por busca
- RN006: Highlight de termo encontrado nos resultados
- RN007: Click em resultado: abre perfil detalhado do usu√°rio

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso painel admin "Usu√°rios"
      Quando clico no campo de busca
      Ent√£o vejo placeholder "Buscar por nome, email ou ID..."
      
- [ ] Dado que digito "J" (1 caractere)
      Quando digito
      Ent√£o vejo mensagem "Digite ao menos 2 caracteres"
      
- [ ] Dado que digito "Jo√£o" (4 caracteres)
      Quando digito
      Ent√£o vejo resultados em tempo real (m√°x 10)
      
- [ ] Dado que h√° "Jo√£o Silva" e "Jo√£o Santos"
      Quando busco "Jo√£o"
      Ent√£o vejo ambos com "Jo√£o" destacado em amarelo
      
- [ ] Dado que clico em resultado
      Quando clico
      Ent√£o sou redirecionado para perfil detalhado do usu√°rio

##### Prioridade
**Alta** - Funcionalidade essencial

##### Complexidade
**M√©dia** - Busca com debounce e highlight

##### Depend√™ncias
RF123 (Lista de usu√°rios)

##### Notas/Observa√ß√µes
- Campo: input com autocomplete
- Debounce: 300ms antes de executar busca
- Query: SELECT * FROM users WHERE (name LIKE ? OR email LIKE ? OR id = ?) AND status != 'deleted' LIMIT 10
- Termo: envolvido em % para LIKE
- Highlight: wrapper com <mark> tag
- √çcone: üîç (lupa)
- Bot√£o limpar: X para resetar busca
- Busca por ID: aceita ID num√©rico direto
- Resultados: mostrar nome, email, universidade
- Navega√ß√£o: seta para cima/baixo + Enter para selecionar (UX)
- Mobile: teclado virtual aparece ao focar
- Analytics: termos mais buscados (monitorar)



#### RF125 - Visualizar detalhes de usu√°rio

##### User Story
Como **administrador ISMART**
Quero **visualizar perfil detalhado de um usu√°rio**
Para **ver todas as informa√ß√µes, hist√≥rico e tomar decis√µes de modera√ß√£o**

##### Descri√ß√£o
P√°gina que exibe perfil completo do usu√°rio com informa√ß√µes pessoais, atividade, pontos, badges, hist√≥rico de a√ß√µes e op√ß√µes administrativas.

##### Regras de Neg√≥cio
- RN001: Exibir: dados pessoais, foto, universidade, curso, semestre, tags, pontos, n√≠vel
- RN002: Se√ß√µes: Perfil, Atividade, Badges, Eventos, Amigos, Den√∫ncias
- RN003: Atividade: √∫ltimas threads, coment√°rios, eventos (√∫ltimos 10)
- RN004: Pontos: total, hist√≥rico de pontua√ß√£o, badges conquistadas
- RN005: Amigos: n√∫mero total e lista de √∫ltimos 10
- RN006: Den√∫ncias: se houver den√∫ncias contra usu√°rio, exibir
- RN007: A√ß√µes: bot√µes desativar/reativar, enviar mensagem, deletar dados

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em usu√°rio na lista
      Quando p√°gina de detalhes carrega
      Ent√£o vejo foto, nome, email, universidade, semestre, tags
      
- [ ] Dado que visualizo se√ß√£o "Atividade"
      Quando vejo
      Ent√£o aparecem √∫ltimas threads, coment√°rios, eventos (10 cada)
      
- [ ] Dado que visualizo se√ß√£o "Badges"
      Quando vejo
      Ent√£o aparecem todas as badges conquistadas
      
- [ ] Dado que usu√°rio tem den√∫ncias
      Quando visualizo p√°gina
      Ent√£o vejo se√ß√£o "Den√∫ncias" com lista de viola√ß√µes
      
- [ ] Dado que clico em "Desativar Usu√°rio"
      Quando confirmo
      Ent√£o usu√°rio √© desativado e vejo "Conta desativada em DD/MM"

##### Prioridade
**Alta** - P√°gina fundamental de admin

##### Complexidade
**M√©dia** - Agrega√ß√£o de m√∫ltiplas se√ß√µes

##### Depend√™ncias
RF010 (Perfil de usu√°rio), RF124 (Buscar usu√°rio)

##### Notas/Observa√ß√µes
- URL: /admin/usuarios/[user_id]
- Tabs/Sections: Perfil, Atividade, Badges, Eventos, Amigos, Den√∫ncias, Hist√≥rico
- Se√ß√£o Perfil: dados b√°sicos, foto, bios, tags, conectados (count)
- Se√ß√£o Atividade: tabela com threads/coment√°rios/eventos (√∫ltimos 10)
- Se√ß√£o Badges: grid com todas as badges conquistadas
- Se√ß√£o Eventos: eventos confirmados + criados
- Se√ß√£o Amigos: top 10 amigos com link
- Se√ß√£o Den√∫ncias: se houver, listar com motivo e status
- Se√ß√£o Hist√≥rico: log de a√ß√µes do admin sobre este usu√°rio
- A√ß√µes: dropdown com "Desativar", "Reativar", "Deletar Dados", "Enviar Mensagem", "Exportar Dados"
- Timeline de pontos: gr√°fico de pontua√ß√£o ao longo do tempo (opcional)
- Breadcrumb: Admin > Usu√°rios > [Nome]
- Responsivo: adapta em mobile



#### RF126 - Desativar conta de usu√°rio

##### User Story
Como **administrador ISMART**
Quero **desativar uma conta de usu√°rio**
Para **suspender acesso em casos de viola√ß√£o ou pedido do aluno**

##### Descri√ß√£o
Funcionalidade que desativa conta de usu√°rio, bloqueando login e ocultando perfil, mantendo dados hist√≥ricos.

##### Regras de Neg√≥cio
- RN001: Desativa√ß√£o marca status='inactive' (soft delete)
- RN002: Usu√°rio n√£o consegue fazer login (erro: "Conta desativada")
- RN003: Perfil fica oculto em listagens p√∫blicas
- RN004: Dados hist√≥ricos mantidos (threads, coment√°rios, eventos)
- RN005: Confirma√ß√£o obrigat√≥ria antes de desativar
- RN006: Campo opcional: motivo da desativa√ß√£o (texto)
- RN007: Notifica√ß√£o por email para usu√°rio (informar desativa√ß√£o)
- RN008: Timestamp registrado: deactivated_at e deactivated_by (admin)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso perfil de usu√°rio
      Quando clico em "Desativar Conta"
      Ent√£o vejo modal de confirma√ß√£o com campo de motivo
      
- [ ] Dado que confirmo desativa√ß√£o
      Quando confirmo
      Ent√£o conta √© desativada e usu√°rio recebe email
      
- [ ] Dado que usu√°rio tenta fazer login
      Quando tenta
      Ent√£o v√™ erro "Sua conta foi desativada. Contate o suporte."
      
- [ ] Dado que perfil foi desativado
      Quando visualizo "Explorar"
      Ent√£o usu√°rio n√£o aparece mais na listagem
      
- [ ] Dado que verifico hist√≥rico do usu√°rio
      Quando vejo
      Ent√£o threads/coment√°rios/eventos ainda aparecem (dados preservados)

##### Prioridade
**Alta** - Modera√ß√£o cr√≠tica

##### Complexidade
**M√©dia** - Soft delete com cascata de efeitos

##### Depend√™ncias
RF125 (Detalhes de usu√°rio)

##### Notas/Observa√ß√µes
- Campo: status ENUM: 'active', 'inactive', 'deleted'
- UPDATE users SET status='inactive', deactivated_at=NOW(), deactivated_by=? WHERE id=?
- Modal: "Tem certeza? O usu√°rio n√£o conseguir√° acessar a conta."
- Campo motivo: opcional, at√© 500 caracteres
- Email: template com assunto "Sua conta foi desativada"
- Notifica√ß√£o in-app: enviada para admin (log de a√ß√£o)
- Logs: tabela `admin_actions`(admin_id, user_id, action, reason, timestamp)
- Dados preservados: threads/coment√°rios n√£o s√£o deletados
- Reativa√ß√£o: poss√≠vel via RF127 (Reativar)
- Considerar "suspens√£o tempor√°ria" (Fase 2)
- Considerar "appeal" para usu√°rio contestar (Fase 2)



#### RF127 - Reativar conta de usu√°rio

##### User Story
Como **administrador ISMART**
Quero **reativar uma conta de usu√°rio desativada**
Para **restaurar acesso caso desativa√ß√£o tenha sido por erro ou ap√≥s resolu√ß√£o**

##### Descri√ß√£o
Funcionalidade que reativa conta desativada, restaurando acesso completo e visibilidade do usu√°rio na plataforma.

##### Regras de Neg√≥cio
- RN001: Reativa√ß√£o marca status='active'
- RN002: Usu√°rio recupera acesso completo imediatamente
- RN003: Perfil volta a aparecer em listagens
- RN004: Confirma√ß√£o obrigat√≥ria antes de reativar
- RN005: Campo opcional: motivo da reativa√ß√£o
- RN006: Notifica√ß√£o por email: "Sua conta foi reativada"
- RN007: Timestamp registrado: reactivated_at e reactivated_by (admin)
- RN008: Sem limite de reativa√ß√µes (pode reativar m√∫ltiplas vezes)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que usu√°rio est√° desativado (status='inactive')
      Quando acesso seu perfil
      Ent√£o vejo bot√£o "Reativar Conta"
      
- [ ] Dado que clico em "Reativar Conta"
      Quando confirmo
      Ent√£o status muda para 'active' e usu√°rio recebe notifica√ß√£o
      
- [ ] Dado que usu√°rio foi reativado
      Quando tenta fazer login
      Ent√£o consegue acessar normalmente
      
- [ ] Dado que perfil foi reativado
      Quando visualizo "Explorar"
      Ent√£o usu√°rio aparece novamente na listagem
      
- [ ] Dado que verifico hist√≥rico do usu√°rio
      Quando vejo
      Ent√£o log mostra "Reativado em DD/MM/YYYY por [Admin]"

##### Prioridade
**Alta** - Revers√£o de modera√ß√£o

##### Complexidade
**Baixa** - Simples UPDATE de status

##### Depend√™ncias
RF126 (Desativar usu√°rio)

##### Notas/Observa√ß√µes
- Campo: status='active'
- UPDATE users SET status='active', reactivated_at=NOW(), reactivated_by=? WHERE id=?
- Modal: "Tem certeza? O usu√°rio recuperar√° acesso completo."
- Campo motivo: opcional, at√© 500 caracteres
- Email: template informando reativa√ß√£o
- Notifica√ß√£o: enviada para admin (log de a√ß√£o)
- Logs: tabela `admin_actions` registra reativa√ß√£o
- Acesso: restaurado completamente
- Dados: preservados (nada √© perdido)
- Sem restri√ß√£o: pode ser reativado ilimitadamente
- Considerar "per√≠odo de reativa√ß√£o" (Fase 2)
- Analytics: raz√µes mais comuns de reativa√ß√£o



#### RF128 - Exportar lista de usu√°rios (CSV)

##### User Story
Como **administrador ISMART**
Quero **exportar lista de usu√°rios em CSV**
Para **fazer an√°lises externas e backup de dados**

##### Descri√ß√£o
Funcionalidade que permite download de lista de usu√°rios em formato CSV com filtros aplicados, pronta para an√°lise em Excel/Google Sheets.

##### Regras de Neg√≥cio
- RN001: Exportar apenas usu√°rios que atendem filtros aplicados (status, universidade, etc)
- RN002: Colunas: ID, Nome, Email, Universidade, Semestre, Curso, Status, Pontos, N√≠vel, Data Cadastro
- RN003: M√°ximo: 10.000 linhas por arquivo (se mais, gerar m√∫ltiplos)
- RN004: Encoding: UTF-8
- RN005: Quebra de linha: CRLF (compat√≠vel com Excel)
- RN006: Nome do arquivo: usuarios_YYYY-MM-DD_HH-MM-SS.csv
- RN007: Apenas admin pode exportar
- RN008: Log: registrar exports para auditoria

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso lista de usu√°rios
      Quando clico em "Exportar CSV"
      Ent√£o download √© iniciado com arquivo usuarios_YYYY-MM-DD.csv
      
- [ ] Dado que tenho filtros aplicados (status='active', universidade='USP')
      Quando exporto
      Ent√£o arquivo cont√©m apenas usu√°rios ativos da USP
      
- [ ] Dado que h√° 250 usu√°rios para exportar
      Quando abro arquivo no Excel
      Ent√£o todas 250 linhas + header (251 total) est√£o presentes
      
- [ ] Dado que exporto usu√°rios
      Quando abro arquivo em Google Sheets
      Ent√£o caracteres especiais aparecem corretamente (UTF-8)
      
- [ ] Dado que sou admin
      Quando verifico logs de admin
      Ent√£o vejo registro: "CSV exportado - 250 usu√°rios em DD/MM/YYYY HH:MM"

##### Prioridade
**M√©dia** - Funcionalidade de suporte

##### Complexidade
**M√©dia** - Gera√ß√£o e formata√ß√£o de CSV

##### Depend√™ncias
RF123 (Lista de usu√°rios)

##### Notas/Observa√ß√µes
- Biblioteca: Papa Parse (JS), csv (Python), ou native
- Colunas: id, name, email, university, semester, course, status, points, level, created_at
- Filtros: aplicar mesmos WHERE do listview (status, universidade, etc)
- Ordena√ß√£o: por created_at DESC (mais recentes primeiro)
- Limite: m√°ximo 10.000 linhas por arquivo
- Se >10.000: gerar m√∫ltiplos arquivos (usuarios_1.csv, usuarios_2.csv, etc)
- Encoding: UTF-8 com BOM (bom compat√≠vel com Excel)
- Quebra: CRLF (\r\n)
- Delimitador: v√≠rgula (,)
- Aspas: campos com v√≠rgula envolvidos em aspas
- Nome arquivo: usuarios_2025-01-15_14-30-45.csv (timestamp)
- Gera√ß√£o: job ass√≠ncrono (n√£o bloquear interface)
- Barra de progresso: durante gera√ß√£o
- Notifica√ß√£o: quando arquivo est√° pronto para download
- Logs: tabela `admin_exports`(admin_id, filters, row_count, timestamp)
- Considera√ß√µes:
  - Dados sens√≠veis: emails n√£o s√£o mascarados (apenas admin v√™)
  - Reten√ß√£o: arquivo deletado ap√≥s 24h (LGPD)
  - Backup: administrador pode fazer download novamente
- Considerar "agendamento de exporta√ß√£o" (Fase 2)



#### RF129 - Fila de den√∫ncias pendentes

##### User Story
Como **moderador**
Quero **visualizar todas as den√∫ncias pendentes em uma fila ordenada**
Para **priorizar e agilizar o processamento de conte√∫do denunciado**

##### Descri√ß√£o
Dashboard de modera√ß√£o exibindo den√∫ncias pendentes com filtros, ordena√ß√£o por data/prioridade e status de processamento. Permite vis√£o consolidada do trabalho a fazer.

##### Regras de Neg√≥cio
- RN001: Apenas moderadores e admins veem a fila
- RN002: Fila exibe apenas den√∫ncias com status "pending"
- RN003: Ordena√ß√£o padr√£o: mais recentes primeiro
- RN004: Contador de den√∫ncias pendentes em tempo real
- RN005: Den√∫ncias duplicadas agrupadas automaticamente
- RN006: Limite m√°ximo: exibir 50 por p√°gina (pagina√ß√£o)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso painel de modera√ß√£o
      Quando carrego a fila
      Ent√£o vejo todas as den√∫ncias com status "pending" ordenadas por rec√™ncia
      
- [ ] Dado que existem 150 den√∫ncias pendentes
      Quando visualizo a fila
      Ent√£o vejo primeiras 50 com bot√£o "Pr√≥xima p√°gina"
      
- [ ] Dado que existem den√∫ncias sobre mesmo conte√∫do
      Quando fila carrega
      Ent√£o den√∫ncias duplicadas s√£o agrupadas com contador (ex: "3 den√∫ncias")
      
- [ ] Dado que nova den√∫ncia chega
      Quando sistema processa
      Ent√£o contador atualiza automaticamente (+1)
      
- [ ] Dado que filtro por "Spam"
      Quando aplico
      Ent√£o vejo apenas den√∫ncias com tipo "Spam"

##### Prioridade
**Alta** - Porta de entrada do fluxo de modera√ß√£o

##### Complexidade
**M√©dia** - Agrega√ß√£o de dados com pagina√ß√£o

##### Depend√™ncias
RF130 (Visualizar detalhes)

##### Notas/Observa√ß√µes
- Tabela `reports`: id, reported_content_id, content_type (thread/comment), reason, status, created_at
- Tabela `report_duplicates`: report_id, duplicate_of_id (para agrupar)
- Websocket para notifica√ß√£o em tempo real de novas den√∫ncias
- Considerar alertas visuais para den√∫ncias cr√≠ticas (ex: conte√∫do sexual)
- Cards resumidos na fila com preview do conte√∫do denunciado
- Badge de "urg√™ncia" baseado em quantidade de den√∫ncias similares



#### RF130 - Visualizar detalhes da den√∫ncia

##### User Story
Como **moderador**
Quero **ver detalhes completos de uma den√∫ncia (quem reportou, motivo, data, conte√∫do)**
Para **avaliar melhor se a√ß√£o de modera√ß√£o √© necess√°ria**

##### Descri√ß√£o
Modal/p√°gina detalhada mostrando todas informa√ß√µes da den√∫ncia: denunciante, conte√∫do denunciado com contexto, motivo, timestamp, hist√≥rico de den√∫ncias similares do mesmo usu√°rio.

##### Regras de Neg√≥cio
- RN001: Apenas moderadores veem identidade do denunciante
- RN002: Conte√∫do denunciado exibido com contexto (thread/coment√°rio anterior)
- RN003: Hist√≥rico: mostrar se mesmo usu√°rio foi denunciado antes
- RN004: Motivo da den√∫ncia deve ser expl√≠cito e categorizado
- RN005: Informa√ß√µes do denunciado (autor do conte√∫do) em abas separadas

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em uma den√∫ncia da fila
      Quando detalhe carrega
      Ent√£o vejo: quem denunciou, motivo, data, conte√∫do denunciado, hist√≥rico do autor
      
- [ ] Dado que conte√∫do denunciado √© coment√°rio
      Quando visualizo
      Ent√£o vejo o coment√°rio + thread de contexto acima
      
- [ ] Dado que autor do conte√∫do teve 5 den√∫ncias anteriores
      Quando visualizo abas
      Ent√£o vejo "5 den√∫ncias anteriores" com link para hist√≥rico
      
- [ ] Dado que clico em "Ver perfil do denunciado"
      Quando modal abre
      Ent√£o vejo estat√≠sticas, reputa√ß√£o, threads/coment√°rios recentes do usu√°rio
      
- [ ] Dado que existo m√∫ltiplas den√∫ncias para mesmo conte√∫do
      Quando visualizo detalhe
      Ent√£o vejo "3 usu√°rios reportaram este conte√∫do"

##### Prioridade
**Alta** - Essencial para tomada de decis√£o

##### Complexidade
**M√©dia** - Join de m√∫ltiplas tabelas com hist√≥rico

##### Depend√™ncias
RF129 (Fila de den√∫ncias)

##### Notas/Observa√ß√µes
- Painel com 3 abas: Den√∫ncia | Conte√∫do | Perfil do Denunciado
- Aba "Conte√∫do": exibir com formata√ß√£o original (links, imagens, etc)
- Aba "Perfil": pontua√ß√£o, n√∫mero de threads/coment√°rios, avisos anteriores
- Timeline visual de a√ß√µes passadas do usu√°rio reportado
- Bot√µes de a√ß√£o na modal: Aprovar | Rejeitar | Precisar de mais tempo



#### RF131 - Aprovar den√∫ncia

##### User Story
Como **moderador**
Quero **aprovar uma den√∫ncia e marcar como v√°lida**
Para **iniciar o processo de remo√ß√£o de conte√∫do ou a√ß√£o contra usu√°rio**

##### Descri√ß√£o
A√ß√£o que marca den√∫ncia como aprovada, mudando status para "approved" e habilitando pr√≥ximas a√ß√µes (remover conte√∫do, avisar usu√°rio, banir).

##### Regras de Neg√≥cio
- RN001: Apenas moderadores aprovam den√∫ncias
- RN002: Aprova√ß√£o muda status de "pending" para "approved"
- RN003: Data/hora de aprova√ß√£o registrada com ID do moderador
- RN004: Aprova√ß√£o autom√°tica desencadeia RF133 se configured (remover conte√∫do)
- RN005: Notifica√ß√£o ao denunciante confirmando a√ß√£o

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que visualizo den√∫ncia v√°lida
      Quando clico em "Aprovar"
      Ent√£o status muda para "approved" e fecha modal
      
- [ ] Dado que den√∫ncia √© aprovada
      Quando verifico na fila
      Ent√£o den√∫ncia desaparece (apenas "pending" mostradas)
      
- [ ] Dado que den√∫ncia √© aprovada
      Quando verifico hist√≥rico de modera√ß√µes
      Ent√£o a√ß√£o fica registrada com timestamp e moderador
      
- [ ] Dado que den√∫ncia √© aprovada
      Quando acesso hist√≥rico do usu√°rio denunciado
      Ent√£o avisos anteriores s√£o contabilizados (+1 den√∫ncia confirmada)
      
- [ ] Dado que clico em "Aprovar"
      Quando requisi√ß√£o √© enviada
      Ent√£o pr√≥ximas a√ß√µes s√£o habilitadas (remover conte√∫do, punir usu√°rio)

##### Prioridade
**Alta** - Core do fluxo de modera√ß√£o

##### Complexidade
**Baixa** - Atualizar status e registrar

##### Depend√™ncias
RF130 (Visualizar), RF133 (Remover conte√∫do)

##### Notas/Observa√ß√µes
- Query: UPDATE reports SET status='approved', approved_by=?, approved_at=NOW() WHERE id=?
- Log completo: quem aprovou, quando, qual den√∫ncia
- Pode gerar notifica√ß√£o autom√°tica ao autor do conte√∫do: "Seu conte√∫do foi removido"
- Considerar integra√ß√£o com RF100 para reverter pontos se aplic√°vel



#### RF132 - Rejeitar den√∫ncia

##### User Story
Como **moderador**
Quero **rejeitar uma den√∫ncia inv√°lida**
Para **arquivar caso e notificar que conte√∫do √© permitido**

##### Descri√ß√£o
A√ß√£o que marca den√∫ncia como rejeitada (falsa den√∫ncia/mal-entendido), registrando raz√£o da rejei√ß√£o e notificando denunciante de forma discreta.

##### Regras de Neg√≥cio
- RN001: Apenas moderadores rejeitam
- RN002: Rejei√ß√£o requer motivo (dropdown: "Sem viola√ß√£o", "Fora de contexto", "Outro")
- RN003: Status muda para "rejected"
- RN004: Notifica√ß√£o ao denunciante (discreta, sem expor detalhes)
- RN005: M√∫ltiplas rejei√ß√µes de mesmo usu√°rio podem gerar aviso "den√∫ncias frequentes inv√°lidas"

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que visualizo den√∫ncia claramente inv√°lida
      Quando clico em "Rejeitar"
      Ent√£o vejo dropdown com motivos pr√©-definidos
      
- [ ] Dado que seleciono motivo
      Quando clico em "Confirmar rejei√ß√£o"
      Ent√£o den√∫ncia sai da fila e status = "rejected"
      
- [ ] Dado que den√∫ncia √© rejeitada
      Quando denunciante consulta hist√≥rico
      Ent√£o v√™ mensagem gen√©rica "An√°lise conclu√≠da" (sem expor rejei√ß√£o)
      
- [ ] Dado que mesmo usu√°rio j√° teve 5 den√∫ncias rejeitadas
      Quando envia 6¬™ den√∫ncia
      Ent√£o sistema gera aviso: "Este usu√°rio possui hist√≥rico de den√∫ncias inv√°lidas"
      
- [ ] Dado que clico em "Rejeitar"
      Quando requisi√ß√£o processa
      Ent√£o conte√∫do denunciado permanece vis√≠vel

##### Prioridade
**Alta** - Complementa aprova√ß√£o

##### Complexidade
**Baixa** - Atualizar status com motivo

##### Depend√™ncias
RF130 (Visualizar)

##### Notas/Observa√ß√µes
- Tabela `reports`: add coluna rejection_reason (enum)
- Log para an√°lise: quantas rejei√ß√µes por usu√°rio denunciante
- Mensagem ao denunciante: notifica√ß√£o gen√©rica no Centro de Notifica√ß√µes
- Considerar "Segunda opini√£o" para den√∫ncias de usu√°rios com baixa taxa de acertos



#### RF133 - Remover conte√∫do denunciado (thread/coment√°rio)

##### User Story
Como **moderador**
Quero **remover thread ou coment√°rio denunciado ap√≥s aprova√ß√£o**
Para **impedir visualiza√ß√£o de conte√∫do violador e punir comportamento**

##### Descri√ß√£o
Ap√≥s aprovar den√∫ncia, remover conte√∫do usando soft delete (thread/coment√°rio marca como "[Removido por modera√ß√£o]") com op√ß√£o de hard delete para casos extremos.

##### Regras de Neg√≥cio
- RN001: Apenas moderadores removem conte√∫do
- RN002: Soft delete padr√£o: mostra "[Conte√∫do removido por viola√ß√£o de diretrizes]"
- RN003: Hard delete dispon√≠vel apenas para admins (conte√∫do extremo)
- RN004: Remover thread remove todos coment√°rios associados (cascata)
- RN005: Remover coment√°rio N√ÉO afeta thread pai
- RN006: Hist√≥rico de remo√ß√£o registrado com moderador + motivo

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que aprovet den√∫ncia de coment√°rio spam
      Quando clico em "Remover conte√∫do"
      Ent√£o coment√°rio substitui por "[Coment√°rio removido por modera√ß√£o]"
      
- [ ] Dado que removo thread
      Quando verifico f√≥rum
      Ent√£o thread inteira desaparece (soft delete) e n√£o aparece em busca
      
- [ ] Dado que removo thread com 20 coment√°rios
      Quando remo√ß√£o processa
      Ent√£o todos os 20 coment√°rios s√£o marcados como removidos
      
- [ ] Dado que sou admin
      Quando visualizo conte√∫do removido
      Ent√£o vejo texto original para auditoria
      
- [ ] Dado que conte√∫do √© removido
      Quando verifico logs de modera√ß√£o
      Ent√£o registro mostra: moderador, data, motivo, tipo de conte√∫do

##### Prioridade
**Alta** - A√ß√£o punitiva principal

##### Complexidade
**M√©dia** - Cascata com soft delete

##### Depend√™ncias
RF131 (Aprovar den√∫ncia), RF029 (Deletar coment√°rio), RF028 (Deletar thread)

##### Notas/Observa√ß√µes
- Tabela `threads`: soft_deleted_by, soft_deleted_at, removal_reason
- Tabela `comments`: soft_deleted_by, soft_deleted_at
- Hard delete apenas para admins: DELETE (n√£o UPDATE)
- Considerar revers√£o: restaurar conte√∫do se den√∫ncia for contestada
- Mensagem ao autor: "[Seu conte√∫do foi removido por violar as diretrizes]" com link para diretrizes
- Upvotes/pontos revertidos quando conte√∫do removido
- Notifica√ß√£o em tempo real para denunciante: "Obrigado! A√ß√£o foi tomada"



#### RF134 - Advertir usu√°rio

##### User Story
Como **moderador**
Quero **enviar advert√™ncia ao usu√°rio denunciado**
Para **alertar sobre viola√ß√£o e evitar escala√ß√£o para banimento**

##### Descri√ß√£o
Notifica√ß√£o formal ao usu√°rio informando viola√ß√£o das diretrizes, com contador de advert√™ncias. 3 advert√™ncias = acesso a banimento autom√°tico ou manual.

##### Regras de Neg√≥cio
- RN001: Apenas moderadores enviam advert√™ncias
- RN002: Advert√™ncia gera notifica√ß√£o no Centro de Notifica√ß√µes do usu√°rio
- RN003: Hist√≥rico de advert√™ncias permanente no perfil (apenas moderadores veem)
- RN004: 3 advert√™ncias em 90 dias = eleg√≠vel para banimento
- RN005: Contador de advert√™ncias reseta ap√≥s 90 dias sem novas viola√ß√µes
- RN006: Mensagem de advert√™ncia personaliz√°vel (template base + motivo espec√≠fico)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em "Advertir usu√°rio" no detalhe den√∫ncia
      Quando redijo mensagem
      Ent√£o vejo template pr√©-preenchido personaliz√°vel
      
- [ ] Dado que confirmo advert√™ncia
      Quando processa
      Ent√£o usu√°rio recebe notifica√ß√£o: "Voc√™ recebeu uma advert√™ncia"
      
- [ ] Dado que usu√°rio recebe 3¬™ advert√™ncia
      Quando sistema registra
      Ent√£o status muda para "eleg√≠vel para banimento" (flag no perfil)
      
- [ ] Dado que sou moderador
      Quando visualizo perfil do usu√°rio
      Ent√£o vejo contador: "2/3 advert√™ncias"
      
- [ ] Dado que √∫ltima advert√™ncia foi h√° 100 dias
      Quando verifico contador
      Ent√£o sistema reseta contador para 0 (per√≠odo 90 dias expirado)

##### Prioridade
**M√©dia** - Escala√ß√£o gradual importante

##### Complexidade
**M√©dia** - L√≥gica de contador com timing

##### Depend√™ncias
RF131 (Aprovar den√∫ncia)

##### Notas/Observa√ß√µes
- Tabela `user_warnings`: user_id, warning_count, last_warning_date, reason
- Notifica√ß√£o: link para "Diretrizes da comunidade" + motivo espec√≠fico
- Admin pode ver hist√≥rico completo: 5 advert√™ncias recebidas X 3 confirmadas
- Mensagem padr√£o + campo para detalhe personalizado
- Timestamp de cada advert√™ncia rastreado
- Considerar webhook para integra√ß√£o com sistema de confian√ßa de usu√°rio



#### RF135 - Banir usu√°rio temporariamente

##### User Story
Como **moderador**
Quero **banir usu√°rio temporariamente (7-30 dias)**
Para **impedir acesso √† plataforma sem perda permanente de dados**

##### Descri√ß√£o
Suspens√£o tempor√°ria de usu√°rio com dura√ß√£o configur√°vel (7, 14, 30 dias). Usu√°rio n√£o pode fazer login, threads/coment√°rios ficam ocultos, conta √© restaurada ap√≥s per√≠odo.

##### Regras de Neg√≥cio
- RN001: Apenas moderadores aplicam banimento tempor√°rio
- RN002: Dura√ß√£o: 7, 14 ou 30 dias (dropdown)
- RN003: Motivo obrigat√≥rio
- RN004: Usu√°rio banido N√ÉO pode fazer login (erro "Conta suspensa")
- RN005: Threads/coment√°rios do usu√°rio ficam ocultos durante banimento
- RN006: Ap√≥s expira√ß√£o autom√°tica, acesso restaurado
- RN007: Moderador pode remover banimento antes do prazo (revoga√ß√£o)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em "Banir temporariamente"
      Quando seleciono dura√ß√£o (ex: 14 dias)
      Ent√£o vejo tela de confirma√ß√£o com motivo obrigat√≥rio
      
- [ ] Dado que banimento √© aplicado
      Quando usu√°rio tenta fazer login
      Ent√£o v√™: "Sua conta foi suspensa at√© [data]. Motivo: [raz√£o]"
      
- [ ] Dado que usu√°rio est√° banido
      Quando outro acessa threads dele
      Ent√£o v√™ "[Conte√∫do de usu√°rio suspenso]"
      
- [ ] Dado que banimento expira
      Quando data chega
      Ent√£o acesso √© restaurado automaticamente (sem a√ß√£o manual)
      
- [ ] Dado que sou moderador e banimento ainda √© v√°lido
      Quando clico em "Revogar banimento"
      Ent√£o usu√°rio recupera acesso imediatamente

##### Prioridade
**Alta** - Escala√ß√£o cr√≠tica

##### Complexidade
**M√©dia** - L√≥gica temporal com jobs agendados

##### Depend√™ncias
RF134 (Advertir)

##### Notas/Observa√ß√µes
- Tabela `user_bans`: user_id, banned_until, banned_by, reason, status (active/revoked)
- Job agendado: verificar diariamente bans com data expirada e restaurar
- Notifica√ß√£o ao usu√°rio: "Voc√™ foi banido. Apele em [link]" (considerar appeals em fase 2)
- Threads/coment√°rios: filtro WHERE banned_until IS NULL OR banned_until < NOW()
- Logs completos: quem baniu, quando, por quanto tempo
- Considerar "banimento com aviso previo" (notificar 24h antes se poss√≠vel)



#### RF136 - Banir usu√°rio permanentemente

##### User Story
Como **administrador**
Quero **banir usu√°rio permanentemente**
Para **remover usu√°rios que representam amea√ßa cont√≠nua ou viola√ß√µes graves**

##### Descri√ß√£o
Exclus√£o de conta com remo√ß√£o ou reten√ß√£o de conte√∫do. Usu√°rio n√£o pode criar nova conta com mesmo email. Apenas admins aplicam.

##### Regras de Neg√≥cio
- RN001: Apenas admins aplicam banimento permanente
- RN002: Motivo obrigat√≥rio (dropdown: "Spam", "Ass√©dio", "Conte√∫do proibido", "Outro")
- RN003: Usu√°rio n√£o pode fazer login (conta desativada)
- RN004: Email adicionado a lista de bloqueio (n√£o pode cadastrar com mesmo email)
- RN005: Op√ß√£o: remover conte√∫do (hard delete) ou arquivar
- RN006: Moderadores veem hist√≥rico mas n√£o podem fazer logout de admin banido
- RN007: Auditoria completa com justificativa

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que sou admin
      Quando clico em "Banir permanentemente"
      Ent√£o vejo 2 op√ß√µes: "Arquivar conte√∫do" ou "Remover conte√∫do"
      
- [ ] Dado que confirmo banimento permanente
      Quando processa
      Ent√£o usu√°rio n√£o consegue fazer login, email bloqueado
      
- [ ] Dado que tenta criar nova conta com mesmo email
      Quando submete formul√°rio
      Ent√£o v√™: "Este email foi bloqueado"
      
- [ ] Dado que escolho "Arquivar conte√∫do"
      Quando banimento aplica
      Ent√£o threads/coment√°rios permanecem mas marcados como "[Autor banido]"
      
- [ ] Dado que sou admin
      Quando visualizo hist√≥rico de banimentos
      Ent√£o vejo: admin que banniu, motivo, data, tipo de banimento

##### Prioridade
**Alta** - A√ß√£o mais severa

##### Complexidade
**M√©dia** - Desativa√ß√£o de conta com cascata

##### Depend√™ncias
RF135 (Banir temporariamente)

##### Notas/Observa√ß√µes
- Tabela `user_bans`: add coluna is_permanent (boolean)
- Tabela `blocked_emails`: email, banned_at, reason, blocked_by
- Conta: status = 'banned_permanent'
- Op√ß√£o revers√≠vel: apenas admin pode restaurar (Fase 2: appeals)
- Requer confirma√ß√£o dupla (2FA de admin)
- Notifica√ß√£o ao usu√°rio: "Sua conta foi permanentemente encerrada"
- Considerar "per√≠odo de reflex√£o" antes de hard delete (7 dias, depois delete autom√°tico)



#### RF137 - Hist√≥rico de modera√ß√µes por usu√°rio

##### User Story
Como **moderador ou admin**
Quero **visualizar todas as a√ß√µes de modera√ß√£o de um usu√°rio espec√≠fico**
Para **entender padr√£o de viola√ß√µes e tomar decis√µes informadas**

##### Descri√ß√£o
Dashboard que mostra hist√≥rico completo de modera√ß√µes de um usu√°rio: avisos, bans, remov√ß√µes, com cronologia e contexto.

##### Regras de Neg√≥cio
- RN001: Apenas moderadores veem (pr√≥prias a√ß√µes) e admins veem todas
- RN002: Exibir: advert√™ncias, banimentos, remov√ß√µes de conte√∫do, data, motivo, moderador respons√°vel
- RN003: Historiador mant√©m registro mesmo ap√≥s banimento ou remo√ß√£o de conta
- RN004: Revers√µes de a√ß√£o aparecem no hist√≥rico
- RN005: Sem limite de tempo (hist√≥rico permanente)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico no perfil de um usu√°rio
      Quando acesso aba "Hist√≥rico de Modera√ß√£o"
      Ent√£o vejo lista cronol√≥gica: advert√™ncia | banimento | remo√ß√£o (com datas)
      
- [ ] Dado que usu√°rio recebeu 3 advert√™ncias
      Quando visualizo hist√≥rico
      Ent√£o vejo todas 3 com motivos espec√≠ficos
      
- [ ] Dado que usu√°rio foi banido e depois desbanido
      Quando vejo hist√≥rico
      Ent√£o ambas a√ß√µes aparecem: "Banido por 14 dias" + "Banimento revogado"
      
- [ ] Dado que clico em uma a√ß√£o
      Quando modal abre
      Ent√£o vejo: moderador respons√°vel, data exata, motivo completo, conte√∫do afetado
      
- [ ] Dado que sou admin
      Quando acesso hist√≥rico
      Ent√£o vejo nome do moderador que aplicou cada a√ß√£o

##### Prioridade
**M√©dia** - Suporte a decis√µes

##### Complexidade
**Baixa** - Query com join simples

##### Depend√™ncias
RF131-RF136 (Todas a√ß√µes de modera√ß√£o)

##### Notas/Observa√ß√µes
- Query: SELECT * FROM user_actions WHERE user_id=? ORDER BY created_at DESC
- Tabela √∫nica: `moderation_actions` com tipo (warning/ban/removal) e status
- Timeline visual: linha horizontal com eventos
- Filtros: tipo de a√ß√£o, data range, moderador
- Consideraran√°lise de padr√£o: "Usu√°rio recebeu 5 remov√ß√µes em 30 dias - poss√≠vel infrator serial"



#### RF138 - Hist√≥rico completo de todas as modera√ß√µes

##### User Story
Como **admin**
Quero **acessar auditoria completa de todas as a√ß√µes de modera√ß√£o da plataforma**
Para **monitorar qualidade do trabalho de moderadores e detectar abusos**

##### Descri√ß√£o
Dashboard de auditoria com todas as modera√ß√µes realizadas: quem moderou, quando, qual a√ß√£o, resultado. Export√°vel para an√°lise e compliance.

##### Regras de Neg√≥cio
- RN001: Apenas admins acessam (n√£o moderadores)
- RN002: Exibir: moderador, a√ß√£o, usu√°rio afetado, data, resultado (aprovado/rejeitado/suspenso)
- RN003: Filtros: data range, tipo a√ß√£o, moderador, usu√°rio afetado
- RN004: Ordena√ß√£o: mais recentes primeiro (default)
- RN005: Exportar para CSV com todos os dados
- RN006: Sem limite de registros (pagina√ß√£o obrigat√≥ria)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que sou admin
      Quando acesso "Auditoria de Modera√ß√£o"
      Ent√£o vejo lista de TODAS modera√ß√µes com pagina√ß√£o (50/p√°gina)
      
- [ ] Dado que filtro por "Jo√£o" (moderador)
      Quando aplico
      Ent√£o vejo apenas a√ß√µes realizadas por Jo√£o
      
- [ ] Dado que filtro por data "01/10 - 15/10"
      Quando aplico
      Ent√£o vejo apenas modera√ß√µes desse per√≠odo
      
- [ ] Dado que clico em "Exportar CSV"
      Quando download inicia
      Ent√£o recebo arquivo com todas colunas: moderador, a√ß√£o, usu√°rio, data, motivo, resultado
      
- [ ] Dado que visualizo linha de modera√ß√£o
      Quando clico
      Ent√£o vejo detalhe completo: conte√∫do original, den√∫ncia, decis√£o

##### Prioridade
**M√©dia** - Compliance e auditoria

##### Complexidade
**M√©dia** - Query agregada com m√∫ltiplos filtros

##### Depend√™ncias
RF131-RF137 (Todas modera√ß√µes)

##### Notas/Observa√ß√µes
- Tabela `moderation_log`: id, moderator_id, action_type, affected_user_id, report_id, action_date, result, notes
- Query com JOIN de m√∫ltiplas tabelas (reports, users, warnings, bans)
- √çndices em moderator_id, action_date, affected_user_id
- Busca full-text: por motivo ou conte√∫do
- Gr√°ficos: a√ß√µes por moderador, tipos mais comuns, usu√°rios mais denunciados
- Alertas autom√°ticos: "Moderador Jo√£o fez 200 a√ß√µes em 1 dia" (poss√≠vel abuso)
- Considerarappeals/contesta√ß√µes em fase 2 (adicionar coluna result_challenged)



#### RF139 - M√©trica: Total de usu√°rios cadastrados

##### User Story
Como **admin**
Quero **visualizar o total de usu√°rios cadastrados na plataforma**
Para **entender o crescimento e penetra√ß√£o da base de usu√°rios**

##### Descri√ß√£o
Card exibindo n√∫mero total de usu√°rios cadastrados desde o in√≠cio, com compara√ß√£o per√≠odo anterior e tend√™ncia (crescimento/redu√ß√£o).

##### Regras de Neg√≥cio
- RN001: Contar apenas usu√°rios com status "active" ou "pending_email_verification"
- RN002: N√£o contar usu√°rios com status "banned_permanent"
- RN003: Atualiza√ß√£o em tempo real (m√°ximo 5 minutos de delay)
- RN004: Mostrar varia√ß√£o vs per√≠odo anterior (ex: +15 usu√°rios vs semana anterior)
- RN005: Incluir √≠cone de tend√™ncia (‚Üë verde ou ‚Üì vermelho)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard anal√≠tico
      Quando carrega
      Ent√£o vejo card "Total de Usu√°rios" com n√∫mero destacado
      
- [ ] Dado que total √© 850 usu√°rios
      Quando visualizo
      Ent√£o vejo "850" em fonte grande + "‚Üë +12 vs semana anterior"
      
- [ ] Dado que 10 usu√°rios novos se cadastram
      Quando atualiza√ß√£o processa (at√© 5 min)
      Ent√£o total muda para 860 automaticamente
      
- [ ] Dado que usu√°rio √© banido permanentemente
      Quando a√ß√£o processa
      Ent√£o total reduz (-1)
      
- [ ] Dado que clico no card
      Quando detalhe abre
      Ent√£o vejo gr√°fico de crescimento cumulativo por semana

##### Prioridade
**Alta** - M√©trica fundamental

##### Complexidade
**Baixa** - Query COUNT simples

##### Depend√™ncias
RF001 (Sistema de cadastro)

##### Notas/Observa√ß√µes
- Query: SELECT COUNT(*) FROM users WHERE status IN ('active', 'pending_email_verification')
- Cache: 5 minutos com Redis para n√£o sobrecarregar BD
- Comparativo: armazenar snapshots di√°rios em tabela `metrics_daily`
- Tooltip ao passar mouse: "Usu√°rios ativos (n√£o banidos)"
- Considerar filtro por universidade (dashboard pode ser filtrado)



#### RF140 - M√©trica: Total de usu√°rios ativos (√∫ltimos 30 dias)

##### User Story
Como **admin**
Quero **saber quantos usu√°rios estiveram ativos nos √∫ltimos 30 dias**
Para **medir engajamento real e sa√∫de da plataforma**

##### Descri√ß√£o
Card mostrando contagem de usu√°rios √∫nicos com atividade (login, post, voto, etc) nos √∫ltimos 30 dias, com compara√ß√£o per√≠odo anterior.

##### Regras de Neg√≥cio
- RN001: Atividade inclui: login, criar thread, comentar, votar, acessar perfil
- RN002: Contar cada usu√°rio apenas 1x (mesmo com m√∫ltiplas atividades)
- RN003: Per√≠odo: √∫ltimos 30 dias (rolling, n√£o calend√°rio fixo)
- RN004: Atualiza√ß√£o di√°ria (c√°lculo noturno)
- RN005: Usu√°rios banidos N√ÉO contam

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard
      Quando visualizo m√©trica "Usu√°rios Ativos (30d)"
      Ent√£o vejo n√∫mero com icone de atualiza√ß√£o "√öltima atualiza√ß√£o: hoje √†s 00:30"
      
- [ ] Dado que 320 usu√°rios tiveram alguma atividade em 30 dias
      Quando visualizo
      Ent√£o vejo "320 usu√°rios" + "‚Üë +45 vs per√≠odo anterior"
      
- [ ] Dado que usu√°rio fez login 5 vezes em 30 dias
      Quando contagem processa
      Ent√£o usu√°rio conta como 1 (n√£o 5)
      
- [ ] Dado que usu√°rio fez √∫ltima atividade h√° 31 dias
      Quando per√≠odo rola
      Ent√£o usu√°rio sai da contagem
      
- [ ] Dado que clico em card
      Quando detalhe abre
      Ent√£o vejo distribui√ß√£o de atividades: logins, posts, votos, etc

##### Prioridade
**Alta** - M√©trica cr√≠tica de sa√∫de

##### Complexidade
**M√©dia** - Query com agrega√ß√£o e janela temporal

##### Depend√™ncias
RF001 (Cadastro), RF022 (Threads), RF027 (Coment√°rios), RF030 (Votos)

##### Notas/Observa√ß√µes
- Tabela `user_activity`: user_id, activity_type, activity_date
- Query: SELECT COUNT(DISTINCT user_id) FROM user_activity WHERE activity_date >= DATE_SUB(NOW(), INTERVAL 30 DAY)
- C√°lculo noturno: 00:30 BD hora
- Cache di√°rio com snapshot em `metrics_daily`
- Alertas: se usu√°rios ativos caem >20% vs semana anterior, notificar admin
- Considerar "Usu√°rios Inativos" sugerindo re-engajamento



#### RF141 - M√©trica: Threads criadas por per√≠odo

##### User Story
Como **admin**
Quero **acompanhar quantidade de threads criadas por per√≠odo**
Para **avaliar ado√ß√£o da funcionalidade de f√≥runs**

##### Descri√ß√£o
Card com n√∫mero de threads criadas no per√≠odo selecionado (√∫ltimos 7d, 30d, 90d, ano), com gr√°fico de tend√™ncia.

##### Regras de Neg√≥cio
- RN001: Contar apenas threads com status "published" (n√£o drafts)
- RN002: N√£o contar threads removidas por modera√ß√£o
- RN003: Per√≠odo compar√°vel vs per√≠odo anterior (ex: √∫ltimos 7d vs 7d anteriores)
- RN004: Atualiza√ß√£o em tempo real (m√°ximo 1 min)
- RN005: Detalhamento poss√≠vel por categoria/tag

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard
      Quando visualizo "Threads Criadas"
      Ent√£o vejo n√∫mero total do per√≠odo atual + compara√ß√£o vs anterior
      
- [ ] Dado que √∫ltimos 7 dias: 42 threads
      Quando visualizo
      Ent√£o vejo "42 threads" + "‚Üë +8 vs 7 dias anteriores"
      
- [ ] Dado que clico em "√öltimos 30 dias"
      Quando alterna per√≠odo
      Ent√£o m√©trica recalcula: ex "180 threads" + compara√ß√£o
      
- [ ] Dado que filtro por "Categoria: Python"
      Quando aplico
      Ent√£o m√©trica mostra apenas threads dessa categoria
      
- [ ] Dado que acesso gr√°fico expandido
      Quando visualizo
      Ent√£o vejo linha de tend√™ncia: threads/dia por per√≠odo de 7 dias

##### Prioridade
**Alta** - M√©tricas de conte√∫do

##### Complexidade
**M√©dia** - Query com filtros e comparativo temporal

##### Depend√™ncias
RF022 (Criar thread)

##### Notas/Observa√ß√µes
- Query: SELECT COUNT(*) FROM threads WHERE status='published' AND created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY)
- Per√≠odo compar√°vel: parametrizar (7d, 30d, 90d, 365d, all-time)
- Gr√°fico: library recharts (j√° no projeto), eixo X: dias, Y: quantidade cumulativa
- Snapshot di√°rio: tabela `metrics_threads_daily`
- Filtros aninhados: categoria > universidade > per√≠odo
- Considerar "threads sem resposta" como m√©trica complementar



#### RF142 - M√©trica: Coment√°rios por per√≠odo

##### User Story
Como **admin**
Quero **acompanhar total de coment√°rios criados por per√≠odo**
Para **medir qualidade de discuss√µes e engajamento em threads**

##### Descri√ß√£o
Card exibindo quantidade de coment√°rios por per√≠odo selecionado, com tend√™ncia e op√ß√£o de compara√ß√£o com threads (taxa de coment√°rios/thread).

##### Regras de Neg√≥cio
- RN001: Contar apenas coment√°rios com status "published"
- RN002: N√£o contar coment√°rios removidos por modera√ß√£o (soft-deleted)
- RN003: Permitir compara√ß√£o: coment√°rios vs threads
- RN004: Taxa m√©dia calculada: coment√°rios √∑ threads = m√©dia por thread
- RN005: Atualiza√ß√£o em tempo real

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard
      Quando visualizo "Coment√°rios Criados"
      Ent√£o vejo n√∫mero + tend√™ncia vs per√≠odo anterior
      
- [ ] Dado que √∫ltimos 30 dias: 580 coment√°rios, 180 threads
      Quando visualizo taxa
      Ent√£o vejo "580 coment√°rios" + "3.2 coment√°rios/thread (m√©dia)"
      
- [ ] Dado que per√≠odo anterior: 520 coment√°rios
      Quando comparo
      Ent√£o vejo "‚Üë +60 coment√°rios (+11.5%)"
      
- [ ] Dado que visualizo gr√°fico
      Quando detalhe abre
      Ent√£o vejo duas linhas: coment√°rios (azul) vs threads (verde)
      
- [ ] Dado que per√≠odo tem diminui√ß√£o de 20% nos coment√°rios
      Quando sistema detecta
      Ent√£o alerta: "Engajamento em decl√≠nio - considerar iniciativas de re-engajamento"

##### Prioridade
**Alta** - M√©trica de engajamento

##### Complexidade
**M√©dia** - Query com JOIN threads

##### Depend√™ncias
RF027 (Comentar), RF141 (Threads)

##### Notas/Observa√ß√µes
- Query: SELECT COUNT(*) FROM comments WHERE status='published' AND created_at >= DATE_SUB(NOW(), INTERVAL 30 DAY)
- Taxa: SUM(comments) / COUNT(threads) calculada em real-time
- Gr√°fico dual-axis: coment√°rios (esquerda), m√©dia por thread (direita)
- Filtros: per√≠odo, categoria, universidade, status (resolvido/n√£o resolvido)
- Considerar "Coment√°rios por usu√°rio" para identificar top contribuidores



#### RF143 - Gr√°fico: Engajamento por universidade

##### User Story
Como **admin**
Quero **visualizar engajamento (threads + coment√°rios) segmentado por universidade**
Para **identificar institui√ß√µes mais/menos engajadas e direcionar a√ß√µes**

##### Descri√ß√£o
Gr√°fico comparativo mostrando atividade (threads + coment√°rios) de cada universidade, permitindo identificar padr√µes de ado√ß√£o e engagement.

##### Regras de Neg√≥cio
- RN001: Engajamento = threads criadas + coment√°rios realizados
- RN002: Normalizar por n√∫mero de alunos: engajamento per capita
- RN003: Mostrar TOP 10 universidades (scroll para ver mais)
- RN004: Permitir filtro por per√≠odo
- RN005: Cores diferentes para threads vs coment√°rios

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso gr√°fico "Engajamento por Universidade"
      Quando carrega
      Ent√£o vejo gr√°fico de barras com TOP 10 universidades ordenadas por engajamento
      
- [ ] Dado que USP: 450 threads + 1200 coment√°rios = 1650 total
      Quando visualizo
      Ent√£o vejo barra com 2 cores: threads (cor1) + coment√°rios (cor2)
      
- [ ] Dado que USP tem 200 alunos
      Quando visualizo "per capita"
      Ent√£o vejo "8.25 engajamentos/aluno" (1650/200)
      
- [ ] Dado que clico em uma universidade
      Quando detalhe abre
      Ent√£o vejo breakdown: categorias, cursos mais ativos, usu√°rios top
      
- [ ] Dado que filtro por "√öltimos 7 dias"
      Quando per√≠odo muda
      Ent√£o gr√°fico atualiza mostrando apenas atividade recente

##### Prioridade
**Alta** - Identificar oportunidades de crescimento

##### Complexidade
**Alta** - Query complexa com agrupamento e normaliza√ß√£o

##### Depend√™ncias
RF141 (Threads), RF142 (Coment√°rios), RF001 (Cadastro com universidade)

##### Notas/Observa√ß√µes
- Query: SELECT university, COUNT(threads) as threads, COUNT(comments) as comments, COUNT(DISTINCT students) as total_students FROM (threads LEFT JOIN users) GROUP BY university
- Gr√°fico: recharts BarChart com CustomTooltip mostrando ambas s√©ries
- Normalizador: IF total_students=0 THEN per_capita=0 (evitar divis√£o zero)
- Cores: threads=#4CAF50 (verde), coment√°rios=#2196F3 (azul)
- Tooltip ao passar: "USP: 450 threads, 1200 coment√°rios, 200 alunos, 8.25/aluno"
- Considerar mapa interativo (Fase 2) mostrando universidades geograficamente



#### RF144 - Top 10 usu√°rios mais engajados

##### User Story
Como **admin**
Quero **identificar top 10 usu√°rios mais engajados na plataforma**
Para **reconhecer contribuidores valiosos e entender padr√µes de uso**

##### Descri√ß√£o
Ranking de usu√°rios ordenados por engajamento total (threads + coment√°rios + upvotes dados/recebidos), com op√ß√£o de drill-down para ver atividades espec√≠ficas.

##### Regras de Neg√≥cio
- RN001: Engajamento = threads criadas (2pt) + coment√°rios (1pt) + upvotes dados (0.5pt) + upvotes recebidos (2pt)
- RN002: Apenas usu√°rios "ativos" (n√£o banidos)
- RN003: Per√≠odo: √∫ltimos 30 dias (rolling)
- RN004: Atualiza√ß√£o di√°ria (01:00)
- RN005: Mostrar nome, universidade, pontos totais, ranking

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso "Top 10 Engajados"
      Quando carrega
      Ent√£o vejo tabela com rank, nome, universidade, engajamento total, badge
      
- [ ] Dado que Jo√£o tem: 8 threads (16pt) + 25 coment√°rios (25pt) + 10 upvotes dados (5pt) + 15 upvotes recebidos (30pt) = 76pt
      Quando visualizo ranking
      Ent√£o Jo√£o aparece com "76 pontos" em primeiro lugar
      
- [ ] Dado que clico em usu√°rio
      Quando detalhe abre
      Ent√£o vejo breakdown: threads (8), coment√°rios (25), cursos mais ativos, √∫ltimas atividades
      
- [ ] Dado que visualizo perfil do usu√°rio
      Quando clico em "Ver perfil"
      Ent√£o redirecionado para perfil completo (RF050+)
      
- [ ] Dado que per√≠odo muda para "√∫ltimos 7 dias"
      Quando ranking recalcula
      Ent√£o usu√°rios diferentes podem aparecer (snapshot semanal)

##### Prioridade
**M√©dia** - Gamifica√ß√£o e reconhecimento

##### Complexidade
**M√©dia** - Agrega√ß√£o com m√∫ltiplas m√©tricas ponderadas

##### Depend√™ncias
RF022 (Threads), RF027 (Coment√°rios), RF030 (Upvotes), RF099 (Pontos)

##### Notas/Observa√ß√µes
- C√°lculo: engajamento = (threads*2) + (comments*1) + (upvotes_given*0.5) + (upvotes_received*2)
- Snapshot di√°rio: tabela `user_engagement_daily` para performance
- Filtros: per√≠odo (7d, 30d, 90d), universidade, curso
- Badge visual: üèÜ TOP 10 (ouro), ‚≠ê TOP 50 (prata)
- Considerar "Pr√™mios" para top 3 (Fase 2)
- Validar: usu√°rios banidos exclu√≠dos



#### RF145 - M√©trica: Eventos criados

##### User Story
Como **admin**
Quero **acompanhar total de eventos criados na plataforma**
Para **medir ado√ß√£o da funcionalidade de eventos/atividades**

##### Descri√ß√£o
Card mostrando quantidade de eventos criados por per√≠odo, com detalhamento por tipo (mentoria, workshop, palestra, networking).

##### Regras de Neg√≥cio
- RN001: Contar apenas eventos com status "published" ou "scheduled"
- RN002: N√£o contar eventos cancelados
- RN003: Detalhamento: tipo evento (mentoria, workshop, etc)
- RN004: Per√≠odo configur√°vel (7d, 30d, 90d, year)
- RN005: Compara√ß√£o com per√≠odo anterior

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard
      Quando visualizo "Eventos Criados"
      Ent√£o vejo n√∫mero total + breakdown por tipo
      
- [ ] Dado que √∫ltimos 30 dias: 12 mentorias + 5 workshops + 3 palestras = 20 eventos
      Quando visualizo
      Ent√£o vejo "20 eventos" + gr√°fico pizza com 3 cores diferentes
      
- [ ] Dado que novo evento √© criado
      Quando processado
      Ent√£o contador atualiza em tempo real
      
- [ ] Dado que evento √© cancelado
      Quando status muda
      Ent√£o contador reduz (-1)
      
- [ ] Dado que clico em "Mentorias"
      Quando detalhe abre
      Ent√£o vejo lista de mentorias com datas, mentores, inscritos

##### Prioridade
**M√©dia** - M√©trica complementar

##### Complexidade
**Baixa** - Query COUNT com GROUP BY

##### Depend√™ncias
RF (Criar eventos - assumindo que existe em projeto)

##### Notas/Observa√ß√µes
- Query: SELECT COUNT(*) FROM events WHERE status IN ('published', 'scheduled') AND created_at >= DATE_SUB(NOW(), INTERVAL 30 DAY)
- Gr√°fico tipo pizza com cores por tipo: mentoria (azul), workshop (verde), palestra (laranja), networking (roxo)
- Agrupamento por tipo: SELECT COUNT(*), event_type FROM events GROUP BY event_type
- Cache di√°rio em `metrics_events_daily`
- Considerar "Taxa de conclus√£o" de eventos como m√©trica relacionada



#### RF146 - M√©trica: Eventos realizados

##### User Story
Como **admin**
Quero **visualizar quantos eventos foram efetivamente realizados/completados**
Para **medir taxa de realiza√ß√£o vs planejamento**

##### Descri√ß√£o
Card mostrando eventos que foram executados (status "completed"), com compara√ß√£o de "Planejados vs Realizados" (taxa de conclus√£o).

##### Regras de Neg√≥cio
- RN001: Contar apenas eventos com status "completed"
- RN002: Per√≠odo: √∫ltimos 30 dias (data de conclus√£o)
- RN003: Mostrar taxa: (realizados √∑ planejados) em %
- RN004: Compara√ß√£o: realizados vs per√≠odo anterior
- RN005: Alertar se taxa <80% (poss√≠vel abandono)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard
      Quando visualizo "Eventos Realizados"
      Ent√£o vejo n√∫mero de eventos completados + taxa de conclus√£o
      
- [ ] Dado que 20 eventos foram agendados e 18 completados em 30 dias
      Quando visualizo
      Ent√£o vejo "18 realizados" + "Taxa de conclus√£o: 90%"
      
- [ ] Dado que taxa √© <80%
      Quando sistema detecta
      Ent√£o aviso: "Taxa de conclus√£o abaixo do esperado"
      
- [ ] Dado que clico em card
      Quando detalhe abre
      Ent√£o vejo: eventos realizados vs cancelados vs n√£o iniciados
      
- [ ] Dado que evento √© marcado como "completado"
      Quando status muda
      Ent√£o m√©trica atualiza em tempo real

##### Prioridade
**M√©dia** - Qualidade de planejamento

##### Complexidade
**M√©dia** - Query com c√°lculo de taxa

##### Depend√™ncias
RF145 (Eventos criados)

##### Notas/Observa√ß√µes
- Query realizados: SELECT COUNT(*) FROM events WHERE status='completed' AND completed_at >= DATE_SUB(NOW(), INTERVAL 30 DAY)
- Query planejados: SELECT COUNT(*) FROM events WHERE created_at >= DATE_SUB(NOW(), INTERVAL 30 DAY) AND status IN ('published', 'scheduled', 'completed')
- Taxa: (COUNT(completed) / COUNT(all)) * 100
- Alerta: IF taxa < 80% THEN aviso em dashboard
- Breakdown: gr√°fico pizza mostrando Completados | Cancelados | N√£o iniciados
- Considerar "Motivos de cancelamento" para an√°lise (Fase 2)



#### RF147 - Taxa de ado√ß√£o da plataforma (% dos 1000 alunos)

##### User Story
Como **admin**
Quero **conhecer a taxa de ado√ß√£o da plataforma entre os ~1000 alunos alvo**
Para **medir sucesso do projeto e identificar gaps de onboarding**

##### Descri√ß√£o
Card em destaque mostrando % de alunos cadastrados vs total esperado (1000), com meta visual (gauge/progress bar) e compara√ß√£o mensal.

##### Regras de Neg√≥cio
- RN001: Total alvo: 1000 alunos (configur√°vel)
- RN002: Contar: usu√°rios com status "active" ou "pending_email_verification"
- RN003: C√°lculo: (usu√°rios cadastrados √∑ 1000) √ó 100
- RN004: Atualizar metas por m√™s (Janeiro: 20%, Fevereiro: 40%, etc)
- RN005: Mostrar faixa de meta (esperado vs realizado)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard
      Quando visualizo "Taxa de Ado√ß√£o"
      Ent√£o vejo gauge visual com % grande + n√∫mero de usu√°rios
      
- [ ] Dado que 350 usu√°rios cadastrados
      Quando visualizo
      Ent√£o vejo "35% ado√ß√£o" (350/1000) + gauge com 35% preenchido
      
- [ ] Dado que meta para outubro √© 45%
      Quando clico em tooltip
      Ent√£o vejo "Meta: 45% | Realizado: 35% | Delta: -10%"
      
- [ ] Dado que novo aluno se cadastra
      Quando registro processa
      Ent√£o % atualiza automaticamente
      
- [ ] Dado que clico em "Ver detalhamento"
      Quando abre
      Ent√£o vejo: universidades com maior ado√ß√£o, cursos, taxa de reten√ß√£o

##### Prioridade
**Alta** - M√©trica-chave de neg√≥cio

##### Complexidade
**M√©dia** - C√°lculo com meta configur√°vel

##### Depend√™ncias
RF001 (Cadastro), RF140 (Usu√°rios ativos)

##### Notas/Observa√ß√µes
- Configura√ß√£o: tabela `platform_goals` com meta_percentage, m√™s, ano
- Query: (SELECT COUNT(*) FROM users WHERE status IN ('active', 'pending_email_verification')) / 1000 * 100
- Componente: Gauge visual com cores (vermelho <20%, amarelo 20-60%, verde >60%)
- Meta por universidade: segmentar e mostrar TOP 3 progredindo mais
- Alerta: IF taxa caiu >5% vs m√™s anterior THEN notificar
- Considerar filtro por "Universidade" para ver progresso individual



#### RF148 - M√©trica: Mentorias ativas

##### User Story
Como **admin**
Quero **acompanhar quantidade de mentorias ativas/em andamento**
Para **medir sucesso do programa de mentorias e conex√µes valiosas**

##### Descri√ß√£o
Card mostrando total de mentorias em status "active", com detalhamento: novos pares, dura√ß√£o m√©dia, taxa de conclus√£o.

##### Regras de Neg√≥cio
- RN001: Mentoria "ativa" = status "in_progress" ou "scheduled_pending"
- RN002: Contar relacionamentos √∫nicos (mentor-mentorado)
- RN003: Mostrar tempo m√©dio de dura√ß√£o
- RN004: Taxa de conclus√£o: mentorias finalizadas com sucesso vs total
- RN005: Atualiza√ß√£o em tempo real

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard
      Quando visualizo "Mentorias Ativas"
      Ent√£o vejo n√∫mero total + tempo m√©dio + taxa de sucesso
      
- [ ] Dado que 45 mentorias em andamento
      Quando visualizo
      Ent√£o vejo "45 ativas" + "Dura√ß√£o m√©dia: 3.5 semanas" + "Taxa de conclus√£o: 87%"
      
- [ ] Dado que nova mentoria inicia
      Quando status muda para "in_progress"
      Ent√£o contador atualiza (+1)
      
- [ ] Dado que mentoria √© conclu√≠da
      Quando status = "completed"
      Ent√£o √© retirada do contador de "ativas"
      
- [ ] Dado que clico em card
      Quando detalhe abre
      Ent√£o vejo lista: mentores, mentorados, t√≥picos, pr√≥ximas sess√µes

##### Prioridade
**M√©dia** - Programa diferenciador

##### Complexidade
**M√©dia** - Query com agrupamento e c√°lculos

##### Depend√™ncias
RF (Sistema de mentorias - assumindo exist√™ncia)

##### Notas/Observa√ß√µes
- Query: SELECT COUNT(DISTINCT mentor_id, mentee_id) FROM mentorships WHERE status IN ('in_progress', 'scheduled_pending')
- Dura√ß√£o m√©dia: SELECT AVG(DATEDIFF(completed_at, started_at)) FROM mentorships WHERE status='completed'
- Taxa: (completed_count / total_count) * 100
- Filtros: universidade, √°rea de mentoria, per√≠odo
- Gr√°fico adicional: mentorias por semana (crescimento/linha do tempo)
- Alertas: mentorias sem atividade h√° >2 semanas



#### RF149 - Filtro de m√©tricas por per√≠odo (semanal, mensal, anual)

##### User Story
Como **admin**
Quero **filtrar todas as m√©tricas por diferentes per√≠odos (semana, m√™s, ano)**
Para **analisar tend√™ncias em diferentes escalas de tempo**

##### Descri√ß√£o
Seletor global no dashboard permitindo alternar per√≠odo para todas as m√©tricas simultaneamente: √∫ltimos 7d, 30d, 90d, 365d, custom.

##### Regras de Neg√≥cio
- RN001: Per√≠odos pr√©-definidos: 7d, 30d, 90d, 365d, all-time
- RN002: Permitir sele√ß√£o de data customizada (date picker)
- RN003: Todas m√©tricas atualizam simultaneamente ao trocar per√≠odo
- RN004: Armazenar prefer√™ncia do usu√°rio
- RN005: Compara√ß√£o autom√°tica vs per√≠odo anterior (rolling)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard
      Quando visualizo seletor de per√≠odo
      Ent√£o vejo 5 bot√µes: 7D | 30D | 90D | 365D | Custom
      
- [ ] Dado que clico em "30D"
      Quando per√≠odo alterna
      Ent√£o TODAS m√©tricas recalculam: usu√°rios, threads, coment√°rios, etc
      
- [ ] Dado que per√≠odo est√° em "7D"
      Quando compara√ß√£o mostra
      Ent√£o vejo "‚Üë +15% vs 7 dias anteriores"
      
- [ ] Dado que clico em "Custom"
      Quando date picker abre
      Ent√£o posso selecionar data in√≠cio e fim customizadas
      
- [ ] Dado que seleciono "01/08 - 15/08"
      Quando confirmo
      Ent√£o dashboard mostra m√©tricas apenas desse per√≠odo

##### Prioridade
**Alta** - Funcionalidade essencial

##### Complexidade
**M√©dia** - Parametriza√ß√£o global com rec√°lculos

##### Depend√™ncias
RF139-RF148 (Todas m√©tricas)

##### Notas/Observa√ß√µes
- Componente: ButtonGroup com sele√ß√£o ativa + DateRangePicker para custom
- Estado global: period (7d | 30d | 90d | 365d | custom)
- URL param: ?period=30d (permitir compartilhar link com per√≠odo espec√≠fico)
- LocalStorage: salvar prefer√™ncia √∫ltima utilizada
- C√°lculo de "per√≠odo anterior": Math.max(end_date - range_in_days, data_inicio_plataforma)
- Considerar "preset" semanal: "semana atual" vs "semana passada"
- Bot√£o "Compare": lado-a-lado de dois per√≠odos



#### RF150 - Exporta√ß√£o de dashboard (PDF/CSV)

##### User Story
Como **admin**
Quero **exportar dashboard com todas as m√©tricas e gr√°ficos para PDF/CSV**
Para **compartilhar relat√≥rios com stakeholders e armazenar para auditoria**

##### Descri√ß√£o
Bot√£o de exporta√ß√£o permitindo gerar relat√≥rio visual (PDF) ou dados estruturados (CSV) com todas as m√©tricas do per√≠odo selecionado.

##### Regras de Neg√≥cio
- RN001: Formatos: PDF (visual) ou CSV (dados)
- RN002: Exportar: todas m√©tricas vis√≠veis + gr√°ficos (PDF)
- RN003: CSV cont√©m: m√©trica, valor, per√≠odo, data_export, usu√°rio_export
- RN004: Nome arquivo: "dashboard_[per√≠odo]_[data].pdf" ou ".csv"
- RN005: Apenas admins podem exportar
- RN006: Log de quem exportou (auditoria)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso dashboard
      Quando clico em bot√£o "Exportar"
      Ent√£o vejo modal com op√ß√µes: PDF | CSV
      
- [ ] Dado que clico em "PDF"
      Quando gera√ß√£o inicia
      Ent√£o vejo spinner + "Gerando relat√≥rio..." (pode levar 5-10s)
      
- [ ] Dado que PDF √© gerado
      Quando download termina
      Ent√£o arquivo cont√©m: t√≠tulo "Dashboard Anal√≠tico", per√≠odo, todas m√©tricas, gr√°ficos
      
- [ ] Dado que clico em "CSV"
      Quando download inicia
      Ent√£o arquivo cont√©m: colunas (M√©trica, Valor, Per√≠odo, Data_Export)
      
- [ ] Dado que clico em "Exportar com filtros customizados"
      Quando per√≠odo √© "01/08 - 15/08"
      Ent√£o arquivo gerado cont√©m apenas dados desse per√≠odo

##### Prioridade
**M√©dia** - Funcionalidade de suporte

##### Complexidade
**M√©dia** - Gera√ß√£o din√¢mica de PDF/CSV

##### Depend√™ncias
RF139-RF149 (Todas m√©tricas)

##### Notas/Observa√ß√µes
- Library PDF: jsPDF + html2pdf (gerar layout visual)
- Library CSV: papaparse ou native FormData
- Arquivo PDF: header com logo + "Dashboard Anal√≠tico [per√≠odo]"
- Incluir: data/hora gera√ß√£o, usu√°rio gerador, assinatura
- CSV: estrutura tabular simples (f√°cil import em Excel)
- Performance: gerar em background (worker thread) para n√£o travar UI
- Logs: tabela `audit_exports` com user_id, export_type, datetime, period
- Considerar "Relat√≥rios agendados" (Fase 2) - gerar automaticamente todo m√™s



#### RF151 - Criar nova badge personalizada

##### User Story
Como **admin**
Quero **criar novas badges personalizadas para a plataforma**
Para **reconhecer conquistas espec√≠ficas e incentivar comportamentos desejados**

##### Descri√ß√£o
Funcionalidade de cria√ß√£o de badges com nome, descri√ß√£o, √≠cone, crit√©rios de conquista e visibilidade. Permite customiza√ß√£o completa para gamifica√ß√£o da plataforma.

##### Regras de Neg√≥cio
- RN001: Apenas admins podem criar badges
- RN002: Nome obrigat√≥rio e √∫nico (m√°x 50 caracteres)
- RN003: Descri√ß√£o obrigat√≥ria (m√°x 200 caracteres)
- RN004: √çcone obrigat√≥rio (upload imagem 200x200px)
- RN005: Tipo: "autom√°tica" (crit√©rios) ou "manual" (atribui√ß√£o)
- RN006: Badges ativas imediatamente ap√≥s cria√ß√£o
- RN007: Status: ativo/inativo/arquivado (soft delete)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso painel admin "Gerenciar Badges"
      Quando clico em "Criar Nova Badge"
      Ent√£o vejo formul√°rio com campos: Nome, Descri√ß√£o, √çcone, Tipo
      
- [ ] Dado que preenchevo nome "Python Expert"
      Quando valido
      Ent√£o campo aceita e valida√ß√£o confirma (√∫nico, sem duplicata)
      
- [ ] Dado que insiro descri√ß√£o "Conquistado por resolver 10 problemas Python"
      Quando visualizo tooltip
      Ent√£o texto aparece formatado com quebras de linha
      
- [ ] Dado que clico em "Selecionar √çcone"
      Quando modal abre
      Ent√£o posso fazer upload (JPG, PNG at√© 500KB) ou escolher de galeria
      
- [ ] Dado que seleciono tipo "Autom√°tica"
      Quando confirmo
      Ent√£o formul√°rio expande mostrando se√ß√£o "Crit√©rios" (RF154)
      
- [ ] Dado que confirmo cria√ß√£o
      Quando processa
      Ent√£o badge √© criada com status "ativo" e ID √∫nico

##### Prioridade
**Alta** - Base do sistema de badges

##### Complexidade
**M√©dia** - Formul√°rio com upload e valida√ß√µes

##### Depend√™ncias
RF155 (Upload √≠cone), RF154 (Crit√©rios autom√°ticos)

##### Notas/Observa√ß√µes
- Tabela `badges`: id, name, description, icon_url, type (auto/manual), status, created_by, created_at
- Valida√ß√£o: nome n√£o pode conter caracteres especiais (apenas alfanum√©ricos + espa√ßo/h√≠fen)
- Upload: salvar em storage cloud (AWS S3/Google Cloud) com versioning
- Slug para URL: gerar automaticamente de nome (ex: "python-expert")
- Categoria (opcional): programa√ß√£o, comunidade, eventos, mentorias
- Considerar "Rarity Level": comum, raro, √©pico, lend√°rio (visual com cores)



#### RF152 - Editar badge existente

##### User Story
Como **admin**
Quero **editar badges existentes**
Para **corrigir informa√ß√µes, atualizar crit√©rios ou melhorar descri√ß√µes**

##### Descri√ß√£o
Funcionalidade permitindo modificar dados de badges criadas (nome, descri√ß√£o, √≠cone, crit√©rios, status) com hist√≥rico de mudan√ßas para auditoria.

##### Regras de Neg√≥cio
- RN001: Apenas admins podem editar
- RN002: N√£o permitir alterar ID ou data de cria√ß√£o
- RN003: Editar crit√©rios: aplicar retroativamente? (config necess√°ria)
- RN004: Hist√≥rico de edi√ß√µes registrado com: data, admin, campo alterado, antes/depois
- RN005: Badgges "arquivadas" n√£o podem mais ser conquistadas
- RN006: √çcone pode ser substitu√≠do (versioning de imagens)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso lista de badges
      Quando clico em badge
      Ent√£o vejo modal de edi√ß√£o com todos campos pr√©-preenchidos
      
- [ ] Dado que altero descri√ß√£o
      Quando clico em "Salvar"
      Ent√£o descri√ß√£o atualiza e registro fica em hist√≥rico
      
- [ ] Dado que altero crit√©rios de uma badge autom√°tica
      Quando confirmo
      Ent√£o vejo op√ß√£o: "Aplicar retroativamente a usu√°rios que j√° conquistaram?" (SIM/N√ÉO)
      
- [ ] Dado que clico em "Mudar √çcone"
      Quando novo upload processa
      Ent√£o √≠cone antigo √© arquivado e novo fica ativo
      
- [ ] Dado que mudo status para "Inativo"
      Quando salvo
      Ent√£o badge n√£o √© mais conquist√°vel automaticamente
      
- [ ] Dado que clico em "Ver Hist√≥rico"
      Quando detalhes abrem
      Ent√£o vejo changelog: data, admin, campo, valor anterior ‚Üí novo valor

##### Prioridade
**Alta** - Manuten√ß√£o essencial

##### Complexidade
**M√©dia** - Update com hist√≥rico e retroatividade

##### Depend√™ncias
RF151 (Criar badge)

##### Notas/Observa√ß√µes
- Tabela `badge_edit_history`: badge_id, edited_by, edit_timestamp, field_changed, old_value, new_value
- Compara√ß√£o antes/depois: destacar mudan√ßas em vermelho/verde
- Retroatividade: IF alterou crit√©rios AND escolheu "SIM" THEN processar regra para usu√°rios eleg√≠veis
- N√£o permitir rename se badge j√° foi conquistada (risco de confus√£o)
- Auditoria: logs de who/when/what para compliance
- Considerar "Vers√µes de badge" (Fase 2) para A/B testing



#### RF153 - Deletar badge

##### User Story
Como **admin**
Quero **deletar badges que n√£o s√£o mais relevantes**
Para **manter sistema limpo e remover gamifica√ß√µes obsoletas**

##### Descri√ß√£o
Funcionalidade de remo√ß√£o de badges com soft delete (preservar hist√≥rico) e op√ß√£o de hard delete para limpeza administrativo. Confirma√ß√£o obrigat√≥ria com aviso de impacto.

##### Regras de Neg√≥cio
- RN001: Apenas admins podem deletar
- RN002: Soft delete padr√£o: badge muda status para "archived" (n√£o removida fisicamente)
- RN003: Hard delete dispon√≠vel apenas com flag admin (requer confirma√ß√£o dupla)
- RN004: Usu√°rios que j√° conquistaram badge: status "herdada" na profile (hist√≥rico preservado)
- RN005: Avisos de impacto: "X usu√°rios conquistaram esta badge"
- RN006: Timestamp de remo√ß√£o registrado

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em badge
      Quando clico em menu "Deletar"
      Ent√£o vejo modal com aviso: "Esta a√ß√£o √© irrevers√≠vel"
      
- [ ] Dado que badge tem 25 usu√°rios que conquistaram
      Quando abro modal de exclus√£o
      Ent√£o vejo: "25 usu√°rios conquistaram esta badge. Hist√≥rico ser√° preservado"
      
- [ ] Dado que confirmo dele√ß√£o
      Quando processa
      Ent√£o badge √© marcada como "archived" (soft delete)
      
- [ ] Dado que sou super admin
      Quando ativo "Hard Delete"
      Ent√£o preciso inserir senha para confirmar duplica√ß√£o
      
- [ ] Dado que hard delete √© confirmado
      Quando processa
      Ent√£o registro √© removido fisicamente + hist√≥rico em tabela `deleted_badges`
      
- [ ] Dado que usu√°rio acessa seu perfil
      Quando v√™ badges antigas
      Ent√£o badges deletadas aparecem como "[Badge removida]" (hist√≥rico preservado)

##### Prioridade
**M√©dia** - Limpeza administrativo

##### Complexidade
**M√©dia** - Soft/hard delete com preserva√ß√£o de hist√≥rico

##### Depend√™ncias
RF151 (Criar)

##### Notas/Observa√ß√µes
- Tabela `badges`: add soft_delete_flag, deleted_at, deleted_by
- Tabela `deleted_badges` (backup): id, badge_id, badge_data (JSON), deleted_at, deleted_by
- Query usu√°rios impactados: SELECT COUNT(DISTINCT user_id) FROM user_badges WHERE badge_id=?
- Modal de confirma√ß√£o mostra: impacto de usu√°rios, op√ß√£o revers√£o (apenas soft delete)
- Logs: quem deletou, quando, motivo (opcional)
- Considerar "Per√≠odo de gra√ßa" 30 dias antes de hard delete (soft delete ‚Üí aviso ‚Üí hard delete)



#### RF154 - Definir crit√©rios de conquista autom√°tica

##### User Story
Como **admin**
Quero **definir crit√©rios autom√°ticos para badges serem conquistadas**
Para **reconhecer automaticamente usu√°rios que atingem milestones sem interven√ß√£o manual**

##### Descri√ß√£o
Builder de regras permitindo criar condi√ß√µes autom√°ticas (ex: "10 threads criadas", "50 upvotes recebidos", "participar de 5 mentorias") que disparam conquista autom√°tica de badge.

##### Regras de Neg√≥cio
- RN001: Tipos de crit√©rio: a√ß√µes (threads, coment√°rios, upvotes), eventos (mentorias, eventos), tempo (membro h√° X dias)
- RN002: Operadores: = (igual), > (maior), < (menor), >= (maior/igual), <= (menor/igual), BETWEEN
- RN003: L√≥gica: AND (todas condi√ß√µes) ou OR (qualquer condi√ß√£o)
- RN004: Valida√ß√£o retroativa: ao criar crit√©rio, verificar quem j√° eleg√≠vel
- RN005: Jobs agendados: executar verifica√ß√£o diariamente ou em tempo real (config)
- RN006: M√∫ltiplos crit√©rios poss√≠vel (ex: "OU 10 threads OU 5 mentorias")

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em "Definir Crit√©rios" na cria√ß√£o/edi√ß√£o badge
      Quando tela de builder abre
      Ent√£o vejo op√ß√µes de tipos: A√ß√µes, Eventos, Tempo
      
- [ ] Dado que seleciono "A√ß√µes"
      Quando expande
      Ent√£o vejo dropdown: Threads Criadas, Coment√°rios, Upvotes Recebidos, etc
      
- [ ] Dado que seleciono "Threads Criadas >= 10"
      Quando confirmo
      Ent√£o primeira regra √© adicionada
      
- [ ] Dado que clico em "Adicionar Condi√ß√£o"
      Quando nova linha aparece
      Ent√£o vejo selector "E" ou "OU" para combinar com anterior
      
- [ ] Dado que defino "(Threads >= 10) OU (Mentorias >= 5)"
      Quando salvo
      Ent√£o regra √© registrada com l√≥gica OR
      
- [ ] Dado que salvo crit√©rios
      Quando processa
      Ent√£o sistema valida retroativamente: "5 usu√°rios j√° eleg√≠veis - deseja atribuir?"

##### Prioridade
**Alta** - Core de gamifica√ß√£o autom√°tica

##### Complexidade
**Alta** - Builder com m√∫ltiplas condi√ß√µes e execu√ß√£o

##### Depend√™ncias
RF151 (Criar badge)

##### Notas/Observa√ß√µes
- Tabela `badge_criteria`: badge_id, criteria_type, metric, operator, value, logic (AND/OR), created_at
- JSON Storage: {"type": "action", "metric": "threads_created", "operator": ">=", "value": 10, "logic": "OR"}
- Job scheduler: verificar diariamente (cron 00:30) ou em tempo real (trigger)
- Retroatividade: SELECT user_id FROM user_metrics WHERE threads_created >= 10 AND NOT IN (user_badges WHERE badge_id=?)
- Preview: mostra quantos usu√°rios s√£o eleg√≠veis antes de confirmar
- Teste de regra: "Simular com usu√°rio X" para validar funcionamento
- Considerar "Regras complexas" (Fase 2) com suporte a datas e per√≠odos



#### RF155 - Upload de √≠cone da badge

##### User Story
Como **admin**
Quero **fazer upload de √≠cones personalizados para cada badge**
Para **criar identidade visual √∫nica e atrativa para cada conquista**

##### Descri√ß√£o
Funcionalidade de upload de imagem para √≠cone de badge com valida√ß√µes (formato, tamanho), preview, e armazenamento em CDN. Suporta m√∫ltiplas resolu√ß√µes (thumbnail, full).

##### Regras de Neg√≥cio
- RN001: Formatos aceitos: PNG, JPG, GIF, SVG (m√°x 500KB)
- RN002: Dimens√µes recomendadas: 200x200px (aceita 100-400px)
- RN003: Armazenamento: cloud storage (AWS S3, Google Cloud, Cloudinary)
- RN004: Versioning: manter hist√≥rico de √≠cones anteriores
- RN005: CDN com cache (cache-busting com timestamp)
- RN006: Thumbnail autom√°tico: 64x64px para listagens

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em "Selecionar √çcone"
      Quando modal abre
      Ent√£o vejo drag-and-drop area ou file input
      
- [ ] Dado que arrasto imagem 200x200px PNG
      Quando drop processa
      Ent√£o vejo preview da imagem + valida√ß√£o "‚úì Formato v√°lido"
      
- [ ] Dado que tenta upload imagem 1000x1000px
      Quando valida
      Ent√£o vejo aviso: "Redimensionada para 200x200px" + preview
      
- [ ] Dado que tenta upload arquivo 600KB
      Quando valida
      Ent√£o erro: "Arquivo muito grande (m√°x 500KB). Atual: 600KB"
      
- [ ] Dado que confirmo upload
      Quando processa
      Ent√£o arquivo √© enviado para CDN + thumbnail 64x64px gerado automaticamente
      
- [ ] Dado que visualizo badge em listagem
      Ent√£o √≠cone aparece em 64x64px (thumbnail)

##### Prioridade
**M√©dia** - Experi√™ncia visual

##### Complexidade
**M√©dia** - Upload + processing + CDN

##### Depend√™ncias
RF151 (Criar badge)

##### Notas/Observa√ß√µes
- Upload library: dropzone.js ou similar
- Processamento: ImageMagick ou Sharp (Node.js) para redimensionar + converter
- Storage: AWS S3 com pasta `/badges/` separada
- URL com cache-busting: `/badges/badge-id-v2.png?t=1672531200` (timestamp)
- Fallback: √≠cone padr√£o se upload falhar
- Gera√ß√£o autom√°tica: full (200x200) + thumbnail (64x64) + mobile (128x128)
- Hist√≥rico: pasta `/badges/archives/` com vers√µes anteriores
- Considerar "√çcone din√¢mico" (Fase 2) com anima√ß√£o SVG



#### RF156 - Atribuir badge manualmente a usu√°rio espec√≠fico

##### User Story
Como **admin ou moderador**
Quero **atribuir badges manualmente a usu√°rios espec√≠ficos**
Para **reconhecer contribui√ß√µes especiais ou resolver casos de badges n√£o conquistadas automaticamente**

##### Descri√ß√£o
Funcionalidade permitindo buscar usu√°rio e atribuir badge manualmente com motivo registrado. Notifica usu√°rio da conquista e registra em auditoria.

##### Regras de Neg√≥cio
- RN001: Apenas admins e moderadores autorizados podem atribuir
- RN002: Motivo obrigat√≥rio (texto curto, m√°x 100 caracteres)
- RN003: Verifica√ß√£o: usu√°rio n√£o pode ter badge duplicada (same user + badge)
- RN004: Notifica√ß√£o ao usu√°rio informando conquista e motivo
- RN005: Atribui√ß√£o manual marcada diferente (flag na tabela)
- RN006: Hist√≥rico registra: quem atribuiu, quando, motivo

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em badge
      Quando acesso "Atribui√ß√µes"
      Ent√£o vejo bot√£o "Atribuir Manualmente"
      
- [ ] Dado que clico em "Atribuir Manualmente"
      Quando modal abre
      Ent√£o vejo search input para buscar usu√°rio
      
- [ ] Dado que digito "Jo√£o" na busca
      Quando dropdown mostra
      Ent√£o vejo lista de usu√°rios: "Jo√£o Silva (USP)", "Jo√£o Santos (UFRJ)", etc
      
- [ ] Dado que seleciono usu√°rio
      Quando usu√°rio √© selecionado
      Ent√£o campo "Motivo" fica obrigat√≥rio (ex: "Contribui√ß√£o especial")
      
- [ ] Dado que confirmo atribui√ß√£o
      Quando processa
      Ent√£o badge √© adicionada ao usu√°rio + notifica√ß√£o enviada
      
- [ ] Dado que usu√°rio recebe notifica√ß√£o
      Quando abre Centro de Notifica√ß√µes
      Ent√£o v√™: "üèÜ Voc√™ conquistou a badge [Badge Name]! Motivo: [Motivo]"

##### Prioridade
**Alta** - Flexibilidade essencial

##### Complexidade
**M√©dia** - Search + valida√ß√£o duplicata + notifica√ß√£o

##### Depend√™ncias
RF151 (Criar badge)

##### Notas/Observa√ß√µes
- Tabela `user_badges`: add `manually_assigned` (boolean), `assigned_by`, `assigned_reason`
- Valida√ß√£o: SELECT * FROM user_badges WHERE user_id=? AND badge_id=? (previne duplicata)
- Search: busca em name, email, username com fuzzy matching (levenshtein)
- Notifica√ß√£o: tipo "badge_awarded_manual" com link para perfil atualizado
- Logs: tabela `badge_attribution_logs` com auditoria completa
- Permiss√£o granular: config pode limitar quem pode atribuir (apenas admins vs moderadores tamb√©m)



#### RF157 - Visualizar badges distribu√≠das (estat√≠sticas)

##### User Story
Como **admin**
Quero **visualizar estat√≠sticas de distribui√ß√£o de badges**
Para **entender engajamento e gamifica√ß√£o, identificar badges pouco conquistadas**

##### Descri√ß√£o
Dashboard mostrando distribui√ß√£o de badges: quantos usu√°rios conquistaram cada uma, taxa de conquista, trending badges, compara√ß√£o per√≠odo a per√≠odo.

##### Regras de Neg√≥cio
- RN001: Contar: total conquistadores, %, trending (crescimento vs semana anterior)
- RN002: Filtro: per√≠odo (7d, 30d, 90d, 365d)
- RN003: Ordena√ß√£o: mais conquistadas, menos conquistadas, trending
- RN004: Showroom de badges: thumbnail visual com estat√≠sticas overlay
- RN005: Atualiza√ß√£o di√°ria de snapshots para performance

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso "Estat√≠sticas de Badges"
      Quando carrega
      Ent√£o vejo grid com todas badges + contadores
      
- [ ] Dado que badge "Python Expert" foi conquistada por 145 usu√°rios
      Quando visualizo
      Ent√£o vejo: √≠cone + nome + "145 conquistadores" + "14.5% dos usu√°rios"
      
- [ ] Dado que badge tem mais conquistas que semana anterior (+30)
      Quando visualizo
      Ent√£o vejo trending indicator: "‚Üë +30 (+26%)"
      
- [ ] Dado que clico em badge
      Quando detalhe abre
      Ent√£o vejo: hist√≥rico de conquistas (linha do tempo), top conquistadores, crit√©rios
      
- [ ] Dado que filtro por "√öltimos 7 dias"
      Quando per√≠odo muda
      Ent√£o estat√≠sticas recalculam mostrando apenas conquistas recentes
      
- [ ] Dado que ordeno por "Menos Conquistadas"
      Quando reordena
      Ent√£o badges com poucos conquistadores ficam no topo (oportunidade)

##### Prioridade
**M√©dia** - An√°lise de gamifica√ß√£o

##### Complexidade
**M√©dia** - Agrega√ß√µes com trending e visualiza√ß√£o

##### Depend√™ncias
RF151 (Criar), RF156 (Atribuir manual)

##### Notas/Observa√ß√µes
- Tabela `badge_statistics_daily`: badge_id, date, conquistadores_count, percentage, trending_change
- Query: SELECT COUNT(DISTINCT user_id) FROM user_badges WHERE badge_id=? AND created_at >= DATE_SUB(NOW(), INTERVAL 30 DAY)
- Trending: COUNT(hoje) - COUNT(7 dias atr√°s)
- Visualiza√ß√£o: grid com cards mostrando √≠cone (200x200) + stats como overlay
- Gr√°fico adicional: linha temporal de distribui√ß√£o (quando mais foram conquistadas)
- Badges com <5 conquistadores: alerta "Pouco popular - considerar ajustar crit√©rios"
- Considerar "Badges relacionadas" (usu√°rios que conquistam uma, tendem conquistar outra)



#### RF158 - Hist√≥rico de conquistas de badges por usu√°rio

##### User Story
Como **admin** ou **pr√≥prio usu√°rio**
Quero **visualizar hist√≥rico completo de badges conquistadas por um usu√°rio**
Para **entender progress√£o, validar gamifica√ß√£o e reconhecer contribui√ß√µes ao longo do tempo**

##### Descri√ß√£o
Timeline mostrando todas badges conquistadas por usu√°rio com datas, m√©todos (autom√°tico/manual), progresso para pr√≥ximas badges. Acess√≠vel pelo perfil do usu√°rio e painel admin.

##### Regras de Neg√≥cio
- RN001: Usu√°rio v√™ seu pr√≥prio hist√≥rico; admin v√™ de qualquer um
- RN002: Mostrar: √≠cone, nome badge, data conquista, m√©todo (autom√°tico/manual/admin)
- RN003: Ordena√ß√£o: mais recentes primeiro
- RN004: Badges "arquivadas" aparecem com label "Removida"
- RN005: Progresso: mostrar badges pr√≥ximas com progresso (ex: "8/10 threads para Python Expert")
- RN006: Filtro: per√≠odo, tipo (todas/autom√°ticas/manuais)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso perfil de usu√°rio
      Quando clico em "Badges" ou "Conquistas"
      Ent√£o vejo timeline vertical com todas badges conquistadas
      
- [ ] Dado que usu√°rio conquistou "Python Expert" em 15/10
      Quando visualizo
      Ent√£o vejo: √≠cone + "Python Expert" + "15 de outubro de 2024" + badge visual "Autom√°tica"
      
- [ ] Dado que admin atribuiu badge manualmente
      Quando visualizo
      Ent√£o vejo label "Atribu√≠da por admin" com tooltip mostrando motivo
      
- [ ] Dado que badge foi removida/arquivada
      Quando visualizo hist√≥rico
      Ent√£o vejo "[Badge Removida] Python Expert (Arquivada em 20/10)"
      
- [ ] Dado que usu√°rio tem 8/10 threads para "Web Master"
      Quando visualizo pr√≥ximas badges
      Ent√£o vejo progress bar: "8/10 threads criadas - 80%"
      
- [ ] Dado que filtro por "√öltimos 30 dias"
      Quando aplico
      Ent√£o timeline mostra apenas badges conquistadas em setembro

##### Prioridade
**M√©dia** - Visualiza√ß√£o do progresso

##### Complexidade
**M√©dia** - Timeline com agrega√ß√£o de progresso

##### Depend√™ncias
RF151-RF156 (Sistema de badges)

##### Notas/Observa√ß√µes
- Tabela `user_badges`: user_id, badge_id, acquired_date, method (auto/manual/admin), assigned_by, assigned_reason
- Query: SELECT * FROM user_badges WHERE user_id=? ORDER BY acquired_date DESC
- Timeline visual: Recharts ou Ant Design Timeline component
- Progresso pr√≥ximas: SELECT badge_criteria WHERE NOT IN (user_badges WHERE user_id) + calcular valor atual
- Exemplo progresso: {badge: "Web Master", criterio: "threads_created >= 15", atual: 12, faltam: 3, percent: 80}
- Filtros: per√≠odo, tipo (todas/autom√°ticas/manuais/recebidas)
- Considerar "Compara√ß√£o com outros usu√°rios": "Jo√£o conquistou 15 badges vs voc√™ com 8"
- Badges compartilh√°veis: gerar imagem para redes sociais (Fase 2)



#### RF159 - Visualizar todos os eventos (passados e futuros)

##### User Story
Como **admin ou moderador**
Quero **visualizar lista completa de todos os eventos criados (passados e futuros)**
Para **monitorar atividades, garantir qualidade e manter controle sobre eventos na plataforma**

##### Descri√ß√£o
Painel administrativo mostrando todos os eventos com filtros por status, data, criador e tipo. Permite search, ordena√ß√£o e a√ß√µes em massa. Diferencia eventos passados (arquivo) de futuros (ativos).

##### Regras de Neg√≥cio
- RN001: Apenas admins e moderadores autorizados acessam
- RN002: Exibir: evento, criador, data, status, n√∫mero de inscritos, a√ß√µes
- RN003: Status: "scheduled", "ongoing", "completed", "cancelled"
- RN004: Ordena√ß√£o padr√£o: mais pr√≥ximos (futuros), depois passados
- RN005: Filtros: data range, tipo (mentoria/workshop/palestra/networking), status, criador
- RN006: Pagina√ß√£o: 50 eventos por p√°gina
- RN007: Search por t√≠tulo ou descri√ß√£o (full-text)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso painel "Gest√£o de Eventos"
      Quando carrega
      Ent√£o vejo lista de TODOS eventos com pagina√ß√£o (50/p√°gina)
      
- [ ] Dado que 200 eventos existem
      Quando visualizo primeira p√°gina
      Ent√£o vejo 50 mais pr√≥ximos (futuros primeiro) + ordena√ß√£o por data
      
- [ ] Dado que filtro por "Status: Completed"
      Quando aplico
      Ent√£o vejo apenas eventos passados com status completado
      
- [ ] Dado que busco por "Python Workshop"
      Quando digito na search
      Ent√£o resultados filtram em tempo real (t√≠tulo ou descri√ß√£o cont√©m termo)
      
- [ ] Dado que aplico filtro "Tipo: Mentoria" + "Data: √öltimos 30 dias"
      Quando confirmo
      Ent√£o vejo apenas mentorias agendadas nos √∫ltimos 30 dias
      
- [ ] Dado que clico em um evento
      Quando detalhe abre
      Ent√£o vejo: criador, descri√ß√£o, data/hora, local, inscritos, a√ß√µes (editar/cancelar/destacar)

##### Prioridade
**Alta** - Vis√£o geral essencial

##### Complexidade
**M√©dia** - Query agregada com m√∫ltiplos filtros

##### Depend√™ncias
RF145 (Eventos criados)

##### Notas/Observa√ß√µes
- Tabela `events`: id, title, description, event_type, creator_id, start_date, end_date, location, status, created_at, cancelled_at
- Query com filtros: SELECT * FROM events WHERE (filters) ORDER BY start_date ASC LIMIT 50 OFFSET ?
- Full-text search: MATCH(title, description) AGAINST(? IN BOOLEAN MODE)
- Status calculation: IF NOW() < start_date THEN "scheduled" ELSE IF NOW() between start/end THEN "ongoing" ELSE "completed"
- √çndices em: status, start_date, creator_id, event_type
- Cache: lista atualiza a cada 5 minutos ou em tempo real com webhooks
- A√ß√µes em massa: selecionar m√∫ltiplos eventos + a√ß√µes batch (cancelar, arquivar)
- Considerar "Exportar lista" em CSV para an√°lise externa



#### RF160 - Destacar/fixar eventos importantes

##### User Story
Como **admin**
Quero **fixar/destacar eventos importantes no topo da listagem**
Para **dar visibilidade extra a eventos cr√≠ticos ou de alta relev√¢ncia**

##### Descri√ß√£o
Funcionalidade permitindo marcar eventos como "fixado" ou "destacado" com badge visual, movimento para topo de listagens e notifica√ß√£o para usu√°rios. Suporta ordena√ß√£o por import√¢ncia.

##### Regras de Neg√≥cio
- RN001: Apenas admins podem fixar/destacar eventos
- RN002: Eventos fixados aparecem no topo de listagens (prioridade acima de ordena√ß√£o normal)
- RN003: Limite: m√°ximo 5 eventos fixados simultaneamente
- RN004: Badge visual: "üìå Fixado" ou "‚≠ê Destaque" na listagem
- RN005: Notifica√ß√£o aos usu√°rios quando evento √© destacado (opt-in)
- RN006: Timestamp de quando foi fixado (para reordena√ß√£o)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em evento na lista
      Quando abro a√ß√µes
      Ent√£o vejo op√ß√£o "Fixar Evento"
      
- [ ] Dado que clico em "Fixar Evento"
      Quando confirmo
      Ent√£o evento move para topo com badge "üìå Fixado"
      
- [ ] Dado que evento √© fixado
      Quando visualizo listagem
      Ent√£o aparece acima de eventos n√£o-fixados (mesmo com data posterior)
      
- [ ] Dado que j√° tenho 5 eventos fixados
      Quando tento fixar 6¬∫
      Ent√£o alerta: "M√°ximo 5 eventos fixados. Desfix um primeiro"
      
- [ ] Dado que evento √© destacado
      Quando usu√°rios com notifica√ß√µes ativas consultam
      Ent√£o recebem: "üìå Evento em destaque: [Evento] - [Data]"
      
- [ ] Dado que clico em "Desfixar"
      Quando confirmo
      Ent√£o evento retorna ao fluxo normal de ordena√ß√£o

##### Prioridade
**M√©dia** - Destaque editorial

##### Complexidade
**Baixa** - Update simples com ordena√ß√£o

##### Depend√™ncias
RF159 (Visualizar eventos)

##### Notas/Observa√ß√µes
- Tabela `events`: add `is_pinned` (boolean), `pinned_at` (timestamp), `pin_order` (1-5)
- Query ordena√ß√£o: ORDER BY (is_pinned DESC, pin_order ASC, start_date ASC)
- Valida√ß√£o: SELECT COUNT(*) FROM events WHERE is_pinned=1 (previne >5)
- Notifica√ß√£o: enviar apenas se usu√°rio tem "Notifica√ß√µes de eventos" ativas
- Visual: badge com √≠cone üìå ou ‚≠ê com tooltip "Fixado por [admin] em [data]"
- Remo√ß√£o autom√°tica: considerar "Desfix quando evento passa" (ap√≥s end_date)
- Hist√≥rico: tabela `event_pins` com auditoria (quem fixou, quando, dura√ß√£o)



#### RF161 - Cancelar eventos inadequados

##### User Story
Como **admin ou moderador**
Quero **cancelar eventos que violam diretrizes ou s√£o inadequados**
Para **manter qualidade da plataforma e remover conte√∫do problem√°tico**

##### Descri√ß√£o
Funcionalidade permitindo cancelar eventos criados com op√ß√£o de notificar criador e inscritos. Soft delete com motivo registrado. Eventos cancelados mostram "[Cancelado]" com raz√£o.

##### Regras de Neg√≥cio
- RN001: Apenas admins e moderadores autorizados podem cancelar
- RN002: Soft delete padr√£o: status = "cancelled", n√£o remove fisicamente
- RN003: Motivo obrigat√≥rio (dropdown: "Conte√∫do inadequado", "Spam", "Viola√ß√£o diretrizes", "Outro")
- RN004: Notifica√ß√£o ao criador informando cancelamento + motivo
- RN005: Notifica√ß√£o aos inscritos: "Evento cancelado" com op√ß√£o de reembolso (se pago)
- RN006: Hist√≥rico registra: quem cancelou, quando, motivo, criador original
- RN007: Hard delete dispon√≠vel apenas para super-admins (com confirma√ß√£o dupla)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em evento inadequado
      Quando acesso a√ß√µes
      Ent√£o vejo op√ß√£o "Cancelar Evento"
      
- [ ] Dado que clico em "Cancelar"
      Quando modal abre
      Ent√£o vejo dropdown com motivos pr√©-definidos + campo opcional de detalhe
      
- [ ] Dado que seleciono "Viola√ß√£o de diretrizes"
      Quando confirmo
      Ent√£o evento muda status para "cancelled" + notifica√ß√µes s√£o enviadas
      
- [ ] Dado que criador do evento recebe notifica√ß√£o
      Quando consulta
      Ent√£o v√™: "Seu evento [T√≠tulo] foi cancelado. Motivo: Viola√ß√£o de diretrizes"
      
- [ ] Dado que inscritos recebem notifica√ß√£o
      Quando consultam
      Ent√£o veem: "O evento [T√≠tulo] foi cancelado pelo administrador"
      
- [ ] Dado que usu√°rio visualiza evento cancelado
      Quando acessa listagem ou detalhe
      Ent√£o v√™ "[Cancelado por modera√ß√£o]" com nota de raz√£o

##### Prioridade
**Alta** - Controle de qualidade

##### Complexidade
**M√©dia** - Update com notifica√ß√µes em cascata

##### Depend√™ncias
RF159 (Visualizar)

##### Notas/Observa√ß√µes
- Tabela `events`: add `status`, `cancelled_at`, `cancelled_by`, `cancellation_reason`
- Tabela `event_cancellations` (auditoria): event_id, cancelled_by, reason_code, reason_detail, cancelled_at
- Notifica√ß√£o criador: tipo "event_cancelled_admin" com link para motivo completo
- Notifica√ß√£o inscritos: buscar todas inscri√ß√µes (tabela `event_registrations`) + enviar notifica√ß√£o
- Hard delete flag: apenas se super_admin_role=true (verificar permissions)
- Confirma√ß√£o dupla: "Tem certeza? Inscritos (X) ser√£o notificados"
- Logs: auditoria completa para compliance (LGPD)
- Considerar "Apela√ß√£o" (Fase 2) onde criador pode contestar cancelamento



#### RF162 - Editar eventos de qualquer usu√°rio

##### User Story
Como **admin**
Quero **editar eventos criados por qualquer usu√°rio (corrigir informa√ß√µes, hor√°rios, detalhes)**
Para **manter dados precisos e resolver problemas sem depend√™ncia do criador original**

##### Descri√ß√£o
Funcionalidade permitindo admins editar todos campos de eventos criados por usu√°rios. Suporta mudan√ßas em data, t√≠tulo, descri√ß√£o, local, inscritos. Registra hist√≥rico de edi√ß√µes com notifica√ß√£o opcional ao criador.

##### Regras de Neg√≥cio
- RN001: Apenas admins podem editar eventos de outros usu√°rios
- RN002: Criador pode editar apenas seu pr√≥prio evento (permiss√£o controlada)
- RN003: Hist√≥rico completo de edi√ß√µes: campo alterado, antes/depois, editor, data
- RN004: Notificar criador se mudan√ßas significativas (data/hor√°rio/local)
- RN005: Se data muda: revalidar inscritos (avisar se evento passou)
- RN006: Mudan√ßa em limite de inscritos: avisar inscritos extras (se reduzido)
- RN007: Edi√ß√µes requerem motivo (registrar por que foi alterado)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em evento
      Quando acesso a√ß√µes
      Ent√£o vejo op√ß√£o "Editar" (admin v√™ para qualquer evento, criador apenas seu)
      
- [ ] Dado que clico em "Editar"
      Quando formul√°rio abre
      Ent√£o todos campos s√£o edit√°veis: t√≠tulo, descri√ß√£o, data, hora, local, limite inscritos
      
- [ ] Dado que altero data de 15/10 para 20/10
      Quando salvo
      Ent√£o evento atualiza + notifica√ß√£o ao criador: "Seu evento foi editado por admin. Nova data: 20/10"
      
- [ ] Dado que reduz limite de inscritos de 50 para 30
      Quando confirmo
      Ent√£o sistema verifica: se >30 j√° inscritos, avisa "31 usu√°rios perdem vaga"
      
- [ ] Dado que edi√ß√µes s√£o salvas
      Quando visualizo hist√≥rico
      Ent√£o vejo changelog: "T√≠tulo alterado: 'Workshop Python' ‚Üí 'Workshop Python Avan√ßado'"
      
- [ ] Dado que √© necess√°rio editar
      Quando salvo
      Ent√£o preciso inserir "Motivo da edi√ß√£o" (ex: "Corrigir data errada")

##### Prioridade
**M√©dia** - Flexibilidade de gest√£o

##### Complexidade
**M√©dia** - Update com valida√ß√µes e hist√≥rico

##### Depend√™ncias
RF159 (Visualizar)

##### Notas/Observa√ß√µes
- Tabela `events`: campos edit√°veis (title, description, start_date, end_date, location, max_participants)
- Tabela `event_edit_history`: event_id, edited_by, field_changed, old_value, new_value, reason, edited_at
- Valida√ß√µes:
  - Data no futuro (n√£o pode editar eventos passados)
  - Se limite reduzido: verificar inscri√ß√µes extras
  - Se data pr√≥xima: avisar inscritos com notifica√ß√£o especial
- Notifica√ß√£o criador: IF mudan√ßa_significativa (data/hora/local) THEN notificar
- Compara√ß√£o antes/depois: destacar campos alterados em verde/vermelho
- Permiss√£o granular: verificar se user √© admin BEFORE permitir edi√ß√£o
- Considerar "Revert" (Fase 2) para restaurar vers√£o anterior



#### RF163 - Visualizar lista de confirmados por evento

##### User Story
Como **admin, moderador ou criador do evento**
Quero **visualizar lista completa de usu√°rios confirmados/inscritos em um evento espec√≠fico**
Para **gerenciar presen√ßa, contatos, e organiza√ß√£o do evento**

##### Descri√ß√£o
Painel detalhado para cada evento mostrando todos inscritos com informa√ß√µes de contato, status confirma√ß√£o, data inscri√ß√£o. Permite a√ß√µes como enviar notifica√ß√µes, confirmar presen√ßa, remover inscritos.

##### Regras de Neg√≥cio
- RN001: Criador v√™ inscritos em seu evento; admin v√™ qualquer evento
- RN002: Exibir: nome, email, universidade, curso, data inscri√ß√£o, status confirma√ß√£o
- RN003: Status: "registered" (inscrito), "confirmed" (confirmou), "attended" (compareceu), "cancelled" (desistiu)
- RN004: Ordena√ß√£o: por data inscri√ß√£o (mais recente), com filtro por status
- RN005: Search por nome ou email
- RN006: A√ß√µes: enviar lembrete, marcar presen√ßa, remover, exportar lista
- RN007: Limite m√°ximo de inscritos: mostrar X/Limite (ex: 45/50)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em evento
      Quando acesso "Confirmados" ou "Inscritos"
      Ent√£o vejo lista com todos inscritos: nome, email, universidade, curso
      
- [ ] Dado que evento tem limite 50 e 45 inscritos
      Quando visualizo
      Ent√£o vejo contador "45/50 inscritos" + indicator visual de capacidade (90% preenchido)
      
- [ ] Dado que filtro por "Status: Confirmed"
      Quando aplico
      Ent√£o vejo apenas usu√°rios que confirmaram presen√ßa
      
- [ ] Dado que busco por "Jo√£o" na lista
      Quando digito
      Ent√£o resultados filtram em tempo real (nome ou email cont√©m)
      
- [ ] Dado que clico em "Enviar Lembrete"
      Quando seleciono usu√°rios (ou "Todos n√£o confirmados")
      Ent√£o notifica√ß√£o √© enviada: "Lembrete: Evento [T√≠tulo] em [Data] √†s [Hora]"
      
- [ ] Dado que clico em "Marcar Presen√ßa"
      Quando seleciono usu√°rio
      Ent√£o status muda para "attended" + data/hora registrada

##### Prioridade
**Alta** - Gerenciamento essencial

##### Complexidade
**M√©dia** - Query com joins e m√∫ltiplos filtros

##### Depend√™ncias
RF145 (Eventos criados), RF (Sistema de inscri√ß√µes)

##### Notas/Observa√ß√µes
- Tabela `event_registrations`: id, event_id, user_id, registered_at, status, confirmed_at, attended_at, notes
- JOIN com `users` para obter: name, email, university, course
- Query: SELECT * FROM event_registrations JOIN users WHERE event_id=? ORDER BY registered_at DESC
- Filtros: status, data range inscri√ß√£o, universidade
- Search: LIKE '%Jo√£o%' em name ou email
- A√ß√µes em massa: selecionar checkbox + a√ß√µes batch (enviar lembrete, marcar presen√ßa, remover)
- Export: CSV com colunas (Nome, Email, Universidade, Curso, Data Inscri√ß√£o, Status)
- Geolocaliza√ß√£o (opcional): mostrar mapa com localiza√ß√£o de inscritos por universidade
- Valida√ß√µes:
  - N√£o permitir marcar presen√ßa antes de evento come√ßar
  - Avisar se inscritos tentarem se inscrever ap√≥s limite
- Considerar "Check-in QR" (Fase 2) para valida√ß√£o presencial



#### RF164 - Visualizar todas as threads

##### User Story
Como **admin ou moderador**
Quero **visualizar lista completa de todas as threads criadas**
Para **monitorar conte√∫do, identificar problemas e garantir qualidade do f√≥rum**

##### Descri√ß√£o
Painel administrativo mostrando todas as threads com filtros por status, data, criador, categoria e tags. Permite search, ordena√ß√£o e visualiza√ß√£o r√°pida de metadados (respostas, votos, autor).

##### Regras de Neg√≥cio
- RN001: Apenas admins e moderadores autorizados acessam
- RN002: Exibir: t√≠tulo, criador, data, status, n√∫mero respostas, upvotes, tags
- RN003: Status: "published", "draft", "archived", "removed"
- RN004: Ordena√ß√£o padr√£o: mais recentes primeiro
- RN005: Filtros: data range, categoria, tags, criador, status, com/sem respostas
- RN006: Pagina√ß√£o: 50 threads por p√°gina
- RN007: Search por t√≠tulo ou conte√∫do (full-text)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso painel "Gest√£o de Threads"
      Quando carrega
      Ent√£o vejo lista de TODAS threads com pagina√ß√£o (50/p√°gina)
      
- [ ] Dado que 500 threads existem
      Quando visualizo primeira p√°gina
      Ent√£o vejo 50 mais recentes + ordena√ß√£o por data
      
- [ ] Dado que filtro por "Status: Published" + "Data: √öltimos 7 dias"
      Quando aplico
      Ent√£o vejo apenas threads publicadas da √∫ltima semana
      
- [ ] Dado que busco por "Python"
      Quando digito na search
      Ent√£o resultados filtram em tempo real (t√≠tulo ou conte√∫do cont√©m termo)
      
- [ ] Dado que clico em uma thread
      Quando detalhe abre
      Ent√£o vejo: autor, conte√∫do, coment√°rios, upvotes, a√ß√µes (editar/deletar/fixar)
      
- [ ] Dado que aplico m√∫ltiplos filtros
      Quando combino "Categoria: Python" + "Tags: iniciante" + "Sem respostas"
      Ent√£o vejo threads n√£o respondidas com essa categoria/tag

##### Prioridade
**Alta** - Vis√£o geral essencial

##### Complexidade
**M√©dia** - Query agregada com m√∫ltiplos filtros

##### Depend√™ncias
RF022 (Criar thread)

##### Notas/Observa√ß√µes
- Tabela `threads`: id, title, content, category, creator_id, status, created_at, comment_count, upvote_count, is_pinned
- Query com filtros: SELECT * FROM threads WHERE (filters) ORDER BY created_at DESC LIMIT 50 OFFSET ?
- Full-text search: MATCH(title, content) AGAINST(? IN BOOLEAN MODE)
- √çndices em: status, created_at, creator_id, category
- Cache: lista atualiza a cada 5 minutos
- Preview: mostrar primeiras 100 caracteres do conte√∫do
- A√ß√µes em massa: selecionar m√∫ltiplas threads + a√ß√µes batch (deletar, arquivar, fixar)



#### RF165 - Deletar threads inadequadas

##### User Story
Como **admin ou moderador**
Quero **deletar threads que violam diretrizes ou s√£o inadequadas**
Para **manter qualidade do f√≥rum e remover conte√∫do problem√°tico**

##### Descri√ß√£o
Funcionalidade permitindo deletar threads com soft delete padr√£o (preservar hist√≥rico) ou hard delete. Registra motivo, notifica criador e remove coment√°rios associados. Oferece op√ß√£o de revis√£o antes de deletar permanentemente.

##### Regras de Neg√≥cio
- RN001: Apenas admins e moderadores autorizados podem deletar
- RN002: Soft delete padr√£o: status = "removed", mostra "[Removido por modera√ß√£o]"
- RN003: Hard delete dispon√≠vel apenas para admins (com confirma√ß√£o dupla)
- RN004: Motivo obrigat√≥rio (dropdown: "Spam", "Conte√∫do inadequado", "Viola√ß√£o diretrizes", "Outro")
- RN005: Notifica√ß√£o ao criador informando remo√ß√£o + motivo
- RN006: Todos coment√°rios tamb√©m s√£o marcados como removidos
- RN007: Hist√≥rico registra: quem deletou, quando, motivo

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que visualizo thread inadequada
      Quando clico em "Deletar"
      Ent√£o vejo modal com dropdown de motivos pr√©-definidos
      
- [ ] Dado que seleciono motivo "Spam"
      Quando confirmo
      Ent√£o thread muda status para "removed" + notifica√ß√£o enviada ao criador
      
- [ ] Dado que criador recebe notifica√ß√£o
      Quando consulta
      Ent√£o v√™: "Sua thread [T√≠tulo] foi removida. Motivo: Spam"
      
- [ ] Dado que visualizo thread removida
      Quando acesso listagem
      Ent√£o vejo "[Removido por modera√ß√£o]" em lugar do t√≠tulo
      
- [ ] Dado que sou admin e clico em "Hard Delete"
      Quando confirmo (com senha)
      Ent√£o thread √© deletada permanentemente do banco
      
- [ ] Dado que thread √© deletada
      Quando verifico hist√≥rico
      Ent√£o registro mostra: moderador, data, motivo da remo√ß√£o

##### Prioridade
**Alta** - Controle de qualidade

##### Complexidade
**M√©dia** - Soft/hard delete com cascata de coment√°rios

##### Depend√™ncias
RF164 (Visualizar)

##### Notas/Observa√ß√µes
- Tabela `threads`: add `status`, `removed_at`, `removed_by`, `removal_reason`
- Tabela `deleted_threads` (backup): thread_id, thread_data (JSON), deleted_at, deleted_by
- Cascata: UPDATE comments SET status='removed' WHERE thread_id=? (todos coment√°rios marcados)
- Notifica√ß√£o: tipo "thread_removed_moderation" com motivo
- Hard delete: apenas se super_admin_role=true + requer confirma√ß√£o dupla (senha)
- Logs auditoria: tabela `content_moderation_logs`
- Considerarlr "Apela√ß√£o" (Fase 2) onde criador contesta remo√ß√£o



#### RF166 - Editar threads (modera√ß√£o)

##### User Story
Como **admin ou moderador**
Quero **editar threads de qualquer usu√°rio (corrigir t√≠tulo, conte√∫do, tags)**
Para **remover problemas menores sem deletar completamente ou resolver erros**

##### Descri√ß√£o
Funcionalidade permitindo admins/moderadores editar threads para corre√ß√£o (t√≠tulo, conte√∫do, tags, categoria). Registra hist√≥rico de edi√ß√µes e notifica criador se mudan√ßa significativa. Diferencia edi√ß√£o de modera√ß√£o de edi√ß√£o do autor.

##### Regras de Neg√≥cio
- RN001: Apenas admins e moderadores podem editar threads de outros
- RN002: Criador pode editar apenas sua pr√≥pria thread (sem limite de tempo)
- RN003: Moderador n√£o pode editar thread que ele n√£o criou (permiss√£o separada)
- RN004: Hist√≥rico completo: campo alterado, antes/depois, editor, data, motivo
- RN005: Notificar criador se mudan√ßas significativas (t√≠tulo/conte√∫do)
- RN006: Edi√ß√£o requer motivo (registrar por que foi alterado)
- RN007: Badge "[Editado por modera√ß√£o]" aparece se moderador editou

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em thread
      Quando acesso a√ß√µes
      Ent√£o vejo op√ß√£o "Editar" (moderador/admin) ou "Editar Minha Thread" (criador)
      
- [ ] Dado que clico em "Editar"
      Quando formul√°rio abre
      Ent√£o campos edit√°veis: t√≠tulo, conte√∫do, tags, categoria
      
- [ ] Dado que altero t√≠tulo "D√∫vida sobre phyton" ‚Üí "D√∫vida sobre Python"
      Quando salvo
      Ent√£o thread atualiza + notifica√ß√£o: "Sua thread foi editada por modera√ß√£o: [mudan√ßas]"
      
- [ ] Dado que edito conte√∫do
      Quando salvo com motivo "Corrigir ortografia"
      Ent√£o hist√≥rico registra: "Conte√∫do alterado por [moderador]: [motivo]"
      
- [ ] Dado que clico em "Ver Hist√≥rico"
      Quando detalhe abre
      Ent√£o vejo changelog: antes/depois de cada edi√ß√£o com timestamp
      
- [ ] Dado que thread √© editada por moderador
      Quando visualizo thread
      Ent√£o vejo badge "[Editado por modera√ß√£o]" pr√≥ximo ao t√≠tulo

##### Prioridade
**M√©dia** - Flexibilidade de gest√£o

##### Complexidade
**M√©dia** - Update com hist√≥rico e notifica√ß√µes

##### Depend√™ncias
RF164 (Visualizar)

##### Notas/Observa√ß√µes
- Tabela `threads`: campos edit√°veis (title, content, tags, category)
- Tabela `thread_edit_history`: thread_id, edited_by, field_changed, old_value, new_value, reason, edited_at
- Valida√ß√µes: verificar se thread j√° foi deletada/removida antes de editar
- Notifica√ß√£o criador: IF mudan√ßa_significativa (t√≠tulo/conte√∫do) THEN notificar
- Compara√ß√£o antes/depois: destacar campos alterados em cores
- Permiss√£o granular: verificar role antes de permitir edi√ß√£o
- Badge "[Editado por modera√ß√£o]" aparece apenas se editor != criador



#### RF167 - Fixar threads importantes

##### User Story
Como **admin ou moderador**
Quero **fixar/destacar threads importantes no topo do f√≥rum**
Para **dar visibilidade extra a conte√∫do cr√≠tico, respostas √∫teis ou an√∫ncios**

##### Descri√ß√£o
Funcionalidade permitindo marcar threads como "fixada" com badge visual e movimento para topo. Threads fixadas aparecem acima de threads normais. Suporta limite m√°ximo de threads fixadas por categoria.

##### Regras de Neg√≥cio
- RN001: Apenas admins e moderadores podem fixar threads
- RN002: Threads fixadas aparecem no topo (prioridade m√°xima)
- RN003: Limite: m√°ximo 5 threads fixadas por categoria
- RN004: Badge visual: "üìå Fixado" na listagem
- RN005: Notifica√ß√£o opcional aos usu√°rios quando thread √© fixada
- RN006: Timestamp: registra quando foi fixada (para futuro unpin autom√°tico)
- RN007: Ordena√ß√£o dentro de fixadas: por data de fixa√ß√£o (mais recente primeiro)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que visualizo thread importante
      Quando clico em a√ß√µes
      Ent√£o vejo op√ß√£o "Fixar Thread"
      
- [ ] Dado que clico em "Fixar"
      Quando confirmo
      Ent√£o thread move para topo com badge "üìå Fixado"
      
- [ ] Dado que navego f√≥rum
      Quando visualizo listagem
      Ent√£o threads fixadas aparecem acima de threads normais
      
- [ ] Dado que categoria j√° tem 5 threads fixadas
      Quando tento fixar 6¬™
      Ent√£o alerta: "M√°ximo 5 threads fixadas. Desfix uma primeira"
      
- [ ] Dado que thread √© fixada
      Quando visualizo em diferentes categorias
      Ent√£o vejo ordena√ß√£o correta (fixadas no topo, depois por data)
      
- [ ] Dado que clico em "Desfixar"
      Quando confirmo
      Ent√£o thread retorna ao fluxo normal

##### Prioridade
**M√©dia** - Destaque editorial

##### Complexidade
**Baixa** - Update com ordena√ß√£o

##### Depend√™ncias
RF164 (Visualizar)

##### Notas/Observa√ß√µes
- Tabela `threads`: add `is_pinned` (boolean), `pinned_at` (timestamp), `pinned_by`
- Query ordena√ß√£o: ORDER BY (is_pinned DESC, pinned_at DESC, created_at DESC)
- Valida√ß√£o: SELECT COUNT(*) FROM threads WHERE category_id=? AND is_pinned=1 (previne >5)
- Visual: badge com √≠cone üìå + tooltip "Fixado por [moderador] em [data]"
- Remo√ß√£o autom√°tica: considerar "Auto-unpin ap√≥s X dias" (config)
- Hist√≥rico: tabela `thread_pins` com auditoria (quem fixou, quando)
- Cache: atualizar ap√≥s fixa√ß√£o/desfixa√ß√£o



#### RF168 - Arquivar threads antigas

##### User Story
Como **admin**
Quero **arquivar threads muito antigas automaticamente ou manualmente**
Para **melhorar performance, limpeza de banco de dados e manter f√≥rum organizado**

##### Descri√ß√£o
Funcionalidade permitindo arquivar threads com data de cria√ß√£o anterior a X dias (configur√°vel). Threads arquivadas s√£o movidas para se√ß√£o separada, n√£o aparecem em busca/listagem padr√£o, mas permanecem acess√≠veis. Suporta revers√£o.

##### Regras de Neg√≥cio
- RN001: Apenas admins podem arquivar threads manualmente
- RN002: Arquivamento autom√°tico: threads com >90 dias sem atividade (configur√°vel)
- RN003: Status: "archived" (n√£o removido, apenas oculto)
- RN004: Threads arquivadas n√£o aparecem em listagens normais (filtro separado)
- RN005: Busca global pode incluir/excluir arquivadas (prefer√™ncia)
- RN006: Revers√£o poss√≠vel: admin pode "Desarquivar" se necess√°rio
- RN007: Notifica√ß√£o opcional ao criador quando thread √© arquivada

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que thread foi criada h√° 6 meses atr√°s
      Quando job de arquivamento executa
      Ent√£o thread √© movida para "Arquivadas" automaticamente
      
- [ ] Dado que acesso listagem de threads
      Quando visualizo
      Ent√£o n√£o vejo threads arquivadas por padr√£o
      
- [ ] Dado que clico em "Ver Arquivadas"
      Quando filtro ativa
      Ent√£o vejo apenas threads com status "archived"
      
- [ ] Dado que busco globalmente
      Quando pesquiso
      Ent√£o vejo op√ß√£o "Incluir arquivadas?" para estender busca
      
- [ ] Dado que clico em thread arquivada
      Quando acesso detalhe
      Ent√£o vejo badge "[Arquivada]" com data de arquivamento
      
- [ ] Dado que clico em "Desarquivar"
      Quando confirmo
      Ent√£o thread volta ao fluxo normal (status "published")

##### Prioridade
**Baixa** - Limpeza e performance

##### Complexidade
**M√©dia** - Soft archive com job agendado

##### Depend√™ncias
RF164 (Visualizar)

##### Notas/Observa√ß√µes
- Tabela `threads`: add `status='archived'`, `archived_at`, `archived_by`
- Job scheduler: diariamente (02:00) arquivar threads com updated_at < 90 dias atr√°s
- Query: SELECT * FROM threads WHERE status='published' AND updated_at < DATE_SUB(NOW(), INTERVAL 90 DAY)
- Filtro padr√£o: WHERE status IN ('published', 'pinned') - excluir archived
- Busca: par√¢metro opcional `include_archived=true/false` na query
- Revers√£o: admin pode desarquivar com op√ß√£o de restaurar posi√ß√£o original
- Notifica√ß√£o: opt-in para criadores quando thread √© arquivada
- Considerar "Hard delete" ap√≥s 1 ano (Fase 2)