
### M√ìDULO 3: THREADS E F√ìRUM

#### RF022 - Criar nova thread (t√≠tulo, descri√ß√£o, categoria, tags)

##### User Story
Como **aluno cadastrado**
Quero **criar uma nova thread de discuss√£o**
Para **compartilhar d√∫vidas, experi√™ncias ou iniciar discuss√µes com a comunidade**

##### Descri√ß√£o
Formul√°rio de cria√ß√£o de thread onde o usu√°rio pode postar uma discuss√£o com t√≠tulo, descri√ß√£o detalhada, categoria (acad√™mica, carreira, vida universit√°ria, etc.) e tags para facilitar descoberta.

##### Regras de Neg√≥cio
- RN001: T√≠tulo obrigat√≥rio: 10-200 caracteres
- RN002: Descri√ß√£o obrigat√≥ria: 20-5000 caracteres
- RN003: Categoria obrigat√≥ria (lista predefinida)
- RN004: M√≠nimo 1 tag, m√°ximo 5 tags por thread
- RN005: Formata√ß√£o b√°sica permitida: negrito, it√°lico, listas, links
- RN006: Preview em tempo real antes de publicar
- RN007: Thread √© publicada imediatamente (sem modera√ß√£o pr√©via)
- RN008: Autor recebe +10 pontos ao criar thread

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em "Nova Thread"
      Quando preencho t√≠tulo, descri√ß√£o, categoria e 2 tags
      Ent√£o thread √© criada e aparece na listagem imediatamente
      
- [ ] Dado que tento criar thread com t√≠tulo de 5 caracteres
      Quando tento publicar
      Ent√£o vejo valida√ß√£o "T√≠tulo deve ter entre 10-200 caracteres"
      
- [ ] Dado que escrevo descri√ß√£o com formata√ß√£o markdown
      Quando visualizo preview
      Ent√£o vejo formata√ß√£o renderizada (negrito, links, listas)
      
- [ ] Dado que seleciono categoria "Acad√™mica" e tags "C√°lculo, D√∫vida"
      Quando publico thread
      Ent√£o ela √© categorizada corretamente e indexada pelas tags
      
- [ ] Dado que crio thread com sucesso
      Quando thread √© publicada
      Ent√£o recebo +10 pontos e sou redirecionado para p√°gina da thread

##### Prioridade
**Alta** - Funcionalidade core do f√≥rum

##### Complexidade
**M√©dia** - Formul√°rio complexo com valida√ß√µes e formata√ß√£o

##### Depend√™ncias
RF014 (Sistema de tags), RF097 (Sistema de pontos)

##### Notas/Observa√ß√µes
- Editor rico: react-markdown ou react-quill
- Sanitiza√ß√£o de HTML obrigat√≥ria (prevenir XSS)
- Autocomplete de tags baseado em tags populares
- Bot√£o "Rascunho" para salvar antes de publicar (opcional)
- Categorias sugeridas: Acad√™mica, Carreira, Vida Universit√°ria, Eventos, Oportunidades, Off-topic
- Upload de imagens na Fase 2



#### RF023 - Editar thread pr√≥pria

##### User Story
Como **autor de uma thread**
Quero **editar o conte√∫do da minha thread ap√≥s publicar**
Para **corrigir erros, adicionar informa√ß√µes ou atualizar o status**

##### Descri√ß√£o
Funcionalidade que permite ao criador da thread editar t√≠tulo, descri√ß√£o, categoria e tags ap√≥s publica√ß√£o, com registro de hist√≥rico de edi√ß√µes.

##### Regras de Neg√≥cio
- RN001: Apenas autor pode editar sua pr√≥pria thread
- RN002: Admin pode editar qualquer thread (modera√ß√£o)
- RN003: Edi√ß√£o mant√©m hist√≥rico (vers√µes anteriores)
- RN004: Indicador visual "Editado em DD/MM/YYYY HH:MM"
- RN005: Mesmas valida√ß√µes da cria√ß√£o se aplicam
- RN006: Tags e categoria podem ser alteradas
- RN007: Limite de tempo para edi√ß√£o: sem limite (diferente de f√≥runs tradicionais)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que sou autor da thread
      Quando clico em "Editar"
      Ent√£o vejo formul√°rio pr√©-preenchido com conte√∫do atual
      
- [ ] Dado que edito t√≠tulo de "D√∫vida sobre C√°lculo" para "D√∫vida sobre C√°lculo 2"
      Quando salvo altera√ß√µes
      Ent√£o t√≠tulo atualiza e aparece badge "Editado"
      
- [ ] Dado que n√£o sou autor da thread
      Quando visualizo thread de outro usu√°rio
      Ent√£o n√£o vejo bot√£o "Editar"
      
- [ ] Dado que sou admin
      Quando visualizo qualquer thread
      Ent√£o vejo bot√£o "Editar" (modera√ß√£o)
      
- [ ] Dado que edito thread 3 vezes
      Quando verifico hist√≥rico
      Ent√£o vejo registro das 3 vers√µes com timestamps

##### Prioridade
**M√©dia** - Importante mas n√£o bloqueia MVP

##### Complexidade
**M√©dia** - Requer controle de permiss√µes e versionamento

##### Depend√™ncias
RF022 (Criar thread)

##### Notas/Observa√ß√µes
- Bot√£o "Editar" vis√≠vel apenas para autor
- Modal de confirma√ß√£o antes de salvar altera√ß√µes
- Hist√≥rico de edi√ß√µes em modal separado (clic√°vel)
- Diff visual entre vers√µes (opcional para Fase 2)
- Logs de auditoria: quem editou, quando, o que mudou
- Notificar moderadores de edi√ß√µes suspeitas (muitas em curto per√≠odo)



#### RF024 - Deletar thread pr√≥pria

##### User Story
Como **autor de uma thread**
Quero **deletar minha thread**
Para **remover conte√∫do que n√£o √© mais relevante ou foi postado por engano**

##### Descri√ß√£o
Funcionalidade que permite ao autor deletar sua pr√≥pria thread, com confirma√ß√£o obrigat√≥ria e op√ß√£o de soft delete (recuper√°vel por admin).

##### Regras de Neg√≥cio
- RN001: Apenas autor pode deletar sua pr√≥pria thread
- RN002: Admin pode deletar qualquer thread (modera√ß√£o)
- RN003: Confirma√ß√£o obrigat√≥ria antes de deletar
- RN004: Soft delete: thread n√£o √© removida do banco, apenas marcada como deletada
- RN005: Threads deletadas n√£o aparecem em listagens p√∫blicas
- RN006: Admin pode restaurar threads deletadas
- RN007: Pontos ganhos na cria√ß√£o da thread s√£o revertidos (-10 pts)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em "Deletar" na minha thread
      Quando confirmo a a√ß√£o
      Ent√£o thread √© removida da listagem e marcada como deletada
      
- [ ] Dado que tento deletar sem confirmar
      Quando clico em "Cancelar" no modal
      Ent√£o thread permanece intacta
      
- [ ] Dado que deleto thread
      Quando verifico meus pontos
      Ent√£o perco os 10 pontos que ganhei ao criar
      
- [ ] Dado que n√£o sou autor da thread
      Quando visualizo thread de outro usu√°rio
      Ent√£o n√£o vejo bot√£o "Deletar"
      
- [ ] Dado que sou admin e deleto thread de usu√°rio
      Quando deleto
      Ent√£o thread √© marcada como deletada e autor √© notificado

##### Prioridade
**M√©dia** - Importante para controle do usu√°rio sobre seu conte√∫do

##### Complexidade
**Baixa** - CRUD b√°sico com soft delete

##### Depend√™ncias
RF022 (Criar thread), RF097 (Sistema de pontos)

##### Notas/Observa√ß√µes
- Modal de confirma√ß√£o: "Tem certeza? Esta a√ß√£o n√£o pode ser desfeita"
- Soft delete: campo `deleted_at` na tabela threads
- Admin v√™ threads deletadas com badge "Deletada" no painel
- Notifica√ß√£o ao autor se admin deletar (modera√ß√£o)
- Considerar "Arquivar" como alternativa menos dr√°stica
- Coment√°rios tamb√©m s√£o ocultados quando thread √© deletada



#### RF025 - Visualizar lista de threads

##### User Story
Como **aluno cadastrado**
Quero **visualizar lista de todas as threads da comunidade**
Para **explorar discuss√µes, encontrar respostas e participar de conversas**

##### Descri√ß√£o
P√°gina principal do f√≥rum exibindo todas as threads ativas em formato de lista, com informa√ß√µes resumidas (t√≠tulo, autor, categoria, preview, estat√≠sticas) e op√ß√µes de filtro e ordena√ß√£o.

##### Regras de Neg√≥cio
- RN001: Lista exibe threads n√£o deletadas
- RN002: Cada item mostra: t√≠tulo, autor, categoria, preview (100 caracteres), upvotes, coment√°rios, data
- RN003: Pagina√ß√£o: 20 threads por p√°gina
- RN004: Ordena√ß√£o padr√£o: mais recentes
- RN005: Threads marcadas como "Resolvida/√ötil" tem badge visual
- RN006: Indicador de threads n√£o lidas (opcional)
- RN007: Load time <2 segundos para primeira p√°gina

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso p√°gina do f√≥rum
      Quando carrega
      Ent√£o vejo lista de 20 threads mais recentes com t√≠tulo, autor e preview
      
- [ ] Dado que h√° 45 threads no total
      Quando navego pela lista
      Ent√£o vejo pagina√ß√£o: P√°gina 1 (20), P√°gina 2 (20), P√°gina 3 (5)
      
- [ ] Dado que thread tem 15 upvotes e 8 coment√°rios
      Quando visualizo na lista
      Ent√£o vejo √≠cones mostrando "15 ‚Üë" e "8 üí¨"
      
- [ ] Dado que thread foi marcada como "Resolvida"
      Quando aparece na lista
      Ent√£o vejo badge verde "‚úì Resolvida"
      
- [ ] Dado que clico em uma thread
      Quando interajo
      Ent√£o sou redirecionado para p√°gina de detalhes da thread

##### Prioridade
**Alta** - P√°gina principal do f√≥rum

##### Complexidade
**M√©dia** - Listagem com agrega√ß√µes e performance cr√≠tica

##### Depend√™ncias
RF022 (Criar thread), RF045 (Pagina√ß√£o)

##### Notas/Observa√ß√µes
- Query otimizada com JOIN para buscar autor, categoria, contadores
- √çndices no banco: created_at, category, upvotes
- Skeleton loading enquanto carrega
- Infinite scroll como alternativa √† pagina√ß√£o (UX)
- Cache de listagem por 1 minuto
- Filtros laterais: categoria, universidade, tags



#### RF026 - Visualizar detalhes de uma thread

##### User Story
Como **aluno cadastrado**
Quero **visualizar thread completa com todos os coment√°rios**
Para **ler a discuss√£o inteira e participar com meu coment√°rio**

##### Descri√ß√£o
P√°gina de detalhes exibindo thread completa (t√≠tulo, descri√ß√£o formatada, autor, categoria, tags, data) seguida de lista de coment√°rios em ordem cronol√≥gica, com op√ß√µes de intera√ß√£o (upvote, comentar, marcar como resolvida).

##### Regras de Neg√≥cio
- RN001: Exibir thread completa com formata√ß√£o markdown renderizada
- RN002: Mostrar perfil do autor (foto, nome, curso, universidade)
- RN003: Tags clic√°veis (levam para busca por tag)
- RN004: Bot√µes de a√ß√£o: upvote, downvote, comentar, compartilhar
- RN005: Lista de coment√°rios abaixo da thread
- RN006: Apenas autor pode marcar como "Resolvida"
- RN007: Breadcrumb: F√≥rum > Categoria > T√≠tulo da thread

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso thread via URL
      Quando p√°gina carrega
      Ent√£o vejo t√≠tulo, descri√ß√£o completa, autor, categoria, tags e coment√°rios
      
- [ ] Dado que thread tem descri√ß√£o com markdown
      Quando visualizo
      Ent√£o formata√ß√£o √© renderizada (negrito, links, listas)
      
- [ ] Dado que clico em tag "Python"
      Quando interajo
      Ent√£o sou redirecionado para lista de threads com tag "Python"
      
- [ ] Dado que sou autor da thread
      Quando visualizo minha thread
      Ent√£o vejo bot√µes "Editar", "Deletar", "Marcar como Resolvida"
      
- [ ] Dado que n√£o sou autor
      Quando visualizo thread de outro usu√°rio
      Ent√£o vejo apenas "Upvote", "Downvote", "Comentar"

##### Prioridade
**Alta** - P√°gina core de consumo de conte√∫do

##### Complexidade
**M√©dia** - Renderiza√ß√£o complexa com m√∫ltiplos componentes

##### Depend√™ncias
RF022 (Criar thread), RF027 (Coment√°rios), RF030-RF033 (Votos)

##### Notas/Observa√ß√µes
- Markdown renderer: react-markdown com plugins
- Syntax highlighting para blocos de c√≥digo (Prism.js)
- Bot√£o "Compartilhar" gera link copi√°vel
- Meta tags para preview em redes sociais (Open Graph)
- Coment√°rios carregados via lazy loading se >50
- Ainda scroll autom√°tico para coment√°rio espec√≠fico (deep linking)



#### RF027 - Comentar em threads

##### User Story
Como **aluno cadastrado**
Quero **comentar em threads**
Para **responder d√∫vidas, compartilhar minha experi√™ncia e contribuir com a discuss√£o**

##### Descri√ß√£o
Campo de coment√°rio ao final da p√°gina de thread permitindo usu√°rios adicionarem respostas, com formata√ß√£o b√°sica e valida√ß√µes de conte√∫do.

##### Regras de Neg√≥cio
- RN001: Coment√°rio obrigat√≥rio: 10-2000 caracteres
- RN002: Formata√ß√£o b√°sica permitida (markdown simplificado)
- RN003: Coment√°rio publicado imediatamente (sem modera√ß√£o pr√©via)
- RN004: Autor recebe +5 pontos por coment√°rio
- RN005: Criador da thread recebe notifica√ß√£o de novo coment√°rio
- RN006: Ordem cronol√≥gica (mais antigo primeiro)
- RN007: Limitar 1 coment√°rio a cada 30 segundos (anti-spam)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que escrevo coment√°rio de 50 caracteres
      Quando clico em "Publicar"
      Ent√£o coment√°rio aparece imediatamente na lista
      
- [ ] Dado que tento comentar com 5 caracteres
      Quando tento publicar
      Ent√£o vejo valida√ß√£o "Coment√°rio deve ter no m√≠nimo 10 caracteres"
      
- [ ] Dado que publico coment√°rio
      Quando sistema processa
      Ent√£o recebo +5 pontos e autor da thread recebe notifica√ß√£o
      
- [ ] Dado que tentei comentar h√° 10 segundos
      Quando tento comentar novamente
      Ent√£o vejo mensagem "Aguarde 20 segundos para comentar novamente"
      
- [ ] Dado que escrevo coment√°rio com links
      Quando publico
      Ent√£o links s√£o renderizados como clic√°veis

##### Prioridade
**Alta** - Core de intera√ß√£o e engajamento

##### Complexidade
**M√©dia** - Requer valida√ß√µes, rate limiting e notifica√ß√µes

##### Depend√™ncias
RF026 (Visualizar thread), RF098 (Sistema de pontos), RF170 (Notifica√ß√µes)

##### Notas/Observa√ß√µes
- Textarea expans√≠vel com preview opcional
- Rate limiting: 1 coment√°rio/30s (prevenir spam)
- Sanitiza√ß√£o de HTML obrigat√≥ria
- Bot√£o "Responder a coment√°rio" (threading) na Fase 2
- Men√ß√µes com @ (ex: @usuario) na Fase 2
- Emojis permitidos üòä
- Auto-save de rascunho em localStorage



#### RF028 - Editar coment√°rio pr√≥prio

##### User Story
Como **autor de um coment√°rio**
Quero **editar meu coment√°rio ap√≥s publicar**
Para **corrigir erros ou adicionar informa√ß√µes relevantes**

##### Descri√ß√£o
Funcionalidade permitindo edi√ß√£o de coment√°rios pr√≥prios com limite de tempo e indicador visual de edi√ß√£o.

##### Regras de Neg√≥cio
- RN001: Apenas autor pode editar seu coment√°rio
- RN002: Admin pode editar qualquer coment√°rio (modera√ß√£o)
- RN003: Limite de tempo para edi√ß√£o: 15 minutos ap√≥s publica√ß√£o
- RN004: Indicador visual "Editado" ap√≥s modifica√ß√£o
- RN005: Hist√≥rico de edi√ß√µes n√£o √© mantido (diferente de threads)
- RN006: Mesmas valida√ß√µes de cria√ß√£o se aplicam
- RN007: Upvotes/downvotes s√£o mantidos ap√≥s edi√ß√£o

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que publiquei coment√°rio h√° 5 minutos
      Quando clico em "Editar"
      Ent√£o vejo campo pr√©-preenchido e posso modificar
      
- [ ] Dado que publiquei coment√°rio h√° 20 minutos
      Quando tento editar
      Ent√£o n√£o vejo bot√£o "Editar" (prazo expirado)
      
- [ ] Dado que edito coment√°rio
      Quando salvo altera√ß√µes
      Ent√£o coment√°rio atualiza e aparece badge "Editado"
      
- [ ] Dado que n√£o sou autor do coment√°rio
      Quando visualizo coment√°rio de outro usu√°rio
      Ent√£o n√£o vejo bot√£o "Editar"
      
- [ ] Dado que coment√°rio tem 5 upvotes
      Quando edito o texto
      Ent√£o upvotes s√£o preservados (n√£o resetam)

##### Prioridade
**Baixa** - Nice to have mas n√£o cr√≠tico

##### Complexidade
**Baixa** - CRUD simples com valida√ß√£o de tempo

##### Depend√™ncias
RF027 (Comentar)

##### Notas/Observa√ß√µes
- Bot√£o "Editar" vis√≠vel apenas dentro de 15 minutos
- Modal inline ou edi√ß√£o in-place (UX)
- C√°lculo de tempo restante exibido: "Edit√°vel por mais 10min"
- Admin n√£o tem limite de tempo
- Badge "Editado" em cinza claro (discreto)



#### RF029 - Deletar coment√°rio pr√≥prio

##### User Story
Como **autor de um coment√°rio**
Quero **deletar meu coment√°rio**
Para **remover conte√∫do que n√£o √© mais relevante ou postei por engano**

##### Descri√ß√£o
Funcionalidade de dele√ß√£o de coment√°rios pr√≥prios com confirma√ß√£o e soft delete, mantendo estrutura da discuss√£o.

##### Regras de Neg√≥cio
- RN001: Apenas autor pode deletar seu coment√°rio
- RN002: Admin pode deletar qualquer coment√°rio (modera√ß√£o)
- RN003: Confirma√ß√£o obrigat√≥ria antes de deletar
- RN004: Soft delete: coment√°rio mostra "[Coment√°rio removido pelo autor]"
- RN005: Upvotes/downvotes s√£o removidos
- RN006: Pontos ganhos s√£o revertidos (-5 pts)
- RN007: Sem limite de tempo para deletar

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em "Deletar" no meu coment√°rio
      Quando confirmo
      Ent√£o coment√°rio √© substitu√≠do por "[Coment√°rio removido pelo autor]"
      
- [ ] Dado que deleto coment√°rio com 3 upvotes
      Quando dele√ß√£o √© processada
      Ent√£o upvotes s√£o removidos e perco 5 pontos
      
- [ ] Dado que n√£o sou autor do coment√°rio
      Quando visualizo coment√°rio de outro usu√°rio
      Ent√£o n√£o vejo bot√£o "Deletar"
      
- [ ] Dado que admin deleta coment√°rio de usu√°rio
      Quando deleta
      Ent√£o aparece "[Coment√°rio removido por modera√ß√£o]"
      
- [ ] Dado que tento deletar sem confirmar
      Quando clico em "Cancelar"
      Ent√£o coment√°rio permanece intacto

##### Prioridade
**M√©dia** - Importante para controle do usu√°rio

##### Complexidade
**Baixa** - Soft delete simples

##### Depend√™ncias
RF027 (Comentar), RF098 (Sistema de pontos)

##### Notas/Observa√ß√µes
- Soft delete mant√©m estrutura da thread
- Mensagem diferenciada: autor vs modera√ß√£o
- Modal de confirma√ß√£o obrigat√≥rio
- Coment√°rios deletados n√£o contam em estat√≠sticas
- Admin v√™ texto original (modera√ß√£o)
- Considerar "hard delete" ap√≥s 90 dias (LGPD)



#### RF030 - Sistema de upvote em threads

##### User Story
Como **aluno cadastrado**
Quero **dar upvote em threads √∫teis ou interessantes**
Para **destacar conte√∫do de qualidade e ajudar outros alunos a encontrar boas discuss√µes**

##### Descri√ß√£o
Sistema de vota√ß√£o positiva em threads permitindo usu√°rios valorizarem conte√∫do relevante, influenciando ordena√ß√£o e gamifica√ß√£o.

##### Regras de Neg√≥cio
- RN001: Cada usu√°rio pode dar 1 upvote por thread
- RN002: Upvote pode ser removido (toggle)
- RN003: N√£o √© poss√≠vel upvote e downvote simultaneamente
- RN004: Autor da thread recebe +2 pontos por upvote
- RN005: Contador de upvotes vis√≠vel para todos
- RN006: Upvote influencia ordena√ß√£o "mais populares"
- RN007: Pr√≥prio autor n√£o pode votar em sua thread

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que vejo thread com 10 upvotes
      Quando clico em upvote
      Ent√£o contador atualiza para 11 e bot√£o fica destacado
      
- [ ] Dado que j√° dei upvote
      Quando clico novamente no upvote
      Ent√£o voto √© removido e contador volta para 10
      
- [ ] Dado que dei upvote e tento dar downvote
      Quando clico em downvote
      Ent√£o upvote √© removido automaticamente e downvote √© registrado
      
- [ ] Dado que sou autor da thread
      Quando visualizo minha thread
      Ent√£o bot√µes de voto est√£o desabilitados/ocultos
      
- [ ] Dado que algu√©m d√° upvote na minha thread
      Quando voto √© registrado
      Ent√£o recebo +2 pontos automaticamente

##### Prioridade
**Alta** - Core de gamifica√ß√£o e curadoria

##### Complexidade
**M√©dia** - Sistema de vota√ß√£o com regras de neg√≥cio

##### Depend√™ncias
RF022 (Criar thread), RF099 (Sistema de pontos)

##### Depend√™ncias
RF022 (Criar thread), RF099 (Pontos por upvotes)

##### Notas/Observa√ß√µes
- Tabela `votes`: user_id, thread_id, vote_type (up/down)
- Constraint UNIQUE em (user_id, thread_id)
- Atualiza√ß√£o otimista no frontend (instant feedback)
- Debounce de 500ms para evitar cliques m√∫ltiplos
- √çcone visual: seta para cima (‚Üë) ou thumb up (üëç)
- Contador centralizado entre upvote e downvote



#### RF031 - Sistema de downvote em threads

##### User Story
Como **aluno cadastrado**
Quero **dar downvote em threads irrelevantes ou de baixa qualidade**
Para **sinalizar conte√∫do inadequado e melhorar qualidade do f√≥rum**

##### Descri√ß√£o
Sistema de vota√ß√£o negativa em threads permitindo usu√°rios sinalizarem conte√∫do de baixa qualidade, influenciando ordena√ß√£o.

##### Regras de Neg√≥cio
- RN001: Cada usu√°rio pode dar 1 downvote por thread
- RN002: Downvote pode ser removido (toggle)
- RN003: N√£o √© poss√≠vel upvote e downvote simultaneamente
- RN004: Autor da thread N√ÉO perde pontos por downvote (evitar des√¢nimo)
- RN005: Threads com muitos downvotes ficam menos vis√≠veis
- RN006: Pr√≥prio autor n√£o pode votar em sua thread
- RN007: Downvote n√£o √© identific√°vel (an√¥nimo para autor)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que vejo thread com -3 downvotes
      Quando clico em downvote
      Ent√£o contador atualiza para -4 e bot√£o fica destacado
      
- [ ] Dado que j√° dei downvote
      Quando clico novamente no downvote
      Ent√£o voto √© removido e contador volta para -3
      
- [ ] Dado que dei downvote e tento dar upvote
      Quando clico em upvote
      Ent√£o downvote √© removido e upvote √© registrado
      
- [ ] Dado que thread tem -10 downvotes
      Quando ordeno por "mais populares"
      Ent√£o essa thread aparece no final da lista
      
- [ ] Dado que algu√©m d√° downvote na minha thread
      Quando verifico meus pontos
      Ent√£o n√£o perdi pontos (sistema n√£o penaliza)

##### Prioridade
**M√©dia** - Complemento do upvote mas menos cr√≠tico

##### Complexidade
**Baixa** - Espelho do sistema de upvote

##### Depend√™ncias
RF022 (Criar thread), RF030 (Sistema de upvote)

##### Notas/Observa√ß√µes
- Mesma tabela `votes` com vote_type = 'down'
- Score da thread: upvotes - downvotes
- N√£o mostrar quem deu downvote (privacidade)
- Considerar tooltip explicativo: "Use para conte√∫do irrelevante"
- Threads com score muito negativo podem entrar em review autom√°tico
- Admin v√™ hist√≥rico de votos (modera√ß√£o)



#### RF032 - Sistema de upvote em coment√°rios

##### User Story
Como **aluno cadastrado**
Quero **dar upvote em coment√°rios √∫teis**
Para **destacar respostas de qualidade que ajudaram na discuss√£o**

##### Descri√ß√£o
Sistema de vota√ß√£o positiva em coment√°rios individuais, similar ao de threads, valorizando contribui√ß√µes relevantes.

##### Regras de Neg√≥cio
- RN001: Cada usu√°rio pode dar 1 upvote por coment√°rio
- RN002: Upvote pode ser removido (toggle)
- RN003: N√£o √© poss√≠vel upvote e downvote simultaneamente
- RN004: Autor do coment√°rio recebe +2 pontos por upvote
- RN005: Contador de upvotes vis√≠vel para todos
- RN006: Coment√°rios com mais upvotes podem ser destacados
- RN007: Pr√≥prio autor n√£o pode votar em seu coment√°rio

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que vejo coment√°rio com 5 upvotes
      Quando clico em upvote
      Ent√£o contador atualiza para 6 e bot√£o fica destacado
      
- [ ] Dado que j√° dei upvote
      Quando clico novamente
      Ent√£o voto √© removido e contador volta para 5
      
- [ ] Dado que sou autor do coment√°rio
      Quando visualizo meu coment√°rio
      Ent√£o bot√µes de voto est√£o desabilitados
      
- [ ] Dado que algu√©m d√° upvote no meu coment√°rio
      Quando voto √© registrado
      Ent√£o recebo +2 pontos automaticamente
      
- [ ] Dado que coment√°rio tem 20+ upvotes
      Quando thread carrega
      Ent√£o coment√°rio pode ser destacado visualmente (badge "√ötil")

##### Prioridade
**Alta** - Core de gamifica√ß√£o em coment√°rios

##### Complexidade
**M√©dia** - Similar ao upvote de threads

##### Depend√™ncias
RF027 (Comentar), RF099 (Pontos por upvotes)

##### Notas/Observa√ß√µes
- Tabela `comment_votes`: user_id, comment_id, vote_type
- Constraint UNIQUE em (user_id, comment_id)
- Coment√°rios podem ser ordenados por upvotes (opcional)
- Badge "Melhor Resposta" para coment√°rio mais votado
- Autor da thread pode marcar "Resposta Aceita" (Fase 2)



#### RF033 - Sistema de downvote em coment√°rios

##### User Story
Como **aluno cadastrado**
Quero **dar downvote em coment√°rios irrelevantes ou incorretos**
Para **sinalizar respostas de baixa qualidade ou informa√ß√µes erradas**

##### Descri√ß√£o
Sistema de vota√ß√£o negativa em coment√°rios permitindo usu√°rios sinalizarem respostas inadequadas ou incorretas.

##### Regras de Neg√≥cio
- RN001: Cada usu√°rio pode dar 1 downvote por coment√°rio
- RN002: Downvote pode ser removido (toggle)
- RN003: N√£o √© poss√≠vel upvote e downvote simultaneamente
- RN004: Autor do coment√°rio N√ÉO perde pontos por downvote
- RN005: Coment√°rios com muitos downvotes ficam minimizados
- RN006: Pr√≥prio autor n√£o pode votar em seu coment√°rio
- RN007: Downvote √© an√¥nimo para o autor

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que vejo coment√°rio com -2 downvotes
      Quando clico em downvote
      Ent√£o contador atualiza para -3 e bot√£o fica destacado
      
- [ ] Dado que coment√°rio tem -5 ou menos downvotes
      Quando thread carrega
      Ent√£o coment√°rio aparece minimizado com op√ß√£o "Expandir"
      
- [ ] Dado que j√° dei downvote
      Quando clico novamente
      Ent√£o voto √© removido e contador volta para -2
      
- [ ] Dado que algu√©m d√° downvote no meu coment√°rio
      Quando verifico pontos
      Ent√£o n√£o perdi pontos (n√£o penaliza)
      
- [ ] Dado que coment√°rio tem score muito negativo (-10)
      Quando carrega
      Ent√£o entra em fila de modera√ß√£o autom√°tica

##### Prioridade
**M√©dia** - Complemento do upvote em coment√°rios

##### Complexidade
**Baixa** - Similar ao downvote de threads

##### Depend√™ncias
RF027 (Comentar), RF032 (Upvote em coment√°rios)

##### Notas/Observa√ß√µes
- Mesma tabela `comment_votes` com vote_type = 'down'
- Coment√°rios minimizados: mostrar apenas primeira linha + "..."
- Tooltip: "Coment√°rio minimizado por baixa relev√¢ncia"
- Admin recebe alerta de coment√°rios com score muito negativo
- Considerar "colapsar automaticamente" se score < -5



#### RF034 - Limitar 1 voto por usu√°rio por thread/coment√°rio

##### User Story
Como **sistema ISMART Conecta**
Quero **garantir que cada usu√°rio vote apenas uma vez por thread/coment√°rio**
Para **manter integridade do sistema de vota√ß√£o e evitar manipula√ß√£o**

##### Descri√ß√£o
Constraint de banco de dados e valida√ß√£o de backend garantindo que cada usu√°rio possa registrar apenas 1 voto (upvote OU downvote) por thread ou coment√°rio.

##### Regras de Neg√≥cio
- RN001: Constraint UNIQUE em (user_id, thread_id) para votos em threads
- RN002: Constraint UNIQUE em (user_id, comment_id) para votos em coment√°rios
- RN003: Trocar voto (up‚Üídown ou down‚Üíup) √© permitido
- RN004: Remover voto (toggle) √© permitido
- RN005: Tentativa de voto duplicado retorna erro 409 (Conflict)
- RN006: Frontend desabilita bot√£o ap√≥s voto (UX)
- RN007: Logs de tentativas de manipula√ß√£o de votos

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que tento votar duas vezes via API direta
      Quando envio segundo voto
      Ent√£o backend retorna erro 409 "Voc√™ j√° votou neste item"
      
- [ ] Dado que dei upvote
      Quando tento dar upvote novamente via requisi√ß√£o direta
      Ent√£o banco de dados rejeita por viola√ß√£o de constraint
      
- [ ] Dado que dei upvote e mudo para downvote
      Quando sistema processa
      Ent√£o upvote √© removido (DELETE) e downvote √© inserido (INSERT)
      
- [ ] Dado que dei upvote
      Quando visualizo thread no frontend
      Ent√£o bot√£o de upvote est√° destacado e downvote normal
      
- [ ] Dado que sistema detecta tentativas m√∫ltiplas de voto
      Quando usu√°rio tenta manipular
      Ent√£o logs registram comportamento suspeito

##### Prioridade
**Alta** - Cr√≠tico para integridade do sistema

##### Complexidade
**Baixa** - Constraint de banco de dados

##### Depend√™ncias
RF030-RF033 (Todos os sistemas de voto)

##### Notas/Observa√ß√µes
- Tabela `votes`: UNIQUE KEY (user_id, thread_id)
- Tabela `comment_votes`: UNIQUE KEY (user_id, comment_id)
- Frontend sincroniza estado ap√≥s cada a√ß√£o
- Websocket para atualiza√ß√£o em tempo real (opcional)
- Rate limiting adicional: m√°ximo 10 votos por minuto
- Logs para detec√ß√£o de bots



#### RF035 - Marcar thread como "Resolvida/√ötil"

##### User Story
Como **autor de uma thread**
Quero **marcar minha thread como resolvida**
Para **indicar que minha d√∫vida foi esclarecida e ajudar outros alunos**

##### Descri√ß√£o
Funcionalidade permitindo autor da thread marcar discuss√£o como "Resolvida" (para d√∫vidas) ou "√ötil" (para compartilhamentos), com badge visual destacado.

##### Regras de Neg√≥cio
- RN001: Apenas autor da thread pode marcar como resolvida
- RN002: Admin tamb√©m pode marcar como resolvida
- RN003: Marcar como resolvida concede +15 pontos ao autor
- RN004: Badge "‚úì Resolvida" aparece na listagem e detalhes
- RN005: Threads resolvidas podem ser filtradas
- RN006: Poss√≠vel desmarcar como resolvida (toggle)
- RN007: Ao marcar, pode opcionalmente destacar coment√°rio que ajudou

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que sou autor da thread
      Quando clico em "Marcar como Resolvida"
      Ent√£o thread recebe badge verde "‚úì Resolvida" e ganho +15 pontos
      
- [ ] Dado que marquei como resolvida
      Quando thread aparece na listagem
      Ent√£o badge √© vis√≠vel ao lado do t√≠tulo
      
- [ ] Dado que n√£o sou autor da thread
      Quando visualizo thread de outro usu√°rio
      Ent√£o n√£o vejo bot√£o "Marcar como Resolvida"
      
- [ ] Dado que marco thread como resolvida
      Quando seleciono coment√°rio que ajudou
      Ent√£o coment√°rio recebe badge especial "Resposta Aceita"
      
- [ ] Dado que thread j√° est√° resolvida
      Quando clico novamente
      Ent√£o status volta para "n√£o resolvida" e perco os 15 pontos

##### Prioridade
**M√©dia** - Importante para organiza√ß√£o do f√≥rum

##### Complexidade
**Baixa** - Flag booleana com valida√ß√£o

##### Depend√™ncias
RF022 (Criar thread), RF100 (Pontos por resolu√ß√£o)

##### Notas/Observa√ß√µes
- Campo `resolved` boolean na tabela threads
- Campo `resolved_at` timestamp para auditoria
- Badge destacado: fundo verde com checkmark
- Filtro: "Mostrar apenas resolvidas" ou "N√£o resolvidas"
- Notificar usu√°rios que comentaram quando thread √© resolvida
- Estat√≠stica: % de threads resolvidas por categoria



#### RF036 - Busca de threads por palavra-chave

##### User Story
Como **aluno cadastrado**
Quero **buscar threads por palavra-chave**
Para **encontrar discuss√µes sobre temas espec√≠ficos rapidamente**

##### Descri√ß√£o
Sistema de busca textual em threads permitindo busca por termos em t√≠tulo, descri√ß√£o e tags, com resultados ranqueados por relev√¢ncia.

##### Regras de Neg√≥cio
- RN001: Busca em t√≠tulo (peso maior), descri√ß√£o e tags
- RN002: Busca case-insensitive
- RN003: Termos com menos de 3 caracteres s√£o ignorados
- RN004: Resultados ordenados por relev√¢ncia (scoring)
- RN005: Highlight de termos encontrados no resultado
- RN006: Busca suporta m√∫ltiplas palavras (OR)
- RN007: Filtros adicionais aplic√°veis sobre resultados

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que busco por "c√°lculo"
      Quando submeto busca
      Ent√£o vejo threads com "c√°lculo" no t√≠tulo, descri√ß√£o ou tags
      
- [ ] Dado que busco por "C√°lculo" (mai√∫scula)
      Quando sistema processa
      Ent√£o resultados s√£o id√™nticos a busca por "c√°lculo" (case-insensitive)
      
- [ ] Dado que busco por "python programa√ß√£o"
      Quando submeto
      Ent√£o vejo threads que cont√™m "python" OU "programa√ß√£o"
      
- [ ] Dado que busco e encontro 5 resultados
      Quando visualizo lista
      Ent√£o termos buscados aparecem destacados em amarelo
      
- [ ] Dado que busco por "aa" (2 caracteres)
      Quando submeto
      Ent√£o vejo mensagem "Busque por termos com ao menos 3 caracteres"

##### Prioridade
**Alta** - Essencial para descoberta de conte√∫do

##### Complexidade
**M√©dia** - Requer indexa√ß√£o e relev√¢ncia

##### Depend√™ncias
RF025 (Lista de threads)

##### Notas/Observa√ß√µes
- Full-text search: PostgreSQL tsvector ou Elasticsearch
- √çndices: t√≠tulo, descri√ß√£o (GIN index)
- Scoring: ts_rank para relev√¢ncia
- Autocomplete com sugest√µes (Fase 2)
- Hist√≥rico de buscas do usu√°rio
- Analytics: termos mais buscados
- Debounce de 300ms em search box



#### RF037 - Filtro de threads por universidade

##### User Story
Como **aluno cadastrado**
Quero **filtrar threads por universidade espec√≠fica**
Para **ver discuss√µes relevantes ao meu contexto acad√™mico**

##### Descri√ß√£o
Filtro lateral ou dropdown permitindo visualizar apenas threads de alunos de determinada universidade.

##### Regras de Neg√≥cio
- RN001: Lista de universidades vem do cadastro dos usu√°rios
- RN002: Filtro pode ser combinado com outros filtros
- RN003: Contador de threads por universidade vis√≠vel
- RN004: Filtro "Todas" √© padr√£o
- RN005: Minha universidade pode ser destacada ("Minha Universidade")
- RN006: Threads sem universidade associada n√£o aparecem em filtros espec√≠ficos
- RN007: Ordena√ß√£o alfab√©tica das universidades

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono filtro "USP"
      Quando aplico
      Ent√£o vejo apenas threads de alunos da USP
      
- [ ] Dado que h√° 30 threads da USP e 20 da UNICAMP
      Quando visualizo filtro
      Ent√£o vejo "USP (30)" e "UNICAMP (20)"
      
- [ ] Dado que seleciono "Minha Universidade" (USP)
      Quando aplico
      Ent√£o vejo threads apenas de alunos da USP
      
- [ ] Dado que combino filtro USP + categoria "Acad√™mica"
      Quando aplico ambos
      Ent√£o vejo apenas threads acad√™micas de alunos da USP
      
- [ ] Dado que seleciono "Todas"
      Quando aplico
      Ent√£o filtro √© removido e vejo threads de todas universidades

##### Prioridade
**Alta** - Essencial para relev√¢ncia do conte√∫do

##### Complexidade
**Baixa** - Filtro SQL simples

##### Depend√™ncias
RF025 (Lista de threads), RF053 (Grupos por universidade)

##### Notas/Observa√ß√µes
- Query: JOIN users ON threads.user_id WHERE users.university = ?
- Sidebar com checkboxes ou dropdown
- Badge visual indicando filtro ativo
- Link r√°pido: "Ver threads da minha universidade"
- Cache de contadores por 5 minutos
- Top 10 universidades com mais threads



#### RF038 - Filtro de threads por categoria

##### User Story
Como **aluno cadastrado**
Quero **filtrar threads por categoria**
Para **encontrar discuss√µes sobre temas espec√≠ficos (acad√™mico, carreira, etc.)**

##### Descri√ß√£o
Sistema de categoriza√ß√£o de threads com filtro permitindo visualizar apenas threads de categorias espec√≠ficas.

##### Regras de Neg√≥cio
- RN001: Categorias predefinidas: Acad√™mica, Carreira, Vida Universit√°ria, Eventos, Oportunidades, Off-topic
- RN002: Cada thread pertence a exatamente 1 categoria
- RN003: Contador de threads por categoria vis√≠vel
- RN004: Filtro combin√°vel com outros filtros
- RN005: Cores distintas por categoria (UI)
- RN006: Admin pode criar novas categorias
- RN007: Categoria √© obrigat√≥ria na cria√ß√£o

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono categoria "Carreira"
      Quando aplico
      Ent√£o vejo apenas threads da categoria Carreira
      
- [ ] Dado que h√° 50 threads "Acad√™mica" e 20 "Carreira"
      Quando visualizo filtro
      Ent√£o vejo "Acad√™mica (50)" e "Carreira (20)"
      
- [ ] Dado que combino filtro "Acad√™mica" + universidade "USP"
      Quando aplico
      Ent√£o vejo threads acad√™micas apenas da USP
      
- [ ] Dado que categoria tem cor espec√≠fica (Carreira = azul)
      Quando visualizo threads
      Ent√£o badge da categoria aparece em azul
      
- [ ] Dado que seleciono m√∫ltiplas categorias
      Quando aplico
      Ent√£o vejo threads de qualquer uma das categorias selecionadas (OR)

##### Prioridade
**Alta** - Organiza√ß√£o fundamental do f√≥rum

##### Complexidade
**Baixa** - Filtro simples com enum

##### Depend√™ncias
RF022 (Criar thread com categoria), RF025 (Lista)

##### Notas/Observa√ß√µes
- Campo `category` enum na tabela threads
- Filtro com checkboxes m√∫ltiplos
- Cores sugeridas: Acad√™mica (verde), Carreira (azul), Vida (laranja), Eventos (roxo)
- √çcones por categoria (opcional)
- Analytics: categoria mais popular
- Admin pode reordenar prioridade de exibi√ß√£o



#### RF039 - Filtro de threads por tags

##### User Story
Como **aluno cadastrado**
Quero **filtrar threads por tags espec√≠ficas**
Para **encontrar discuss√µes sobre t√≥picos muito espec√≠ficos**

##### Descri√ß√£o
Filtro permitindo selecionar uma ou m√∫ltiplas tags para visualizar apenas threads que as contenham.

##### Regras de Neg√≥cio
- RN001: Tags s√£o as mesmas adicionadas na cria√ß√£o da thread
- RN002: Filtro suporta sele√ß√£o m√∫ltipla (OR)
- RN003: Autocomplete de tags populares
- RN004: Contador de threads por tag vis√≠vel
- RN005: Tags clic√°veis na thread ativam filtro automaticamente
- RN006: Filtro combin√°vel com categoria e universidade
- RN007: Cloud de tags populares (opcional)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono tag "Python"
      Quando aplico
      Ent√£o vejo apenas threads com tag "Python"
      
- [ ] Dado que seleciono tags "Python" E "Programa√ß√£o"
      Quando aplico
      Ent√£o vejo threads que t√™m Python OU Programa√ß√£o (OR)
      
- [ ] Dado que clico em tag "C√°lculo" dentro de uma thread
      Quando clico
      Ent√£o sou redirecionado para lista filtrada por "C√°lculo"
      
- [ ] Dado que digito "Prog" no campo de busca de tags
      Quando digito
      Ent√£o vejo autocomplete sugerindo "Programa√ß√£o", "Programa de Est√°gio"
      
- [ ] Dado que visualizo cloud de tags
      Quando vejo
      Ent√£o tags mais usadas aparecem em tamanho maior

##### Prioridade
**Alta** - Descoberta granular de conte√∫do

##### Complexidade
**M√©dia** - Requer busca em rela√ß√£o many-to-many

##### Depend√™ncias
RF022 (Criar thread com tags), RF014 (Sistema de tags)

##### Notas/Observa√ß√µes
- Tabela `thread_tags`: thread_id, tag_id (many-to-many)
- Query: JOIN thread_tags WHERE tag_id IN (?)
- Autocomplete com lista de tags populares (top 50)
- Cloud de tags na sidebar (opcional, visual atrativo)
- Link r√°pido: "Tags relacionadas" em cada thread
- Analytics: tags mais filtradas



#### RF040 - Filtro de threads por popularidade (upvotes)

##### User Story
Como **aluno cadastrado**
Quero **filtrar threads por n√∫mero m√≠nimo de upvotes**
Para **ver apenas conte√∫do j√° validado pela comunidade**

##### Descri√ß√£o
Filtro num√©rico permitindo visualizar apenas threads que atingiram determinado threshold de upvotes.

##### Regras de Neg√≥cio
- RN001: Op√ß√µes pr√©-definidas: 5+, 10+, 20+, 50+ upvotes
- RN002: Filtro combin√°vel com outros filtros
- RN003: Score = upvotes - downvotes
- RN004: Apenas threads com score positivo eleg√≠veis
- RN005: Contador de threads em cada faixa vis√≠vel
- RN006: Link r√°pido "Top threads do m√™s"
- RN007: Threads sem votos n√£o aparecem em filtros com threshold

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono filtro "10+ upvotes"
      Quando aplico
      Ent√£o vejo apenas threads com 10 ou mais upvotes l√≠quidos
      
- [ ] Dado que thread tem 15 upvotes e 3 downvotes (score 12)
      Quando filtro por "10+ upvotes"
      Ent√£o thread aparece nos resultados
      
- [ ] Dado que combino "10+ upvotes" + categoria "Acad√™mica"
      Quando aplico
      Ent√£o vejo threads acad√™micas populares (10+ upvotes)
      
- [ ] Dado que h√° 5 threads com 20+ upvotes
      Quando visualizo filtro
      Ent√£o vejo "20+ upvotes (5)"
      
- [ ] Dado que clico em "Top threads do m√™s"
      Quando clico
      Ent√£o vejo threads com mais upvotes dos √∫ltimos 30 dias

##### Prioridade
**M√©dia** - √ötil para curadoria mas n√£o cr√≠tico

##### Complexidade
**Baixa** - Filtro num√©rico simples

##### Depend√™ncias
RF030-RF031 (Sistemas de upvote/downvote), RF042 (Ordena√ß√£o por popularidade)

##### Notas/Observa√ß√µes
- Campo calculado ou coluna `score` na tabela threads
- Query: WHERE score >= ?
- Badges visuais: "üî• Popular" (20+ upvotes)
- Link de atalho: "Ver apenas populares"
- Analytics: distribui√ß√£o de scores
- Considerar "Trending" (popularidade recente)



#### RF041 - Ordena√ß√£o por mais recentes

##### User Story
Como **aluno cadastrado**
Quero **ver threads ordenadas por data de cria√ß√£o**
Para **acompanhar as discuss√µes mais novas da comunidade**

##### Descri√ß√£o
Op√ß√£o de ordena√ß√£o que exibe threads da mais recente para mais antiga, permitindo acompanhar atividade em tempo real.

##### Regras de Neg√≥cio
- RN001: Ordena√ß√£o padr√£o do f√≥rum
- RN002: Ordem: data de cria√ß√£o DESC (mais nova primeiro)
- RN003: Selector de ordena√ß√£o sempre vis√≠vel
- RN004: Prefer√™ncia de ordena√ß√£o salva por sess√£o
- RN005: Threads editadas n√£o sobem na lista (data de cria√ß√£o prevalece)
- RN006: Compat√≠vel com todos os filtros
- RN007: Indicador visual de "Nova" para threads <24h

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso o f√≥rum sem selecionar ordena√ß√£o
      Quando p√°gina carrega
      Ent√£o threads aparecem ordenadas por mais recentes (padr√£o)
      
- [ ] Dado que h√° thread criada h√° 1h e outra h√° 3h
      Quando visualizo lista
      Ent√£o thread de 1h aparece antes da de 3h
      
- [ ] Dado que seleciono "Mais recentes"
      Quando aplico
      Ent√£o dropdown mostra "Mais recentes" como selecionado
      
- [ ] Dado que thread foi criada h√° 10 horas
      Quando visualizo
      Ent√£o vejo badge "Nova" ao lado do t√≠tulo
      
- [ ] Dado que seleciono outro tipo de ordena√ß√£o e volto
      Quando retorno √† p√°gina
      Ent√£o √∫ltima ordena√ß√£o escolhida √© mantida

##### Prioridade
**Alta** - Ordena√ß√£o padr√£o fundamental

##### Complexidade
**Baixa** - ORDER BY simples

##### Depend√™ncias
RF025 (Lista de threads)

##### Notas/Observa√ß√µes
- Query: ORDER BY created_at DESC
- √çndice em `created_at` para performance
- Dropdown de ordena√ß√£o no topo da lista
- Badge "Nova" para threads <24h (verde)
- localStorage para salvar prefer√™ncia
- Considerar "√öltima atividade" (√∫ltimo coment√°rio) na Fase 2



#### RF042 - Ordena√ß√£o por mais populares

##### User Story
Como **aluno cadastrado**
Quero **ver threads ordenadas por popularidade**
Para **acessar conte√∫do mais valorizado pela comunidade primeiro**

##### Descri√ß√£o
Op√ß√£o de ordena√ß√£o que exibe threads com maior n√∫mero de upvotes (score) no topo, destacando conte√∫do de qualidade.

##### Regras de Neg√≥cio
- RN001: Score = upvotes - downvotes
- RN002: Ordem: score DESC (maior score primeiro)
- RN003: Empate: resolver por data de cria√ß√£o (mais recente)
- RN004: Threads com score negativo aparecem no final
- RN005: Compat√≠vel com todos os filtros
- RN006: Recalculo de score em tempo real
- RN007: Per√≠odo de popularidade: todo tempo (padr√£o)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono "Mais populares"
      Quando aplico
      Ent√£o threads com maior score aparecem primeiro
      
- [ ] Dado que thread A tem 20 upvotes e thread B tem 5
      Quando ordeno por populares
      Ent√£o thread A aparece antes de B
      
- [ ] Dado que threads A e B t√™m mesmo score (10)
      Quando ordeno por populares
      Ent√£o mais recente aparece primeiro (desempate)
      
- [ ] Dado que thread tem score negativo (-5)
      Quando ordeno por populares
      Ent√£o ela aparece no final da lista
      
- [ ] Dado que algu√©m vota em thread enquanto visualizo lista
      Quando p√°gina recarrega ou atualiza
      Ent√£o ordem √© recalculada automaticamente

##### Prioridade
**Alta** - Descoberta de conte√∫do de qualidade

##### Complexidade
**Baixa** - ORDER BY calculado

##### Depend√™ncias
RF030-RF031 (Sistemas de voto), RF040 (Filtro por popularidade)

##### Notas/Observa√ß√µes
- Query: ORDER BY (upvotes - downvotes) DESC, created_at DESC
- Campo calculado `score` para performance (atualizado por trigger)
- √çndice em `score` para queries r√°pidas
- Considerar "Popular hoje", "Popular esta semana" (Fase 2)
- Badge "üî• Trending" para threads populares recentes



#### RF043 - Ordena√ß√£o por mais comentadas

##### User Story
Como **aluno cadastrado**
Quero **ver threads ordenadas por n√∫mero de coment√°rios**
Para **participar de discuss√µes mais ativas e engajadas**

##### Descri√ß√£o
Op√ß√£o de ordena√ß√£o que exibe threads com maior n√∫mero de coment√°rios no topo, indicando discuss√µes ativas.

##### Regras de Neg√≥cio
- RN001: Ordem: n√∫mero de coment√°rios DESC
- RN002: Coment√°rios deletados n√£o contam
- RN003: Empate: resolver por data de cria√ß√£o (mais recente)
- RN004: Threads sem coment√°rios aparecem no final
- RN005: Compat√≠vel com todos os filtros
- RN006: Contador atualizado em tempo real
- RN007: Indicador visual "üî• Discuss√£o ativa" (50+ coment√°rios)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono "Mais comentadas"
      Quando aplico
      Ent√£o threads com mais coment√°rios aparecem primeiro
      
- [ ] Dado que thread A tem 30 coment√°rios e thread B tem 5
      Quando ordeno por mais comentadas
      Ent√£o thread A aparece antes de B
      
- [ ] Dado que thread tem coment√°rios deletados
      Quando contador √© calculado
      Ent√£o apenas coment√°rios ativos s√£o contados
      
- [ ] Dado que threads A e B t√™m 10 coment√°rios cada
      Quando ordeno por mais comentadas
      Ent√£o mais recente aparece primeiro (desempate)
      
- [ ] Dado que thread tem 60 coment√°rios
      Quando visualizo na lista
      Ent√£o vejo badge "üî• Discuss√£o ativa"

##### Prioridade
**M√©dia** - √ötil mas n√£o cr√≠tico para MVP

##### Complexidade
**Baixa** - Agrega√ß√£o COUNT simples

##### Depend√™ncias
RF027 (Coment√°rios), RF025 (Lista de threads)

##### Notas/Observa√ß√µes
- Query: ORDER BY comment_count DESC, created_at DESC
- Campo `comment_count` atualizado por trigger ou cache
- Join eficiente: LEFT JOIN comments GROUP BY thread_id
- Badge para threads muito comentadas (30+, 50+)
- Analytics: m√©dia de coment√°rios por thread
- Considerar "Atividade recente" (√∫ltimo coment√°rio) na Fase 2



#### RF044 - Notifica√ß√£o de novos coment√°rios em threads que participou

##### User Story
Como **aluno que comentou em uma thread**
Quero **receber notifica√ß√£o quando houver novos coment√°rios**
Para **acompanhar a discuss√£o e responder se necess√°rio**

##### Descri√ß√£o
Sistema de notifica√ß√µes que alerta usu√°rios quando threads nas quais participaram (criaram ou comentaram) recebem novos coment√°rios.

##### Regras de Neg√≥cio
- RN001: Notifica√ß√£o ativada automaticamente ao criar thread ou comentar
- RN002: Usu√°rio pode desativar notifica√ß√µes por thread espec√≠fica
- RN003: Notifica√ß√£o in-app (badge de contador)
- RN004: Agrupamento: m√∫ltiplos coment√°rios = 1 notifica√ß√£o
- RN005: Marcar como lida ao visualizar thread
- RN006: N√£o notificar sobre pr√≥prios coment√°rios
- RN007: Limite: m√°ximo 1 notifica√ß√£o por thread a cada 30 minutos

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que criei uma thread
      Quando algu√©m comenta
      Ent√£o recebo notifica√ß√£o "Jo√£o comentou na sua thread: [t√≠tulo]"
      
- [ ] Dado que comentei em thread de outra pessoa
      Quando algu√©m comenta depois de mim
      Ent√£o recebo notifica√ß√£o "Nova resposta em: [t√≠tulo]"
      
- [ ] Dado que recebi 3 coment√°rios em 5 minutos
      Quando visualizo notifica√ß√µes
      Ent√£o vejo 1 notifica√ß√£o agrupada "3 novos coment√°rios em: [t√≠tulo]"
      
- [ ] Dado que desativo notifica√ß√µes de uma thread
      Quando novos coment√°rios chegam
      Ent√£o n√£o recebo mais notifica√ß√µes daquela thread
      
- [ ] Dado que visualizo thread com notifica√ß√µes pendentes
      Quando abro a thread
      Ent√£o notifica√ß√µes s√£o marcadas como lidas automaticamente

##### Prioridade
**Alta** - Core de engajamento e reten√ß√£o

##### Complexidade
**M√©dia** - Requer sistema de notifica√ß√µes

##### Depend√™ncias
RF027 (Coment√°rios), RF169-RF182 (Sistema de notifica√ß√µes)

##### Notas/Observa√ß√µes
- Tabela `notifications`: user_id, thread_id, type, read, created_at
- Badge de contador no √≠cone de notifica√ß√µes (navbar)
- Agrupamento inteligente: "Jo√£o e mais 2 pessoas comentaram"
- Toggle "N√£o seguir mais" em cada thread
- Email digest di√°rio opcional (Fase 2)
- Push notifications mobile (Fase 2)



#### RF045 - Pagina√ß√£o de threads

##### User Story
Como **aluno navegando no f√≥rum**
Quero **que threads sejam exibidas em p√°ginas**
Para **melhorar performance e facilitar navega√ß√£o**

##### Descri√ß√£o
Sistema de pagina√ß√£o que divide lista de threads em p√°ginas de tamanho fixo, com controles de navega√ß√£o.

##### Regras de Neg√≥cio
- RN001: 20 threads por p√°gina (padr√£o)
- RN002: Navega√ß√£o: Primeira, Anterior, [N√∫meros], Pr√≥xima, √öltima
- RN003: Indicador de p√°gina atual vis√≠vel
- RN004: Query parameter na URL: ?page=2
- RN005: Pagina√ß√£o mant√©m filtros e ordena√ß√£o aplicados
- RN006: Scroll autom√°tico para topo ao mudar p√°gina
- RN007: Infinite scroll opcional (configur√°vel)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que h√° 45 threads no total
      Quando acesso f√≥rum
      Ent√£o vejo p√°ginas: 1 (20), 2 (20), 3 (5)
      
- [ ] Dado que estou na p√°gina 1
      Quando clico em "Pr√≥xima"
      Ent√£o navego para p√°gina 2 e URL vira ?page=2
      
- [ ] Dado que filtro por universidade "USP" (15 resultados)
      Quando pagina√ß√£o carrega
      Ent√£o vejo apenas 1 p√°gina com 15 threads
      
- [ ] Dado que mudo de p√°gina 1 para 2
      Quando p√°gina carrega
      Ent√£o scroll volta ao topo automaticamente
      
- [ ] Dado que acesso URL com ?page=999 (n√£o existe)
      Quando p√°gina carrega
      Ent√£o sou redirecionado para √∫ltima p√°gina v√°lida

##### Prioridade
**Alta** - Requisito de performance (RNF003)

##### Complexidade
**Baixa** - Pagina√ß√£o padr√£o

##### Depend√™ncias
RF025 (Lista de threads)

##### Notas/Observa√ß√µes
- Query: LIMIT 20 OFFSET (page-1)*20
- Componente: react-paginate ou similar
- Bot√£o "Carregar mais" como alternativa
- N√∫mero total de p√°ginas calculado: CEIL(total/20)
- Desabilitar bot√µes Primeira/Anterior na p√°gina 1
- Salvar p√°gina atual em query param para compartilhamento



#### RF046 - Pagina√ß√£o de coment√°rios

##### User Story
Como **aluno lendo uma thread**
Quero **que coment√°rios sejam paginados**
Para **melhorar performance em threads com muitos coment√°rios**

##### Descri√ß√£o
Sistema de pagina√ß√£o para coment√°rios dentro de threads, carregando grupos de coment√°rios por vez.

##### Regras de Neg√≥cio
- RN001: 50 coment√°rios por p√°gina (padr√£o)
- RN002: Pagina√ß√£o ativa apenas se thread tem 50+ coment√°rios
- RN003: Ordem cronol√≥gica mantida (mais antigo primeiro)
- RN004: Bot√£o "Carregar mais" ao final (lazy loading)
- RN005: Coment√°rio recente do usu√°rio sempre vis√≠vel
- RN006: Scroll autom√°tico para coment√°rio linkado (?comment_id=123)
- RN007: Contador "Mostrando 1-50 de 120 coment√°rios"

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que thread tem 120 coment√°rios
      Quando abro thread
      Ent√£o vejo primeiros 50 e bot√£o "Carregar mais 50"
      
- [ ] Dado que clico em "Carregar mais"
      Quando carrega
      Ent√£o pr√≥ximos 50 coment√°rios aparecem abaixo
      
- [ ] Dado que thread tem 30 coment√°rios
      Quando abro thread
      Ent√£o todos aparecem sem pagina√ß√£o
      
- [ ] Dado que acesso link direto ?comment_id=85
      Quando p√°gina carrega
      Ent√£o coment√°rio #85 √© carregado e destacado (scroll autom√°tico)
      
- [ ] Dado que publico coment√°rio em thread paginada
      Quando submeto
      Ent√£o novo coment√°rio aparece imediatamente no final (n√£o precisa carregar mais)

##### Prioridade
**M√©dia** - Importante para threads populares

##### Complexidade
**M√©dia** - Lazy loading com state management

##### Depend√™ncias
RF027 (Coment√°rios), RF026 (Visualizar thread)

##### Notas/Observa√ß√µes
- Query: LIMIT 50 OFFSET ?
- Bot√£o "Carregar mais" em vez de n√∫meros de p√°gina (UX)
- Skeleton loading enquanto carrega pr√≥xima p√°gina
- Deep linking para coment√°rio espec√≠fico
- Considerar virtualiza√ß√£o (react-window) se >500 coment√°rios
- Destacar coment√°rio novo com anima√ß√£o fade-in