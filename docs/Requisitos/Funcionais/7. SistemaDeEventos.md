
### M√ìDULO 7: SISTEMA DE EVENTOS

#### RF079 - Criar novo evento (t√≠tulo, descri√ß√£o, data/hora, local, categoria, limite de vagas)

##### User Story
Como **aluno cadastrado**
Quero **criar novo evento da comunidade**
Para **organizar encontros, workshops e atividades com meus colegas**

##### Descri√ß√£o
Formul√°rio completo para criar evento com t√≠tulo, descri√ß√£o, data/hora, localiza√ß√£o, categoria, limite de vagas e outras op√ß√µes, publicando imediatamente na plataforma.

##### Regras de Neg√≥cio
- RN001: T√≠tulo obrigat√≥rio: 10-150 caracteres
- RN002: Descri√ß√£o obrigat√≥ria: 20-5000 caracteres
- RN003: Data/hora obrigat√≥ria: futuro (n√£o pode ser passado)
- RN004: Local obrigat√≥rio para presencial, opcional para online
- RN005: Categoria obrigat√≥ria (Workshop, Palestra, Networking, Social, Estudo, Outro)
- RN006: Tipo obrigat√≥rio: Presencial ou Online
- RN007: Limite de vagas: n√∫mero > 0 ou "Ilimitado"
- RN008: Criador recebe +50 pontos
- RN009: Evento publicado imediatamente (sem modera√ß√£o pr√©via)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em "Criar Evento"
      Quando preencho formul√°rio com t√≠tulo, descri√ß√£o, data, local
      Ent√£o evento √© criado e aparece na listagem imediatamente
      
- [ ] Dado que tento criar evento com data no passado
      Quando coloco data/hora antiga
      Ent√£o vejo valida√ß√£o "Data deve ser no futuro"
      
- [ ] Dado que criei evento presencial sem local
      Quando deixo campo vazio
      Ent√£o vejo valida√ß√£o "Local √© obrigat√≥rio para evento presencial"
      
- [ ] Dado que defino limite de 50 vagas
      Quando evento √© criado
      Ent√£o contador inicia com "50 vagas dispon√≠veis"
      
- [ ] Dado que crio evento com sucesso
      Quando salvo
      Ent√£o recebo +50 pontos e sou redirecionado para p√°gina do evento

##### Prioridade
**Alta** - Funcionalidade core de eventos

##### Complexidade
**M√©dia** - Formul√°rio com valida√ß√µes e m√∫ltiplos campos

##### Depend√™ncias
RF003 (Usu√°rio cadastrado), RF100 (Sistema de pontos)

##### Notas/Observa√ß√µes
- Editor de texto rico para descri√ß√£o (markdown simplificado)
- Date/time picker com timezone awareness
- Tipos: "Presencial" ou "Online" com √≠cones
- Categorias: √≠cones coloridos para cada tipo
- Preview antes de publicar (opcional)
- Campo para link/link Zoom para eventos online
- Upload de imagem/banner (Fase 2)
- Recorr√™ncia (repetir semanalmente) - Fase 2
- Integra√ß√£o com Google Calendar export - Fase 2



#### RF080 - Editar evento pr√≥prio

##### User Story
Como **criador de evento**
Quero **editar meu evento ap√≥s cria√ß√£o**
Para **atualizar informa√ß√µes, data ou cancelar se necess√°rio**

##### Descri√ß√£o
Funcionalidade que permite ao criador modificar t√≠tulo, descri√ß√£o, data/hora, local, categoria e limite de vagas ap√≥s publica√ß√£o.

##### Regras de Neg√≥cio
- RN001: Apenas criador pode editar seu evento
- RN002: Admin pode editar qualquer evento (modera√ß√£o)
- RN003: Edi√ß√µes s√£o permitidas at√© 1 dia antes do evento
- RN004: Se data for alterada, confirmados recebem notifica√ß√£o
- RN005: Se vagas diminuem abaixo de confirmados, erro (n√£o permitir)
- RN006: Hist√≥rico de edi√ß√µes registrado (auditoria)
- RN007: Indicador visual "Editado em DD/MM/YYYY"

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que sou criador do evento
      Quando clico em "Editar"
      Ent√£o vejo formul√°rio pr√©-preenchido com dados atuais
      
- [ ] Dado que edito data do evento
      Quando salvo altera√ß√µes
      Ent√£o todos confirmados recebem notifica√ß√£o "Data do evento mudou"
      
- [ ] Dado que evento √© amanh√£
      Quando tento editar
      Ent√£o vejo mensagem "N√£o √© poss√≠vel editar eventos com menos de 24h"
      
- [ ] Dado que evento tem 30 confirmados e reduzo vagas para 20
      Quando tento salvar
      Ent√£o vejo erro "N√£o √© poss√≠vel reduzir vagas abaixo de confirmados (30)"
      
- [ ] Dado que n√£o sou criador do evento
      Quando visualizo evento
      Ent√£o n√£o vejo bot√£o "Editar"

##### Prioridade
**M√©dia** - Importante mas n√£o cr√≠tico

##### Complexidade
**M√©dia** - Valida√ß√µes e notifica√ß√µes

##### Depend√™ncias
RF079 (Criar evento), RF093-RF094 (Notifica√ß√µes)

##### Notas/Observa√ß√µes
- Bot√£o "Editar" vis√≠vel apenas para criador
- Modal de confirma√ß√£o antes de salvar
- Valida√ß√£o: data >= 24h a partir de agora
- Constraint: vagas >= confirmados atuais
- Logs de edi√ß√µes: quem editou, quando, o que mudou
- Notifica√ß√£o para confirmados se data/hora muda
- Undo autom√°tico por 1 hora (soft delete)
- Considerar "Agendamento" de publica√ß√£o (Fase 2)



#### RF081 - Cancelar evento pr√≥prio

##### User Story
Como **criador de evento**
Quero **cancelar meu evento**
Para **avisar participantes caso n√£o possa mais realizar**

##### Descri√ß√£o
Funcionalidade que permite ao criador cancelar evento, notificando automaticamente todos os confirmados com op√ß√£o de motivo.

##### Regras de Neg√≥cio
- RN001: Apenas criador pode cancelar evento
- RN002: Admin pode cancelar qualquer evento (modera√ß√£o)
- RN003: Confirma√ß√£o obrigat√≥ria antes de cancelar
- RN004: Todos os confirmados recebem notifica√ß√£o
- RN005: Evento desaparece da listagem p√∫blica
- RN006: Soft delete: evento mantido no banco com status "cancelled"
- RN007: Opcional: motivo do cancelamento em texto livre
- RN008: Criador perde 50 pontos de b√¥nus (revers√£o)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que sou criador do evento
      Quando clico em "Cancelar Evento"
      Ent√£o vejo modal de confirma√ß√£o com campo opcional de motivo
      
- [ ] Dado que confirmo cancelamento
      Quando confirmo
      Ent√£o todos os 25 confirmados recebem notifica√ß√£o "Evento cancelado: [Motivo]"
      
- [ ] Dado que cancelei evento
      Quando visualizo lista de eventos
      Ent√£o evento n√£o aparece (soft delete)
      
- [ ] Dado que sou admin
      Quando visualizo evento
      Ent√£o vejo bot√£o "Cancelar" (mesmo se n√£o criei)
      
- [ ] Dado que cancelei evento
      Quando verifico meus pontos
      Ent√£o perdi os 50 pontos de b√¥nus (+50 viram -0)

##### Prioridade
**M√©dia** - Importante para gerenciamento

##### Complexidade
**M√©dia** - Soft delete e notifica√ß√µes em massa

##### Depend√™ncias
RF079 (Criar evento), RF084 (Confirmados), RF093-RF094 (Notifica√ß√µes)

##### Notas/Observa√ß√µes
- Modal: "Tem certeza? Todos os confirmados ser√£o notificados"
- Campo opcional: "Motivo do cancelamento" (255 caracteres)
- Soft delete: campo `status='cancelled'`, `cancelled_at=NOW()`
- Notifica√ß√£o em massa: usar job ass√≠ncrono (n√£o bloquear)
- Email opcional com motivo (Fase 2)
- Op√ß√£o de "Reagendar" em vez de cancelar (Fase 2)
- Logs: quem cancelou, quando, motivo
- Considerar reembolso/cr√©dito para eventos pagos (Fase 2)



#### RF082 - Visualizar lista de eventos

##### User Story
Como **aluno cadastrado**
Quero **visualizar lista de todos os eventos da plataforma**
Para **descobrir e participar de atividades da comunidade**

##### Descri√ß√£o
P√°gina principal de eventos exibindo todos os eventos ativos em formato de lista/grid, com informa√ß√µes resumidas e op√ß√µes de filtro.

##### Regras de Neg√≥cio
- RN001: Listar apenas eventos n√£o cancelados com data >= hoje
- RN002: Informa√ß√µes exibidas: t√≠tulo, data, hora, local, categoria, confirmados/vagas
- RN003: Ordena√ß√£o padr√£o: data (mais pr√≥ximos primeiro)
- RN004: Pagina√ß√£o: 20 eventos por p√°gina ou infinite scroll
- RN005: Eventos com menos de 24h mostra badge "‚è∞ Come√ßando em breve"
- RN006: Status de confirma√ß√£o do usu√°rio vis√≠vel ("Confirmado" ou "Confirmar")
- RN007: Load time <2 segundos

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que acesso p√°gina de eventos
      Quando p√°gina carrega
      Ent√£o vejo lista de eventos ordenados por data (mais pr√≥ximos primeiro)
      
- [ ] Dado que evento √© hoje √† noite
      Quando visualizo
      Ent√£o vejo badge "‚è∞ Come√ßando em breve" destacado
      
- [ ] Dado que j√° confirmei presen√ßa em evento
      Quando visualizo na lista
      Ent√£o bot√£o mostra "‚úì Confirmado" (desabilitado)
      
- [ ] Dado que h√° 45 eventos no total
      Quando carrega
      Ent√£o vejo primeiros 20 com bot√£o "Carregar mais"
      
- [ ] Dado que evento foi cancelado
      Quando visualizo lista
      Ent√£o n√£o aparece mais

##### Prioridade
**Alta** - P√°gina principal de eventos

##### Complexidade
**M√©dia** - Listagem com filtros e status

##### Depend√™ncias
RF079 (Criar evento), RF084 (RSVP)

##### Notas/Observa√ß√µes
- Query: SELECT * FROM events WHERE status != 'cancelled' AND event_date >= TODAY() ORDER BY event_date ASC
- Cards em grid (2-3 colunas desktop) ou listagem
- √çcones por categoria: Workshop (üîß), Palestra (üé§), Networking (ü§ù), Social (üéâ)
- Filtros sidebar: data, categoria, universidade, tipo
- Busca por t√≠tulo dispon√≠vel
- Badges visuais: "Confirmado", "Lotado", "Come√ßando em breve"
- Link "Ver Mais" em cada card
- Considerar mapa visual para presenciais (Fase 2)



#### RF083 - Visualizar detalhes de evento

##### User Story
Como **aluno interessado em evento**
Quero **visualizar p√°gina completa do evento**
Para **saber todos os detalhes antes de confirmar presen√ßa**

##### Descri√ß√£o
P√°gina de detalhes mostrando todas as informa√ß√µes do evento, lista de confirmados, bot√£o de RSVP e op√ß√µes de compartilhamento.

##### Regras de Neg√≥cio
- RN001: Exibir: t√≠tulo, descri√ß√£o completa, data/hora, local, categoria, criador, confirmados
- RN002: Mostrar criador do evento (link para perfil)
- RN003: Se online: mostrar link/c√≥digo de acesso
- RN004: Contador: "X/50 confirmados" com barra visual
- RN005: Bot√£o RSVP din√¢mico: "Confirmar presen√ßa" ou "Cancelar presen√ßa"
- RN006: Se√ß√£o de coment√°rios (Fase 2)
- RN007: Breadcrumb: Eventos > [Categoria] > [T√≠tulo]

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que clico em evento na lista
      Quando p√°gina carrega
      Ent√£o vejo t√≠tulo grande, descri√ß√£o completa, data, hora, local
      
- [ ] Dado que evento tem 30 confirmados de 50 vagas
      Quando visualizo
      Ent√£o vejo barra "30/50 confirmados" com progress bar
      
- [ ] Dado que evento √© online
      Quando visualizo detalhes
      Ent√£o vejo link de acesso (Zoom, Meet, etc)
      
- [ ] Dado que n√£o confirmei presen√ßa
      Quando visualizo
      Ent√£o vejo bot√£o "Confirmar presen√ßa" em verde
      
- [ ] Dado que sou criador do evento
      Quando visualizo
      Ent√£o vejo bot√µes "Editar" e "Cancelar" no topo

##### Prioridade
**Alta** - P√°gina core de evento

##### Complexidade
**M√©dia** - Renderiza√ß√£o complexa com m√∫ltiplos elementos

##### Depend√™ncias
RF079 (Criar evento), RF084 (RSVP), RF086 (Lista de confirmados)

##### Notas/Observa√ß√µes
- Hero image com categoria (background diferente por categoria)
- Sections: Detalhes, Local (mapa), Criador, Confirmados, Compartilhar
- Links compartilh√°veis: social media, email, c√≥pia de URL
- Bot√£o "Adicionar ao calend√°rio" (iCal export)
- Mapa interativo para presenciais (Google Maps Embed)
- Foto do criador/organizador com link para perfil
- Meta tags para preview em redes (Open Graph)
- Considerar QR code para check-in (Fase 2)



#### RF084 - Confirmar presen√ßa em evento (RSVP)

##### User Story
Como **aluno interessado em evento**
Quero **confirmar minha presen√ßa no evento**
Para **indicar que vou participar e ser contabilizado**

##### Descri√ß√£o
Funcionalidade que registra confirma√ß√£o de presen√ßa do usu√°rio em evento, verificando limite de vagas e atualizando contadores.

##### Regras de Neg√≥cio
- RN001: Confirma√ß√£o ocorre imediatamente ao clicar bot√£o
- RN002: Verifica√ß√£o: vagas dispon√≠veis > 0
- RN003: Usu√°rio n√£o pode confirmar 2 vezes (toggle)
- RN004: Criador do evento pode confirmar automaticamente
- RN005: Confirma√ß√£o gera +20 pontos ao usu√°rio
- RN006: Limite: m√°ximo 10 confirma√ß√µes por hora por usu√°rio (anti-spam)
- RN007: Evento criador recebe notifica√ß√£o de novo confirmado

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que vejo evento com vagas dispon√≠veis
      Quando clico em "Confirmar presen√ßa"
      Ent√£o sou adicionado √† lista de confirmados
      
- [ ] Dado que evento tem 0 vagas dispon√≠veis
      Quando clico em "Confirmar presen√ßa"
      Ent√£o vejo erro "Evento lotado"
      
- [ ] Dado que j√° confirmei presen√ßa
      Quando clico novamente
      Ent√£o confirma√ß√£o √© removida (toggle)
      
- [ ] Dado que confirmo presen√ßa
      Quando sistema processa
      Ent√£o recebo +20 pontos
      
- [ ] Dado que sou criador e confirmo presen√ßa
      Quando confirmo
      Ent√£o apare√ßo naturalmente na lista de confirmados

##### Prioridade
**Alta** - Funcionalidade core de RSVP

##### Complexidade
**M√©dia** - Valida√ß√µes e rate limiting

##### Depend√™ncias
RF083 (Visualizar evento), RF100 (Pontos)

##### Notas/Observa√ß√µes
- Tabela `event_confirmations`: user_id, event_id, confirmed_at
- Constraint UNIQUE (user_id, event_id)
- Verifica√ß√£o: SELECT COUNT(*) FROM confirmations WHERE event_id=?
- Rate limiting: 10 confirma√ß√µes/hora por usu√°rio (Redis)
- Loading spinner durante requisi√ß√£o
- Toast: "Presen√ßa confirmada! ‚úì"
- Notifica√ß√£o ao criador (agregada se m√∫ltiplas)
- Considerar lista de espera se lotado (Fase 2)
- Logs de todas confirma√ß√µes (auditoria)



#### RF085 - Cancelar confirma√ß√£o de presen√ßa

##### User Story
Como **aluno confirmado em evento**
Quero **cancelar minha presen√ßa**
Para **liberar vaga para outros e n√£o mais aparecer na lista**

##### Descri√ß√£o
Funcionalidade que remove confirma√ß√£o de presen√ßa do usu√°rio, liberando vaga e removendo da lista de confirmados.

##### Regras de Neg√≥cio
- RN001: Cancelamento ocorre imediatamente ao clicar
- RN002: Confirma√ß√£o obrigat√≥ria antes de cancelar
- RN003: Vagas s√£o liberadas para pr√≥ximo na fila (Fase 2)
- RN004: Usu√°rio perde 20 pontos (revers√£o)
- RN005: Sem notifica√ß√£o ao criador (apenas atualiza contador)
- RN006: Permitir cancelamento at√© 1 hora antes do evento
- RN007: Ap√≥s come√ßar o evento: n√£o permite cancelamento

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que confirmei presen√ßa em evento
      Quando clico em "Cancelar presen√ßa"
      Ent√£o vejo modal de confirma√ß√£o
      
- [ ] Dado que confirmo cancelamento
      Quando confirmo
      Ent√£o sou removido da lista de confirmados e vaga √© liberada
      
- [ ] Dado que evento come√ßa em 30 minutos
      Quando tento cancelar
      Ent√£o vejo mensagem "N√£o √© poss√≠vel cancelar com menos de 1h"
      
- [ ] Dado que evento j√° come√ßou
      Quando tento cancelar
      Ent√£o vejo erro "Evento j√° come√ßou"
      
- [ ] Dado que cancelo presen√ßa
      Quando verifico meus pontos
      Ent√£o perdi os 20 pontos de b√¥nus

##### Prioridade
**M√©dia** - Importante mas menos cr√≠tico

##### Complexidade
**Baixa** - DELETE simples com valida√ß√µes

##### Depend√™ncias
RF084 (Confirmar presen√ßa), RF087 (Contador de vagas)

##### Notas/Observa√ß√µes
- Modal: "Tem certeza que deseja cancelar?"
- Valida√ß√£o: NOW() < event_date - 1 HOUR
- DELETE FROM confirmations WHERE user_id=? AND event_id=?
- Toast: "Presen√ßa cancelada"
- Contador de vagas atualiza (+1)
- Sem notifica√ß√£o ao criador (silencioso)
- Considerar motivo de cancelamento (analytics - Fase 2)
- Permiss√£o: apenas usu√°rio confirmado pode cancelar



#### RF086 - Visualizar lista de confirmados

##### User Story
Como **criador ou participante do evento**
Quero **visualizar quem confirmou presen√ßa no evento**
Para **saber quem vai participar e fazer networking**

##### Descri√ß√£o
P√°gina ou se√ß√£o que exibe lista de todos os usu√°rios confirmados no evento com informa√ß√µes b√°sicas (foto, nome, universidade, curso).

##### Regras de Neg√≥cio
- RN001: Listar apenas confirma√ß√µes com status ativo
- RN002: Informa√ß√µes: foto, nome, universidade, curso, tags (3 principais)
- RN003: Ordena√ß√£o: ordem de confirma√ß√£o (primeiro confirmado primeiro)
- RN004: Criador do evento aparece destacado ("Organizador")
- RN005: Perfis clic√°veis (link para perfil de cada confirmado)
- RN006: Limite: mostrar m√°ximo 100, depois "Carregar mais"
- RN007: Contador total: "XX pessoas confirmadas"

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que evento tem 15 confirmados
      Quando clico em "Ver confirmados"
      Ent√£o vejo lista com foto, nome, universidade, curso de todos 15
      
- [ ] Dado que criador est√° na lista
      Quando visualizo
      Ent√£o vejo badge "Organizador" no seu card
      
- [ ] Dado que clico no perfil de confirmado
      Quando clico
      Ent√£o sou redirecionado para perfil dele
      
- [ ] Dado que h√° 150 confirmados
      Quando visualizo lista
      Ent√£o vejo primeiros 100 com bot√£o "Carregar mais"
      
- [ ] Dado que olho para topo da lista
      Quando visualizo
      Ent√£o vejo "155 pessoas confirmadas"

##### Prioridade
**M√©dia** - Networking importante mas n√£o cr√≠tico

##### Complexidade
**Baixa** - Listagem simples

##### Depend√™ncias
RF084 (Confirma√ß√µes), RF083 (Detalhes do evento)

##### Notas/Observa√ß√µes
- URL: /eventos/[event_id]/confirmados
- Query: SELECT users.* FROM users JOIN event_confirmations ORDER BY confirmed_at ASC
- Cards em grid (4-5 colunas desktop) ou listagem
- Badge "Organizador" em ouro/destaque
- Pagina√ß√£o: 100 por p√°gina
- Busca por nome em lista (opcional)
- Link r√°pido "Adicionar amigo" em cada card
- Avatares com fallback (inicial do nome)
- Considerar exportar lista (CSV) para organizador - Fase 2



#### RF087 - Contador de vagas restantes

##### User Story
Como **aluno visualizando evento**
Quero **saber quantas vagas ainda est√£o dispon√≠veis**
Para **avaliar se vou ficar de fora ou se h√° tempo h√°bil**

##### Descri√ß√£o
Exibi√ß√£o clara do n√∫mero de vagas dispon√≠veis em rela√ß√£o ao limite, com indicador visual de quanto espa√ßo resta.

##### Regras de Neg√≥cio
- RN001: C√°lculo: vagas_total - confirmados_atuais = vagas_restantes
- RN002: Exibir formato: "25/50 confirmados" ou "25 vagas dispon√≠veis"
- RN003: Atualiza√ß√£o em tempo real quando algu√©m confirma/cancela
- RN004: Barra visual de progresso mostrando preenchimento
- RN005: Badge "Lotado" quando vagas_restantes = 0
- RN006: Badge "√öltimas vagas!" quando vagas_restantes <= 3
- RN007: Se evento ilimitado: mostrar apenas "Ilimitado"

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que evento tem 50 vagas e 25 confirmados
      Quando visualizo
      Ent√£o vejo "25/50 confirmados" com barra 50% preenchida
      
- [ ] Dado que evento tem 3 vagas restantes
      Quando visualizo
      Ent√£o vejo badge amarelo "√öltimas vagas!"
      
- [ ] Dado que evento est√° lotado
      Quando visualizo
      Ent√£o vejo badge vermelho "Lotado" e bot√£o desabilitado
      
- [ ] Dado que algu√©m confirma presen√ßa ao vivo
      Quando pessoa confirma
      Ent√£o contador atualiza de 26/50 para 25/50 (em tempo real)
      
- [ ] Dado que evento n√£o tem limite de vagas
      Quando visualizo
      Ent√£o vejo "Ilimitado"

##### Prioridade
**Alta** - Informa√ß√£o cr√≠tica

##### Complexidade
**Baixa** - C√°lculo simples com atualiza√ß√£o

##### Depend√™ncias
RF084-RF085 (Confirma√ß√µes)

##### Notas/Observa√ß√µes
- Campo calculado ou query COUNT ao carregar
- Atualiza√ß√£o via WebSocket (real-time) ou polling (5s)
- Barra de progresso visual (HTML5 progress tag)
- Cores: Verde (<50% lotado), Amarelo (50-90%), Vermelho (>90% ou lotado)
- Badge din√¢mico: condicional com l√≥gica simples
- Considerar "Fila de espera" quando lotado (Fase 2)
- Analytics: eventos mais procurados (alta demanda)



#### RF088 - Impedir confirma√ß√µes acima do limite de vagas

##### User Story
Como **sistema ISMART Conecta**
Quero **validar antes de aceitar confirma√ß√£o acima do limite**
Para **garantir que evento respeita seu limite de capacidade**

##### Descri√ß√£o
Valida√ß√£o que bloqueia confirma√ß√£o de presen√ßa quando evento j√° atingiu n√∫mero m√°ximo de vagas.

##### Regras de Neg√≥cio
- RN001: Verifica√ß√£o: confirmados_atuais < vagas_totais
- RN002: Se confirmados >= vagas: rejeitar com erro claro
- RN003: Valida√ß√£o no frontend (UX) e backend (seguran√ßa)
- RN004: Bot√£o desabilitado visualmente quando lotado
- RN005: Tentativa via API direta retorna erro 409
- RN006: Sem notifica√ß√£o de erro (apenas feedback visual)
- RN007: Considerar fila de espera (Fase 2)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que evento tem 50 vagas e 50 confirmados
      Quando clico em "Confirmar presen√ßa"
      Ent√£o vejo erro "Evento lotado"
      
- [ ] Dado que evento est√° lotado
      Quando visualizo
      Ent√£o bot√£o "Confirmar" aparece desabilitado (cinza)
      
- [ ] Dado que evento tem 49/50 e algu√©m confirma ao vivo
      Quando 50¬∫ pessoa confirma
      Ent√£o bot√£o desabilita para pr√≥xima pessoa
      
- [ ] Dado que tenta confirmar via API direta
      Quando POST /events/{id}/confirm
      Ent√£o retorna erro 409 "Evento lotado"
      
- [ ] Dado que evento n√£o tem limite (ilimitado)
      Quando clico em confirmar
      Ent√£o sempre √© aceito (sem rejei√ß√£o)

##### Prioridade
**Alta** - Requisito cr√≠tico de integridade

##### Complexidade
**Baixa** - Valida√ß√£o simples

##### Depend√™ncias
RF084 (Confirmar presen√ßa), RF087 (Contador)

##### Notas/Observa√ß√µes
- Valida√ß√£o no backend OBRIGAT√ìRIA (antes de INSERT)
- Query: SELECT COUNT(*) FROM confirmations WHERE event_id=?
- Verifica√ß√£o: IF count >= vagas THEN REJECT
- Frontend: bot√£o com disabled=true + cursor:not-allowed
- Tooltip ao hover: "Evento lotado"
- Constraint CHECK no banco: n√£o √© necess√°rio (l√≥gica app)
- Logs de tentativas de confirma√ß√£o em evento lotado
- Considerar sistema de ticket/fila (Fase 2)



#### RF089 - Filtro de eventos por data

##### User Story
Como **aluno navegando eventos**
Quero **filtrar eventos por per√≠odo de tempo**
Para **encontrar atividades pr√≥ximas ou futuras**

##### Descri√ß√£o
Filtro permitindo visualizar eventos por data espec√≠fica, intervalo de datas ou per√≠odos pr√©-definidos (hoje, semana, m√™s).

##### Regras de Neg√≥cio
- RN001: Op√ß√µes pr√©-definidas: "Hoje", "Esta semana", "Este m√™s", "Pr√≥ximos 3 meses"
- RN002: Op√ß√£o de "Data customizada": seletor de intervalo (de/at√©)
- RN003: Filtro combin√°vel com outros (categoria, universidade, etc)
- RN004: Ordena√ß√£o padr√£o mantida: pr√≥ximos eventos primeiro
- RN005: Contador de eventos em cada per√≠odo vis√≠vel
- RN006: "Hoje" recalcula automaticamente (midnight)
- RN007: Eventos passados n√£o aparecem

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono filtro "Esta semana"
      Quando aplico
      Ent√£o vejo apenas eventos de hoje at√© domingo
      
- [ ] Dado que clico em "Hoje"
      Quando aplico
      Ent√£o vejo apenas eventos de hoje
      
- [ ] Dado que h√° 8 eventos nesta semana
      Quando vejo filtro
      Ent√£o vejo "Esta semana (8)"
      
- [ ] Dado que seleciono "Data customizada"
      Quando escolho 01/11 at√© 15/11
      Ent√£o vejo eventos apenas nesse per√≠odo
      
- [ ] Dado que evento foi h√° 2 dias
      Quando visualizo lista
      Ent√£o evento n√£o aparece (s√≥ futuros)

##### Prioridade
**Alta** - Descoberta importante

##### Complexidade
**Baixa** - Filtro SQL com WHERE em data

##### Depend√™ncias
RF082 (Lista de eventos)

##### Notas/Observa√ß√µes
- Op√ß√µes pr√©-definidas: bot√µes/badges visuais
- Date picker: calendario visual (Flatpickr ou React Calendar)
- Query: WHERE event_date BETWEEN ? AND ? AND event_date >= TODAY()
- Per√≠odo "Hoje": 00:00 at√© 23:59
- "Esta semana": pr√≥xima segunda at√© domingo
- "Este m√™s": 1¬∫ at√© √∫ltimo dia do m√™s atual
- Sidebar responsivo (colaps√°vel em mobile)
- Considerar timezone do usu√°rio
- "Pr√≥ximos 3 meses": date + 90 days



#### RF090 - Filtro de eventos por categoria

##### User Story
Como **aluno buscando tipo espec√≠fico de evento**
Quero **filtrar por categoria de evento**
Para **encontrar atividades que me interessam**

##### Descri√ß√£o
Filtro que permite visualizar apenas eventos de categorias selecionadas (Workshop, Palestra, Networking, Social, Estudo, Outro).

##### Regras de Neg√≥cio
- RN001: Categorias: Workshop, Palestra, Networking, Social, Estudo, Outro
- RN002: Sele√ß√£o m√∫ltipla permitida (checkbox)
- RN003: Contador de eventos por categoria
- RN004: Filtro combin√°vel com data, universidade, tipo
- RN005: Cores distintas por categoria (UI)
- RN006: √çcones representativos para cada categoria
- RN007: "Todas" como op√ß√£o padr√£o

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono "Workshop"
      Quando aplico
      Ent√£o vejo apenas eventos da categoria Workshop
      
- [ ] Dado que h√° 12 workshops e 8 palestras
      Quando vejo filtro
      Ent√£o vejo "Workshop (12)" e "Palestra (8)"
      
- [ ] Dado que seleciono "Workshop" E "Palestra"
      Quando aplico
      Ent√£o vejo eventos de ambas categorias (OR)
      
- [ ] Dado que Workshop tem cor azul
      Quando visualizo evento dessa categoria
      Ent√£o √≠cone/badge √© azul
      
- [ ] Dado que limpo filtro
      Quando clico "Todas"
      Ent√£o vejo eventos de todas categorias novamente

##### Prioridade
**Alta** - Descoberta organizada

##### Complexidade
**Baixa** - Filtro enum simples

##### Depend√™ncias
RF082 (Lista de eventos), RF079 (Categoria)

##### Notas/Observa√ß√µes
- Tabela `event_categories` ou enum na tabela events
- √çcones: Workshop=üîß, Palestra=üé§, Networking=ü§ù, Social=üéâ, Estudo=üìö
- Cores: Workshop=Azul, Palestra=Roxo, Networking=Verde, Social=Laranja, Estudo=Vermelho
- Query: WHERE category IN (?)
- Checkboxes com contadores din√¢micos
- Sidebar: lista de categorias com checkboxes
- Considerar "Sugerir categoria" baseado em cliques
- Top categorias no dashboard



#### RF091 - Filtro de eventos por universidade

##### User Story
Como **aluno**
Quero **filtrar eventos da minha universidade ou de outras espec√≠ficas**
Para **ver atividades relevantes ao meu contexto**

##### Descri√ß√£o
Filtro que permite visualizar apenas eventos criados por alunos de universidades selecionadas.

##### Regras de Neg√≥cio
- RN001: Lista de universidades ordenada alfabeticamente
- RN002: Sele√ß√£o m√∫ltipla permitida
- RN003: "Minha universidade" destacada visualmente
- RN004: Contador de eventos por universidade
- RN005: Filtro combin√°vel com data, categoria, tipo
- RN006: Link r√°pido: "Ver eventos da minha universidade"
- RN007: Valida√ß√£o: apenas universidades com eventos aparecem

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono "USP"
      Quando aplico
      Ent√£o vejo apenas eventos de alunos da USP
      
- [ ] Dado que minha universidade √© USP
      Quando vejo filtro
      Ent√£o vejo "Minha universidade - USP" destacado
      
- [ ] Dado que h√° 45 eventos da USP e 30 da UNICAMP
      Quando vejo filtro
      Ent√£o vejo "USP (45)" e "UNICAMP (30)"
      
- [ ] Dado que seleciono "USP" E "FGV"
      Quando aplico
      Ent√£o vejo eventos de ambas universidades
      
- [ ] Dado que clico em link "Ver eventos da minha universidade"
      Quando clico
      Ent√£o filtro √© aplicado automaticamente

##### Prioridade
**Alta** - Contextualiza√ß√£o importante

##### Complexidade
**Baixa** - Filtro com JOIN simples

##### Depend√™ncias
RF082 (Lista), RF079 (Criador)

##### Notas/Observa√ß√µes
- Query: SELECT DISTINCT university FROM users JOIN events... ORDER BY university
- Join: events -> user_creator -> university
- Checkbox list com contadores din√¢micos
- Badge "Minha Universidade" em ouro
- Sidebar responsivo
- Top universidades destacadas
- Considerar regional/estadual (Fase 2)



#### RF092 - Filtro de eventos por tipo (presencial/online)

##### User Story
Como **aluno**
Quero **filtrar eventos por tipo (presencial ou online)**
Para **escolher conforme minha disponibilidade e prefer√™ncia**

##### Descri√ß√£o
Filtro que permite visualizar apenas eventos do tipo selecionado: presencial (com local f√≠sico) ou online (com link/c√≥digo).

##### Regras de Neg√≥cio
- RN001: Tipos: "Presencial" ou "Online"
- RN002: Sele√ß√£o m√∫ltipla permitida (ambos tipos)
- RN003: Contador de eventos por tipo
- RN004: √çcones distintos: üìç (presencial) vs üíª (online)
- RN005: Para presenciais: exibir local no preview
- RN006: Para online: exibir link de acesso no preview
- RN007: Filtro combin√°vel com data, categoria, universidade

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que seleciono "Presencial"
      Quando aplico
      Ent√£o vejo apenas eventos com local f√≠sico
      
- [ ] Dado que h√° 20 presenciais e 15 online
      Quando vejo filtro
      Ent√£o vejo "Presencial (20)" e "Online (15)"
      
- [ ] Dado que evento √© online
      Quando visualizo na lista
      Ent√£o vejo √≠cone üíª e link de acesso
      
- [ ] Dado que evento √© presencial
      Quando visualizo na lista
      Ent√£o vejo √≠cone üìç e endere√ßo
      
- [ ] Dado que seleciono ambos tipos
      Quando aplico
      Ent√£o vejo presenciais E online (todos)

##### Prioridade
**M√©dia** - √ötil mas menos cr√≠tico

##### Complexidade
**Baixa** - Filtro booleano simples

##### Depend√™ncias
RF082 (Lista), RF079 (Tipo do evento)

##### Notas/Observa√ß√µes
- Coluna `event_type` enum: 'presencial' ou 'online'
- √çcones: üìç (localiza√ß√£o) vs üíª (computador)
- Query: WHERE event_type IN (?)
- Buttons ou toggles para sele√ß√£o
- Presencial: mostrar "üìç Local" em preview
- Online: mostrar "üíª Link" em preview
- Badge de tipo em cada card
- Considerar "H√≠brido" (Fase 2)



#### RF093 - Notifica√ß√£o de eventos pr√≥ximos

##### User Story
Como **aluno confirmado em evento**
Quero **receber notifica√ß√£o quando evento est√° pr√≥ximo**
Para **n√£o esquecer e ter tempo de se preparar**

##### Descri√ß√£o
Sistema de notifica√ß√£o que alerta usu√°rios confirmados quando evento come√ßa em 24 horas e 1 hora antes.

##### Regras de Neg√≥cio
- RN001: Notifica√ß√£o 24 horas antes (dia anterior)
- RN002: Notifica√ß√£o 1 hora antes
- RN003: Notifica√ß√£o in-app com deeplink para evento
- RN004: Email opcional (Fase 2)
- RN005: Apenas usu√°rios confirmados recebem
- RN006: Cancelamento de notifica√ß√£o se usu√°rio cancela presen√ßa
- RN007: Prefer√™ncia: usu√°rio pode desabilitar notifica√ß√µes de eventos

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que confirmei presen√ßa em evento amanh√£ √†s 19h
      Quando 24h antes (ontem 19h passa)
      Ent√£o recebo notifica√ß√£o "Evento amanh√£: [T√≠tulo]"
      
- [ ] Dado que evento come√ßa em 1 hora
      Quando 1h antes chega
      Ent√£o recebo notifica√ß√£o "Evento come√ßando em 1h"
      
- [ ] Dado que cancelei minha presen√ßa
      Quando notifica√ß√£o agendada iria disparar
      Ent√£o notifica√ß√£o n√£o √© enviada (cancelada)
      
- [ ] Dado que desabilitei notifica√ß√µes de eventos
      Quando evento pr√≥ximo chega
      Ent√£o n√£o recebo notifica√ß√£o (respeitando prefer√™ncia)
      
- [ ] Dado que recebi notifica√ß√£o
      Quando clico
      Ent√£o sou redirecionado para p√°gina do evento

##### Prioridade
**M√©dia** - Engajamento importante

##### Complexidade
**M√©dia** - Job agendado com verifica√ß√µes

##### Depend√™ncias
RF084 (Confirma√ß√µes), RF085 (Cancelamento), RF169-RF182 (Notifica√ß√µes)

##### Notas/Observa√ß√µes
- Job scheduler: rodando a cada 15 minutos
- Query: SELECT * FROM events e confirmations WHERE event_date BETWEEN NOW() AND NOW()+1h
- Dois triggers: -24h e -1h
- Marca como notificado (column `notified_24h`, `notified_1h`)
- Toast notification: "Lembre-se: [Evento] come√ßando em 1h!"
- Deeplink: /eventos/[event_id]
- Prefer√™ncia de notifica√ß√£o no perfil
- Considerar SMS para eventos cr√≠ticos (Fase 2)



#### RF094 - Notifica√ß√£o de cancelamento de evento (para confirmados)

##### User Story
Como **aluno confirmado em evento cancelado**
Quero **ser notificado que evento foi cancelado**
Para **ajustar meus planos e n√£o ficar na d√∫vida**

##### Descri√ß√£o
Notifica√ß√£o autom√°tica enviada a todos confirmados quando evento √© cancelado, incluindo motivo e sugest√µes de pr√≥ximos eventos.

##### Regras de Neg√≥cio
- RN001: Notifica√ß√£o in-app imediata ao cancelar
- RN002: Email com motivo (Fase 2)
- RN003: Apenas confirmados recebem
- RN004: Notifica√ß√£o mostra: nome do evento, motivo (se informado)
- RN005: Link para "Pr√≥ximos eventos similares" (sugest√£o)
- RN006: Agrupamento: se v√°rios eventos cancelam, notifica√ß√µes separadas
- RN007: Sem op√ß√£o de reply/feedback (informativo apenas)

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que evento que confirmei √© cancelado
      Quando cancelamento √© processado
      Ent√£o recebo notifica√ß√£o "Evento cancelado: [T√≠tulo]"
      
- [ ] Dado que criador forneceu motivo "Organizador indispon√≠vel"
      Quando vejo notifica√ß√£o
      Ent√£o vejo motivo explicado
      
- [ ] Dado que recebo notifica√ß√£o de cancelamento
      Quando clico em "Ver eventos similares"
      Ent√£o vejo lista de pr√≥ximos eventos da mesma categoria
      
- [ ] Dado que n√£o confirmei presen√ßa
      Quando evento √© cancelado
      Ent√£o n√£o recebo notifica√ß√£o
      
- [ ] Dado que recebo m√∫ltiplas notifica√ß√µes de cancelamento
      Quando visualizo
      Ent√£o cada uma √© separada (n√£o agrupada)

##### Prioridade
**M√©dia** - Comunica√ß√£o importante

##### Complexidade
**M√©dia** - Notifica√ß√µes em massa com dados

##### Depend√™ncias
RF081 (Cancelar evento), RF084 (Confirmados)

##### Notas/Observa√ß√µes
- Trigger ao atualizar status='cancelled'
- Query: SELECT user_id FROM confirmations WHERE event_id=?
- Job: enviar notifica√ß√£o para cada confirmado
- Tabela `notifications`: type='event_cancelled'
- Badge vermelho: üö´ Evento Cancelado
- Toast + in-app notification
- Email com motivo (Fase 2)
- Sugest√£o: "Pr√≥ximos eventos na categoria [Categoria]"
- Logs completos de notifica√ß√µes enviadas
- Considerar oferta de cr√©dito/vale para eventos futuros (Fase 2)



#### RF095 - Arquivamento autom√°tico de eventos passados

##### User Story
Como **sistema ISMART Conecta**
Quero **arquivar automaticamente eventos que j√° passaram**
Para **manter listagem limpa e performance otimizada**

##### Descri√ß√£o
Processo autom√°tico que marca eventos como "arquivados" ap√≥s sua data/hora de t√©rmino, removendo-os da listagem p√∫blica mas mantendo hist√≥rico.

##### Regras de Neg√≥cio
- RN001: Arquivamento ocorre automaticamente quando NOW() > event_date + duration
- RN002: Dura√ß√£o padr√£o: 3 horas (se n√£o informada)
- RN003: Soft archive: campo `archived=true`, mant√©m registros
- RN004: Eventos arquivados n√£o aparecem em listagem padr√£o
- RN005: Criador pode visualizar eventos arquivados no hist√≥rico
- RN006: Admin pode visualizar/restaurar eventos arquivados
- RN007: Job agendado: diariamente √†s 1 AM

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que evento era hoje √†s 18h com dura√ß√£o 2h (termina 20h)
      Quando passa 20h e job rodeia
      Ent√£o evento √© marcado como arquivado
      
- [ ] Dado que evento foi arquivado
      Quando visualizo lista de eventos
      Ent√£o evento n√£o aparece mais (oculto)
      
- [ ] Dado que sou criador de evento arquivado
      Quando acesso "Meus eventos"
      Ent√£o vejo evento em se√ß√£o "Hist√≥rico"
      
- [ ] Dado que sou admin
      Quando visualizo painel administrativo
      Ent√£o posso ver e restaurar eventos arquivados
      
- [ ] Dado que evento tem 500 confirmados
      Quando √© arquivado
      Ent√£o hist√≥rico de confirma√ß√µes √© preservado

##### Prioridade
**M√©dia** - Limpeza e manuten√ß√£o

##### Complexidade
**Baixa** - Job simples de UPDATE

##### Depend√™ncias
RF082 (Lista de eventos), RF079 (Cria√ß√£o)

##### Notas/Observa√ß√µes
- Job scheduler: diariamente 1 AM
- Query: UPDATE events SET archived=true WHERE event_date + (duration OR 3h) < NOW()
- Soft delete: manter registro com archived_at timestamp
- √çndice em (archived, event_date) para queries r√°pidas
- Eventos arquivados: query padr√£o WHERE archived=false
- Hist√≥rico de eventos para criador: WHERE archived=true
- Admin painel: filtro para ver arquivados
- Considerar hard delete ap√≥s 1 ano (LGPD compliance)
- Logs de arquivamento para auditoria



#### RF096 - Calend√°rio visual de eventos

##### User Story
Como **aluno explorando eventos**
Quero **visualizar calend√°rio com eventos marcados por data**
Para **ter vis√£o visual dos pr√≥ximos meses de atividades**

##### Descri√ß√£o
Componente de calend√°rio interativo que mostra eventos como pontos/cores nas datas, com op√ß√£o de clicar para ver detalhes do dia.

##### Regras de Neg√≥cio
- RN001: Exibir calend√°rio com m√™s/ano naveg√°veis
- RN002: Marcar datas com eventos (pontos/cores/badges)
- RN003: Cores por categoria (Workshop=azul, Palestra=roxo, etc)
- RN004: Hover mostra eventos do dia
- RN005: Click no dia mostra lista de eventos daquele dia
- RN006: Indicador de eventos hoje com destaque especial
- RN007: Navega√ß√£o: m√™s anterior/pr√≥ximo com arrows

##### Crit√©rios de Aceita√ß√£o
- [ ] Dado que visualizo calend√°rio
      Quando vejo m√™s atual
      Ent√£o datas com eventos t√™m marcadores visuais
      
- [ ] Dado que passo mouse em data com evento
      Quando hover ativa
      Ent√£o vejo popup com t√≠tulo do evento
      
- [ ] Dado que clico em data 15/11 (com 3 eventos)
      Quando clico
      Ent√£o vejo lista dos 3 eventos daquele dia
      
- [ ] Dado que evento √© hoje
      Quando visualizo calend√°rio
      Ent√£o hoje tem destaque especial (c√≠rculo, bold, cor)
      
- [ ] Dado que clico em seta "Pr√≥ximo m√™s"
      Quando clico
      Ent√£o calend√°rio avan√ßa para pr√≥ximo m√™s

##### Prioridade
**Baixa** - Nice-to-have, n√£o cr√≠tico para MVP

##### Complexidade
**M√©dia** - Componente visual com intera√ß√µes

##### Depend√™ncias
RF082 (Lista de eventos)

##### Notas/Observa√ß√µes
- Biblioteca: React Big Calendar, FullCalendar, ou Chakra Calendar
- Cores por categoria (mapeamento visual)
- Badges ou pontos em datas com eventos
- Popup ao hover: "[X] eventos"
- Click abre modal ou sidebar com lista do dia
- Navega√ß√£o de m√™s: arrows ou dropdown
- Responsive: muda layout em mobile (semana/dia)
- Considerar m√∫ltiplas visualiza√ß√µes: m√™s/semana/dia (Fase 2)
- Export para iCal (Fase 2)
- Indicador "Hoje" com cor especial (ex: vermelho)